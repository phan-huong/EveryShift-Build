{"version":3,"sources":["shared/functions/General.js","shared/functions/Date.js","shared/components/Navigation/MainHeader.js","shared/components/UIElements/NavIcon.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/NavHeader.js","shared/components/Navigation/MainFooter.js","shared/components/Navigation/NavFooter.js","shared/components/localhost.js","shared/components/UIElements/Avatar.js","shared/components/UIElements/Card.js","users/components/UserItem.js","users/components/UsersList.js","users/pages/Users.js","places/pages/About.js","shared/functions/FormatDate.js","users/components/UserForm.js","users/pages/UserProfile.js","calendar/components/CalendarTopBar.js","calendar/components/WeekController.js","calendar/components/CalendarTitle.js","calendar/components/HourLine.js","shared/components/UIElements/CustomModal.js","calendar/components/ShiftItem.js","calendar/components/SingleDayShifts.js","calendar/components/CalendarMainWrapper.js","calendar/components/WeekCalendar.js","calendar/pages/Calendar.js","shifts/wishlist/Wishlist.js","shifts/timesheet/Paycheck.js","shifts/pages/Timesheet.js","shifts/components/ShiftForm.js","shifts/pages/ShiftDetails.js","daysoff/components/DaysOffList.js","daysoff/components/AddDaysOff.js","daysoff/pages/DaysOff.js","qrcode/pages/QRCodeViewerPage.js","qrcode/pages/QRCodeScannerPage.js","home/ShiftToday.js","home/UpcomingShifts.js","home/Home.js","Main.js","users/pages/SignIn.js","App.js","index.js"],"names":["isEmptyObject","obj","Object","keys","length","constructor","get_local_user_data","JSON","parse","localStorage","getItem","get_local_user_token","update_local_user_data","data","setItem","stringify","check_if_manager","userData","role","sort_by_date","arr","sort","a","b","Date","date","DateToday","today","getDate","getMonth","getFullYear","state","currentDate","className","this","Component","MainHeader","props","children","NavIcon","style","icon","text","SideDrawer","history","useHistory","useState","userID","setUserID","userRole","setUserRole","closeDrawer","document","getElementById","classList","remove","useEffect","_id","id","visible","visible_class","to","onClick","window","location","href","clear","push","NavHeader","username","setUsername","drawerVisible","setdrawerVisible","addEventListener","event","sideDrawer","navBtn","navBtn_i","target","parentNode","name","firstName","lastName","e","preventDefault","aria-hidden","MainFooter","NavFooter","OverlayTrigger","placement","overlay","Tooltip","data-toggle","get_ip","device_type","ip","Avatar","src","image","alt","width","height","Card","UserItem","color","background","UsersList","items","map","user","color_bkgr","Users","users","setUsers","localUser","setlocalUser","fetch_all_users","token","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","then","response","status_code","status","json","result","catch","error","console","log","About","process","CALENDAR","days_of_week","days_short","days_super_short","months","months_short","height_rate","to_raw_date","date_in","date_out","new_date","new_year","new_month","new_day","to_standard_date","get_this_month","get_this_year","get_hour_as_number","time_in","hour_out","hour_str","split","parseInt","ISO8601_week_no","dt","tdt","valueOf","dayn","getDay","setDate","firstThursday","setMonth","Math","ceil","get_week_by_day","current_day","current_date","current_month","current_year","correct_day_of_week","the_week","day_index","full_date","old_day","make_pretty_time","to_raw_time","hours","getHours","minutes","getMinutes","compare_date_standard","date1","date2","to_total_minutes_raw","time_str","time_arr","is_time_in_range","input_time","start_time","end_time","total_minutes_input","total_minutes_start","total_minutes_end","UserForm","setLocalUser","user_data","user_role","first_name","last_name","email","dateOfBirth","gender","streetHouseNr","city","postalCode","phone","country","salary","entryDate","daysOffCount","validationSchema","Yup","shape","form_signup","required","when","is","matches","positive","integer","typeError","default","password","min","otherwise","val","confirmPassword","oneOf","formOptions","resolver","yupResolver","useForm","register","handleSubmit","reset","errors","formState","onSubmit","raw","requestOptionsPatch","body","edited_user","alert","requestOptionsPost","update_user_by_id","type","value","disabled","defaultValue","message","placeholder","pattern","step","UserProfile","setUserData","user_id","useParams","fetch_user_profile","CalendarTopBar","current_week","currentUserDate","start_month","end_month","start_year","end_year","display_month_and_year","WeekController","update","CalendarTitle","day","index","HourLine","item_height","hour_line_positions","output","top_position","i","set_hour_line_postitions","top_pos","Fragment","close_custom_modal","modal_id","contains","open_custom_modal","add","CustomModal","title","main_content_id","has_footer","has_action_btn","action_function","has_close_btn","ShiftItem","local_userData","multiple_users","Array","isArray","shift","set_status_color","properties","top","colors","final_top","final_height","final_colors","set_properties","ShiftModalContent","multiple_data","EmployeeItem","worker","single_shift","shift_data","ReactDOM","render","SingleDayShifts","shifts","filtered_shifts","shift_date","week_date","day_of_week","final_shifts","time_ranges","all_shifts","new_time_range","includes","get_time_ranges","time_range","tempo_shifts","filtered_shift","filter_shifts","CalendarMainWrapper","calendar_height","time_of_day","minute_step","top_offset","hour","new_time","label","get_time_of_day_label","time","WeekCalendar","localstorage_date_raw","get_localstorage_current_date","userDate","setUserDate","userShifts","setUserShifts","fetch_shifts","url","request_options","days_step","neu","change_current_date","set_localstorage_current_date","Calendar","Wishlist","shiftData","setShiftData","delete_shift","requestOptionsDelete","sortingValue","setSortingValue","onChange","Table","striped","bordered","sorted_shift_data","sorted_shift_accepted","sorted_shift_pending","display_shifts","display_elements","sorted_shift","pending","accepted","el","Paycheck","user_salary","this_year","toString","this_month","month","month_salary","sorted_shift_done","shift_month","shift_year","this_shift","start_shift","end_shift","start","end","Timesheet","aria-labelledby","ShiftForm","employeeList","setEmployeeList","shift_time","job","all_employees","unshift","fetch_all_employees","check_if_days_off","worker_id","is_days_off","daysOff","input_date","daysoff","user_daysoff","update_shift_by_id","final_start_time","final_end_time","final_data","employee","ShiftDetails","shift_id","fetch_shift_details","DaysOffList","daysOffData","count","list","sorted_list","years","dates_list","date_str","get_years","filter_daysoff","delete_daysoff","raw_date","update_userData","year","y_index","data-parent","d_index","pretty_date","readOnly","class","AddDaysOff","from_date","to_date","create_daysoff","Daysoff","setuserData","new_data","QRCodeViewerPage","qrCodeURL","setqrCodeURL","QRCode","toDataURL","version","image_data","get_qr_code","QRCodeScannerPage","found_shift","update_status_code","update_shift_status","date_now","time_now","requestOptionsGet","user_shifts","user_shift","delay","onError","err","onScan","ShiftToday","fetch_shift_today","today_job","today_start","today_end","shift_status","shifts_today","shift_today","shift_1","shift_2","compare_dates","UpcomingShifts","NextShifts","upcomingShifts","max_shifts","today_obj","tempo_arr","sorted_tempo","hasOwnProperty","difference","max_loop","final_index","get_upcomming_shifts","Home","Main","authorized","exact","path","component","DaysOff","SignIn","has_token","removeItem","App"],"mappings":"6qBAAA,SAASA,EAAcC,GACnB,OAAOA,GAAmC,IAA5BC,OAAOC,KAAKF,GAAKG,QAAgBH,EAAII,cAAgBH,OAGvE,SAASI,IACL,OAAOC,KAAKC,MAAMC,aAAaC,QAAQ,aAG3C,SAASC,IACL,OAAOF,aAAaC,QAAQ,mBAGhC,SAASE,EAAuBC,GAC5BJ,aAAaK,QAAQ,WAAYP,KAAKQ,UAAUF,IAGpD,SAASG,EAAiBC,GACtB,MAAyB,YAAlBA,EAASC,KAGpB,SAASC,EAAaC,GAMlB,OALAA,EAAIC,MAAK,SAASC,EAAGC,GAGjB,OAFQ,IAAIC,KAAKF,EAAEG,MACX,IAAID,KAAKD,EAAEE,SAGhBL,E,iDCRIM,E,kDAfX,aAAe,IAAD,sBACV,eACA,IAAIC,EAAQ,IAAIH,KAChBC,EAAOE,EAAMC,UAAY,KAAOD,EAAME,WAAa,GAAK,IAAMF,EAAMG,cAH1D,OAKV,EAAKC,MAAQ,CACTC,YAAaP,GANP,E,0CAUd,WACI,OAAO,mBAAGQ,UAAU,aAAb,SAA4BC,KAAKH,MAAMC,kB,GAZ9BG,aCMTC,G,OAJI,SAAAC,GACf,OAAO,qBAAKJ,UAAU,aAAf,SAA6BI,EAAMC,aCQ/BC,G,cATC,SAAAF,GACd,OACE,sBAAKJ,UAAS,uBAAkBI,EAAMJ,WAAaO,MAAOH,EAAMG,MAAhE,UACI,mBAAGP,UAAU,eAAb,SAA6BI,EAAMI,OACnC,qBAAKR,UAAU,gBAAf,SAAgCI,EAAMK,YCiD/BC,EAnDI,SAACN,GAChB,IAAIO,EAAUC,cAGd,EAA4BC,qBAA5B,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAgCF,mBAAS,YAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAEMC,EAAc,WAChBC,SAASC,eAAe,cAAcC,UAAUC,OANxB,eAsB5B,OARAC,qBAAU,WACN,GAAI/C,aAAaC,QAAQ,YAAa,CAClC,IAAIO,EAAWV,KAAKC,MAAMC,aAAaC,QAAQ,aAC/CsC,EAAU/B,EAASwC,KACnBP,EAAYjC,EAASC,SAE1B,CAAC6B,EAAQE,IAGR,gCACI,qBAAKS,GAAG,aAAazB,UAAWI,EAAMsB,QAAUtB,EAAMuB,cAAgB,KAAtE,SACI,sBAAK3B,UAAU,oBAAf,UACI,cAAC,IAAD,CAAM4B,GAAE,iBAAYd,GAAUe,QAAS,WAAQX,IAAeY,OAAOC,SAASC,KAAhB,iBAA+BlB,IAA7F,SACI,cAAC,EAAD,CAASN,KAAM,mBAAGR,UAAU,oBAAwBS,KAAM,mBAE/C,YAAbO,EAAyB,cAAC,IAAD,CAAMY,GAAG,gBAAgBC,QAAS,WAAQX,IAAeY,OAAOC,SAASC,KAAK,iBAA9E,SACvB,cAAC,EAAD,CAASxB,KAAM,mBAAGR,UAAU,qBAAyBS,KAAM,kBAA0B,6BAC1E,YAAbO,EAAyB,cAAC,IAAD,CAAMY,GAAG,mBAAmBC,QAASX,EAArC,SACvB,cAAC,EAAD,CAASV,KAAM,mBAAGR,UAAU,iBAAqBS,KAAM,uBAA+B,6BAI1F,cAAC,IAAD,CAAMmB,GAAG,SAASC,QAASX,EAA3B,SACI,cAAC,EAAD,CAASV,KAAM,mBAAGR,UAAU,uBAA2BS,KAAM,YAEjE,cAAC,IAAD,CAAMmB,GAAG,UAAUC,QAAS,WAAQX,IA7BhD1C,aAAayD,QACbtB,EAAQuB,KAAK,YA4BD,SACI,cAAC,EAAD,CAAS1B,KAAM,mBAAGR,UAAU,wBAA4BS,KAAM,uBCIvE0B,G,MA5CG,SAAA/B,GACd,MAAgCS,mBAAS,YAAzC,mBAAOuB,EAAP,KAAiBC,EAAjB,KACA,EAA0CxB,oBAAS,GAAnD,mBAAOyB,EAAP,KAAsBC,EAAtB,KA0BA,OAjBAhB,qBAAU,WAWN,GAVAO,OAAOU,iBAAiB,WAAU,SAASC,GACvC,IAAIC,EAAavB,SAASC,eAAe,cACrCuB,EAASxB,SAASC,eAAe,cACjCwB,EAAWzB,SAASC,eAAe,gBACnCsB,GAAcD,EAAMI,SAAWH,GAAcD,EAAMI,OAAOC,aAAeJ,GACtED,EAAMI,SAAWF,GAAUF,EAAMI,SAAWD,GAC/CL,GAAiB,MAIrB/D,aAAaC,QAAQ,YAAa,CAClC,IAAIO,EAAWV,KAAKC,MAAMC,aAAaC,QAAQ,aAC/C4D,EAAYrD,EAAS+D,KAAO/D,EAAS+D,KAAzB,UAAmC/D,EAASgE,UAA5C,YAAyDhE,EAASiE,cAEnF,IAGC,mCACI,eAAC,EAAD,WACI,sBAAKjD,UAAU,sBAAf,UACI,cAAC,IAAD,CAAMyB,GAAG,aAAazB,UAAU,aAAa6B,QAAS,SAACqB,GAAD,OAAkBA,EAzB9EC,sBACNZ,GAAkBD,IAwBsEV,GAAG,IAA/E,SACI,mBAAGH,GAAG,eAAezB,UAAS,iCAA6BsC,EA7B7D,gBA6B2F,IAAOc,cAAY,WAEhH,sBAAMpD,UAAU,iBAAhB,SAAkCoC,OAEtC,cAAC,EAAD,OAEJ,cAAC,EAAD,CAAYV,QAASY,EAAeX,cApClB,oB,gBCHf0B,G,OAJI,SAAAjD,GACf,OAAO,wBAAQJ,UAAU,aAAlB,SAAgCI,EAAMC,aC2DlCiD,EApDG,SAAAlD,GACI/B,IAClB,OACI,eAAC,EAAD,WACI,cAACkF,EAAA,EAAD,CAAgBC,UAAU,MAAMC,QAAU,cAACC,EAAA,EAAD,CAASjC,GAAG,cAAZ,SAA0B,4CAApE,SACI,cAAC,IAAD,CAAMG,GAAG,IAAI+B,cAAY,UAAU3D,UAAU,UAA7C,SACI,8BAAK,mBAAGA,UAAU,4BAI1B,cAACuD,EAAA,EAAD,CAAgBC,UAAU,MAAMC,QAAU,cAACC,EAAA,EAAD,CAASjC,GAAG,cAAZ,SAA0B,gDAApE,SACI,cAAC,IAAD,CAAMG,GAAG,YAAY+B,cAAY,UAAU3D,UAAU,UAArD,SACI,8BAAK,mBAAGA,UAAU,8BAI1B,cAACuD,EAAA,EAAD,CAAgBC,UAAU,MAAMC,QAAU,cAACC,EAAA,EAAD,CAASjC,GAAG,cAAZ,SAA0B,iDAApE,SACI,cAAC,IAAD,CAAMG,GAAG,aAAa+B,cAAY,UAAU3D,UAAU,UAAtD,SACI,gCAAK,mBAAGA,UAAU,oBAAsB,mBAAGA,UAAU,kCAI7D,cAACuD,EAAA,EAAD,CAAgBC,UAAU,MAAMC,QAAU,cAACC,EAAA,EAAD,CAASjC,GAAG,cAAZ,SAA0B,gDAApE,SACI,cAAC,IAAD,CAAMG,GAAG,WAAW+B,cAAY,UAAU3D,UAAU,UAApD,SACI,8BAAK,mBAAGA,UAAU,gCAa1B,cAACuD,EAAA,EAAD,CAAgBC,UAAU,MAAMC,QAAU,cAACC,EAAA,EAAD,CAASjC,GAAG,cAAZ,SAA0B,+CAApE,SACI,cAAC,IAAD,CAAMG,GAAG,gBAAgB+B,cAAY,UAAU3D,UAAU,UAAzD,SACI,8BAAK,mBAAGA,UAAU,4BCnDhC4D,EAAS,SAACC,GACZ,IAAIC,EACJ,OAAQD,GACJ,IAAK,KACDC,EAAK,YACL,MACJ,IAAK,SACDA,EAAK,iBACL,MACJ,QACIA,EAAK,WAGb,OAAOA,GAGLD,EAAc,SCALE,G,cAZA,SAAA3D,GACb,OACE,qBAAKJ,UAAS,iBAAYI,EAAMJ,WAAaO,MAAOH,EAAMG,MAA1D,SACE,qBACEyD,IAAK5D,EAAM6D,MACXC,IAAK9D,EAAM8D,IACX3D,MAAO,CAAE4D,MAAO/D,EAAM+D,MAAOC,OAAQhE,EAAM+D,aCEpCE,G,OARF,SAAAjE,GACX,OACE,qBAAKJ,UAAS,eAAUI,EAAMJ,WAAaO,MAAOH,EAAMG,MAAxD,SACGH,EAAMC,aCuBEiE,G,OAxBE,SAAAlE,GACb,OACI,oBAAIJ,UAAU,WAAd,SACI,cAAC,EAAD,CAAMA,UAAU,cAAhB,SACI,eAAC,IAAD,CAAM4B,GAAE,iBAAYxB,EAAMqB,IAA1B,UACI,qBAAKzB,UAAU,YAAf,SACI,cAAC,EAAD,CAAQiE,MAAO7D,EAAM6D,MAAOC,IAAK9D,EAAM2C,SAE3C,sBAAK/C,UAAU,WAAf,UACI,mBAAGA,UAAU,eAAb,SAA6BI,EAAM2C,OACnC,sBAAK/C,UAAU,YAAf,UACI,4BAAII,EAAMnB,OACV,8BAAG,mBAAGe,UAAU,qBAAqBO,MAAO,CAACgE,MAAM,GAAD,OAAInE,EAAMmE,UAAc,sBAAMvE,UAAU,mBAAmBO,MAAO,CAACiE,WAAW,GAAD,OAAIpE,EAAMmE,QAA/D,8CCcvFE,EA3BG,SAAArE,GAEd,OAA2B,IAAvBA,EAAMsE,MAAMvG,OAER,cAAC,EAAD,UACI,mDAIL,oBAAI6B,UAAU,YAAd,SACFI,EAAMsE,MAAMC,KAAI,SAAAC,GAEb,GADsBtG,KAAKC,MAAMC,aAAaC,QAAQ,aAAa+C,MAC3CoD,EAAKpD,IACzB,OACI,cAAC,EAAD,CAEIC,GAAImD,EAAKpD,IACTyC,MAAOW,EAAKX,MACZlB,KAAM6B,EAAK7B,MAAL,UAAgB6B,EAAK5B,UAArB,YAAkC4B,EAAK3B,UAC7ChE,KAAM2F,EAAK3F,KACXsF,MAAOK,EAAKC,YALPD,EAAKpD,WCyBnBsD,EAxCD,WACV,MAA0BjE,mBAAS,IAAnC,mBAAOkE,EAAP,KAAcC,EAAd,KACA,EAAkCnE,mBAASxC,KAA3C,mBAAO4G,EAAP,KAAkBC,EAAlB,KAmCA,OAjCA3D,qBAAU,WACN,IAAM4D,EAAe,uCAAG,kCAAA9F,EAAA,2DAChB+F,EAAQ5G,aAAaC,QAAQ,oBADb,uBAGZ4G,EAAY,IAAIC,SACVC,OAAO,aAAcN,EAAUzD,IAAMyD,EAAUzD,IAAM,IAC/D6D,EAAUE,OAAO,gBAAjB,iBAA4CH,IAExCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAVE,SAcVC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,yBAAuD2B,GACjEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GACAf,EAASkB,EAAOnB,UAGvBoB,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAxBrB,2CAAH,qDA4BrBlB,EAAa7G,KACb8G,MACD,IAEI,cAAC,EAAD,CAAWT,MAAOK,KCbdwB,G,OA1BD,WACV,OACI,qBAAKvG,UAAU,aAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,qBAAKA,UAAU,gBAAf,2BAEA,sBAAKA,UAAU,eAAf,UACI,sBAAKA,UAAU,OAAf,UACI,qBAAKA,UAAU,OAAOgE,IAAG,UAAKwC,GAAL,8BACzB,sBAAMxG,UAAU,yBAAhB,4BAGJ,qBAAKA,UAAU,aAAf,SACI,sBAAMA,UAAU,YAAhB,4HAGJ,sBAAKA,UAAU,cAAf,UACI,wDACA,wBAAQA,UAAU,cAAc6B,QAAS,WAAQC,OAAOC,SAASC,KAAK,yBAAtE,kD,8BCpBlByE,EAAW,CACbC,aAAc,CAAC,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UACnFC,WAAY,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACvDC,iBAAkB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACvDC,OAAQ,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACvHC,aAAc,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC5FC,YAAa,IAQjB,SAASC,EAAYC,GACjB,IAAIC,EAAW,GACf,GAAID,EAAS,CACT,IAAIE,EAAW,IAAI5H,KAAK0H,GACpBG,EAAWD,EAAStH,cACpBwH,EAAYF,EAASvH,WAAa,EAAI,KAAOuH,EAASvH,WAAa,GAAKuH,EAASvH,WAAa,EAC9F0H,EAAUH,EAASxH,UAAY,GAAK,IAAMwH,EAASxH,UAAYwH,EAASxH,UAC5EuH,EAAQ,UAAME,EAAN,YAAkBC,EAAlB,YAA+BC,GAE3C,OAAOJ,EAIX,SAASK,EAAiBN,GACtB,IAAIC,EAAW,GACf,GAAID,EAAS,CACT,IAAIE,EAAW,IAAI5H,KAAK0H,GACpBG,EAAWD,EAAStH,cACpBwH,EAAYF,EAASvH,WAAa,EAAI,KAAOuH,EAASvH,WAAa,GAAKuH,EAASvH,WAAa,EAC9F0H,EAAUH,EAASxH,UAAY,GAAK,IAAMwH,EAASxH,UAAYwH,EAASxH,UAC5EuH,EAAQ,UAAMI,EAAN,YAAiBD,EAAjB,YAA8BD,GAE1C,OAAOF,EAIX,SAASM,EAAeP,GACpB,IAAIC,EAAW,GACf,GAAID,EAAS,CACT,IACII,EADW,IAAI9H,KAAK0H,GACCrH,WAAa,EACtCsH,EAAQ,UAAMG,GAElB,OAAOH,EAIX,SAASO,EAAcR,GACnB,IAAIC,EAAW,GACf,GAAID,EAAS,CACT,IACIG,EADW,IAAI7H,KAAK0H,GACApH,cACxBqH,EAAQ,UAAME,GAElB,OAAOF,EASX,SAASQ,EAAmBC,GACxB,IAAIC,EACJ,GAAID,EAAS,CACT,IACIE,EADWF,EAAQG,MAAM,KACL,GACxBF,EAAWG,SAASF,GAExB,OAAOD,EAYX,SAASI,EAAgBC,GACrB,IAAIC,EAAM,IAAI3I,KAAK0I,EAAGE,WAClBC,GAAQH,EAAGI,SAAW,GAAK,EAC/BH,EAAII,QAAQJ,EAAIvI,UAAYyI,EAAO,GACnC,IAAIG,EAAgBL,EAAIC,UAKxB,OAJAD,EAAIM,SAAS,EAAG,GACK,IAAjBN,EAAIG,UACJH,EAAIM,SAAS,EAAG,GAAM,EAAIN,EAAIG,SAAY,GAAK,GAE5C,EAAII,KAAKC,MAAMH,EAAgBL,GAAO,QAiBjD,SAASS,EAAgB1B,GACrB,IAAI2B,EAAc3B,EAAQoB,SACtBQ,EAAe5B,EAAQtH,UACvBmJ,EAAgB7B,EAAQrH,WACxBmJ,EAAe9B,EAAQpH,cAE3B+I,EAAcI,GAAoBJ,GAGlC,IADA,IAAIK,EAAW,GACNC,EAAY,EAAGA,EAAY,EAAGA,IAAa,CAChD,IAAI/B,OAAQ,EACZ,GAAI+B,EAAYN,EAEZzB,EAAW0B,GADHD,EAAcM,QAEnB,GAAIA,EAAYN,EAAa,CAEhCzB,EAAW0B,GADHK,EAAYN,QAGpBzB,EAAW0B,EAGf,IAAIM,EAAY,IAAI5J,KAAKwJ,EAAcD,EAAe3B,GACtD8B,EAASC,GAAaC,EAW1B,OAAOF,EAIX,SAASD,GAAoBI,GAEzB,OAD0B,IAAZA,EAAgB,EAAIA,EAAU,EAmBhD,SAASC,GAAiB1B,GACtB,OAAOA,EAAU,GAAK,IAAMA,EAAUA,EAI1C,SAAS2B,GAAY9J,GACjB,IAAI+J,EAAQF,GAAiB7J,EAAKgK,YAC9BC,EAAUJ,GAAiB7J,EAAKkK,cACpC,MAAM,GAAN,OAAUH,EAAV,YAAmBE,GAGvB,SAASE,GAAsBC,EAAOC,GAClC,OAAOD,EAAM/J,gBAAkBgK,EAAMhK,eAAiB+J,EAAMhK,aAAeiK,EAAMjK,YAAcgK,EAAMjK,YAAckK,EAAMlK,UAG7H,SAASmK,GAAqBC,GAC1B,IAAIC,EAAWD,EAASjC,MAAM,KAG9B,OAAe,GAFHC,SAASiC,EAAS,IACjBjC,SAASiC,EAAS,IAInC,SAASC,GAAiBC,EAAYC,EAAYC,GAC9C,IAAIC,EAAsBP,GAAqBI,GAC3CI,EAAsBR,GAAqBK,GAC3CI,EAAoBT,GAAqBM,GAE7C,OAAOC,GAAuBC,GAAuBD,GAAuBE,E,kBC2GjEC,GArSE,SAACpK,GAAW,IAAD,kCACxB,EAAkCS,mBAASxC,KAA3C,mBAAO4G,EAAP,KAAkBwF,EAAlB,KAGMC,EAAYtK,EAAMxB,KAClB+L,EAAYD,EAAUzL,KAAOyL,EAAUzL,KAAO,GAC9C2L,EAAaF,EAAU1H,UAAY0H,EAAU1H,UAAY,GACzD6H,EAAYH,EAAUzH,SAAWyH,EAAUzH,SAAW,GACtD6H,EAAQJ,EAAUI,MAAQJ,EAAUI,MAAQ,GAC5CC,EAAc/D,EAAY0D,EAAUK,aACpCC,EAASN,EAAUM,OAASN,EAAUM,OAAS,GAC/CC,EAAgBP,EAAUO,cAAgBP,EAAUO,cAAgB,GACpEC,EAAOR,EAAUQ,KAAOR,EAAUQ,KAAO,GACzCC,EAAaT,EAAUS,WAAaT,EAAUS,WAAa,GAC3DrL,EAAQ4K,EAAU5K,MAAQ4K,EAAU5K,MAAQ,GAC5CsL,EAAQV,EAAUU,MAAQV,EAAUU,MAAQ,GAC5CC,EAAUX,EAAUW,QAAUX,EAAUW,QAAU,GAClDC,EAASZ,EAAUY,OAASZ,EAAUY,OAAS,GAC/CC,EAAYvE,EAAY0D,EAAUa,WAClCC,EAAed,EAAUc,aAAed,EAAUc,aAAe,EAGjEC,EAAmBC,MAAaC,MAAM,CACxCC,YAAaF,MACb1I,UAAW0I,MACNG,SAAS,0BACd5I,SAAUyI,MACLG,SAAS,yBACdf,MAAOY,MACFG,SAAS,qBACTf,MAAM,oBACX7L,KAAMyM,MAAaI,KAAK,cAAe,CACnCC,GAAI,EACJlG,KAAM6F,MAAaG,SAAS,0BAEhCd,YAAaW,MACRG,SAAS,6BACTG,QAAQ,mDAAoD,+DACjEhB,OAAQU,MACHG,SAAS,sBACdT,MAAOM,MACFG,SAAS,qBACdZ,cAAeS,MACVG,SAAS,sBACdV,WAAYO,MAAaO,WAAWC,UAC/BL,SAAS,2BACTM,UAAU,yCACfjB,KAAMQ,MACDG,SAAS,oBACd/L,MAAO4L,MACFG,SAAS,qBACdR,QAASK,MACJG,SAAS,uBACdP,OAAQI,MAAaO,WAAWC,UAC3BL,SAAS,sBACTM,UAAU,yCACfZ,UAAWG,MAAaU,SAAQ,WACxB,OAAO,IAAI7M,QAEdyM,QAAQ,mDAAoD,4DAC5DH,SAAS,0BACdL,aAAcE,MAAaO,WAAWC,UACtCG,SAAUX,MAAaI,KAAK,cAAe,CACvCC,GAAI,EACJlG,KAAM6F,MAAaY,IAAI,EAAG,0CAA0CT,SAAS,wBAC7EU,UAAWb,MAAaI,KAAK,WAAY,CACrCC,GAAI,SAACS,GAAD,MAAiB,KAARA,GACb3G,KAAM6F,MAAaY,IAAI,EAAG,0CAC1BC,UAAWb,UAGnBe,gBAAiBf,MAAaI,KAAK,WAAY,CAC3CC,GAAI,SAACS,GAAD,MAAiB,KAARA,GACb3G,KAAM6F,MAAagB,MAAM,CAAChB,IAAQ,YAAa,MAAO,wBAAwBG,SAAS,gCACvFU,UAAWb,UAKbiB,GAAc,CAAEC,SAAUC,YAAYpB,IAG5C,GAAqDqB,YAAQH,IAArDI,GAAR,GAAQA,SAAUC,GAAlB,GAAkBA,aAAcC,GAAhC,GAAgCA,MACxBC,GADR,GAAuCC,UAC/BD,OA8ER,OACI,sBAAKlN,UAAU,sBAAf,UACMjC,EAAc2M,GAAa,sDAAgC,6BAC7D,uBAAM0C,SAAUJ,IA/EP,SAACpO,IACS,uCAAG,WAAOA,GAAP,2BAAAS,EAAA,2DAClB+F,EAAQ5G,aAAaC,QAAQ,oBADX,qBAGd4G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAC5CC,EAAUE,OAAO,eAAgB,oBAE7B8H,EAAM/O,KAAKQ,UAAUF,GAEpBb,EAAc2M,GATD,wBAUV4C,EAAsB,CACtB7H,OAAQ,QACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UAdA,UAkBRC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,uBAA6C6G,EAAUlJ,KAAO8L,GACxEzH,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IAGId,EAAUzD,MAAQ0E,EAAOsH,YAAYhM,KACrCiJ,EAAavE,EAAOsH,aACpB7O,EAAuBuH,EAAOsH,aAE9B1L,OAAOC,SAASC,KAAK,KAErBF,OAAOC,SAASC,KAAK,uBAKhCmE,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBAzCI,uCA4CVC,EAAqB,CACrBjI,OAAQ,OACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UAhDA,UAoDRC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,sBAAoD6J,GAC9D7H,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IACAM,QAAQC,IAAIJ,GACZuH,MAAM,6BAGbtH,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBAlEI,4CAAH,sDAwEvBE,CAAkB/O,MAMd,UACI,+CAAOmE,KAAK,cAAc6K,KAAK,UAAab,GAAS,gBAArD,IAAqEc,MAAO9P,EAAcqC,EAAMxB,MAAQ,EAAI,KAC5G,uBAAOmE,KAAK,kBAAkB6K,KAAK,SAASC,MAAO5I,EAAUzD,IAAMyD,EAAUzD,KAAO,IAEpF,gCACI,6CACA,iDACIuB,KAAK,QACDgK,GAAS,SAFjB,IAGI/M,UAAS,uBAAkBkN,GAAOjO,KAAO,aAAd,IAC3B6O,SAA6B,YAAnB7I,EAAUhG,KACpB8O,aAAcpD,EALlB,UAOI,wBAAQkD,MAAM,GAAd,gCACA,wBAAQA,MAAM,WAAd,sBACA,wBAAQA,MAAM,UAAd,yBAEJ,qBAAK7N,UAAU,mBAAf,mBAAmCkN,GAAOjO,YAA1C,aAAmC,EAAa+O,aAEpD,gCACI,+CACA,+CAAOjL,KAAK,YAAY6K,KAAK,QAAWb,GAAS,cAAjD,IAA+D/M,UAAS,uBAAkBkN,GAAOlK,UAAY,aAAe,IAAM+K,aAAcnD,KAChJ,qBAAK5K,UAAU,mBAAf,mBAAmCkN,GAAOlK,iBAA1C,aAAmC,EAAkBgL,aAEzD,gCACI,8CACA,+CAAOjL,KAAK,WAAW6K,KAAK,QAAWb,GAAS,aAAhD,IAA6D/M,UAAS,uBAAkBkN,GAAOjK,SAAW,aAAe,IAAM8K,aAAclD,KAC7I,qBAAK7K,UAAU,mBAAf,mBAAmCkN,GAAOjK,gBAA1C,aAAmC,EAAiB+K,aAExD,gCACI,0CACA,+CAAOjL,KAAK,QAAQ6K,KAAK,OAAOK,YAAY,qBAAwBlB,GAAS,UAA7E,IAAuF/M,UAAS,uBAAkBkN,GAAOpC,MAAQ,aAAe,IAAMiD,aAAcjD,KACpK,qBAAK9K,UAAU,mBAAf,mBAAmCkN,GAAOpC,aAA1C,aAAmC,EAAckD,aAErD,sBAAKhO,UAAU,aAAf,UACI,gCACI,kDACA,+CAAO+C,KAAK,cAAc6K,KAAK,QAAWb,GAAS,gBAAnD,IAAmE/M,UAAS,uBAAkBkN,GAAOnC,YAAc,aAAe,IAAMgD,aAAchD,KACtJ,qBAAK/K,UAAU,mBAAf,mBAAmCkN,GAAOnC,mBAA1C,aAAmC,EAAoBiD,aAE3D,gCACI,2CACA,iDAAQjL,KAAK,UAAagK,GAAS,WAAnC,IAA8C/M,UAAS,uBAAkBkN,GAAOlC,OAAS,aAAe,IAAM+C,aAAc/C,EAA5H,UACI,wBAAQ6C,MAAM,KACd,wBAAQA,MAAM,SAAd,oBACA,wBAAQA,MAAM,OAAd,kBACA,wBAAQA,MAAM,QAAd,uBAEJ,qBAAK7N,UAAU,mBAAf,mBAAmCkN,GAAOlC,cAA1C,aAAmC,EAAegD,gBAG1D,gCACI,0CACA,+CAAOjL,KAAK,QAAQ6K,KAAK,MAAMK,YAAY,kBAAkBC,QAAQ,uBAA0BnB,GAAS,UAAxG,IAAkH/M,UAAS,uBAAkBkN,GAAO9B,MAAQ,aAAe,IAAO2C,aAAc3C,KAChM,qBAAKpL,UAAU,mBAAf,mBAAmCkN,GAAO9B,aAA1C,aAAmC,EAAc4C,aAErD,uCACA,gCACI,yDACA,+CAAOjL,KAAK,gBAAgB6K,KAAK,QAAWb,GAAS,kBAArD,IAAuE/M,UAAS,uBAAkBkN,GAAOjC,cAAgB,aAAe,IAAM8C,aAAc9C,KAC5J,qBAAKjL,UAAU,mBAAf,mBAAmCkN,GAAOjC,qBAA1C,aAAmC,EAAsB+C,aAE7D,sBAAKhO,UAAU,aAAf,UACI,gCACI,yCACA,+CAAO+C,KAAK,OAAO6K,KAAK,QAAWb,GAAS,SAA5C,IAAqD/M,UAAS,uBAAkBkN,GAAOhC,KAAO,aAAe,IAAM6C,aAAc7C,KACjI,qBAAKlL,UAAU,mBAAf,mBAAmCkN,GAAOhC,YAA1C,aAAmC,EAAa8C,aAEpD,gCACI,gDACA,+CAAOjL,KAAK,aAAa6K,KAAK,QAAWb,GAAS,eAAlD,IAAiE/M,UAAS,uBAAkBkN,GAAO/B,WAAa,aAAe,IAAM4C,aAAc5C,KACnJ,qBAAKnL,UAAU,mBAAf,mBAAmCkN,GAAO/B,kBAA1C,aAAmC,EAAmB6C,aAE1D,gCACI,0CACA,+CAAOjL,KAAK,QAAQ6K,KAAK,QAAWb,GAAS,UAA7C,IAAuD/M,UAAS,uBAAkBkN,GAAOpN,MAAQ,aAAe,IAAMiO,aAAcjO,KACpI,qBAAKE,UAAU,mBAAf,mBAAmCkN,GAAOpN,aAA1C,aAAmC,EAAckO,aAErD,gCACI,4CACA,+CAAOjL,KAAK,UAAU6K,KAAK,QAAWb,GAAS,YAA/C,IAA2D/M,UAAS,uBAAkBkN,GAAO7B,QAAU,aAAe,IAAM0C,aAAc1C,KAC1I,qBAAKrL,UAAU,mBAAf,mBAAmCkN,GAAO7B,eAA1C,aAAmC,EAAgB2C,gBAG3D,sBAAKhO,UAAU,aAAf,UACI,gCACI,2CACA,+CAAO+C,KAAK,SAAS6K,KAAK,SAAStB,IAAI,KAAQS,GAAS,WAAxD,IAAmE/M,UAAS,uBAAkBkN,GAAO5B,OAAS,aAAe,IAAMyC,aAAczC,KACjJ,qBAAKtL,UAAU,mBAAf,mBAAmCkN,GAAO5B,cAA1C,aAAmC,EAAe0C,aAEtD,gCACI,6CACA,+CAAOjL,KAAK,eAAe6K,KAAK,SAAStB,IAAK,EAAG6B,KAAM,GAAOpB,GAAS,iBAAvE,IAAwF/M,UAAS,uBAAkBkN,GAAO1B,aAAe,aAAe,IAAOuC,aAAcvC,KAC7K,qBAAKxL,UAAU,mBAAf,mBAAmCkN,GAAO1B,oBAA1C,aAAmC,EAAqBwC,gBAGhE,gCACI,+CACA,+CAAOjL,KAAK,YAAY6K,KAAK,QAAWb,GAAS,cAAjD,IAA+D/M,UAAS,uBAAkBkN,GAAO3B,UAAY,aAAe,IAAMwC,aAAcxC,KAChJ,qBAAKvL,UAAU,mBAAf,mBAAmCkN,GAAO3B,iBAA1C,aAAmC,EAAkByC,aAEzD,sBAAKhO,UAAYiF,EAAUzD,MAAQkJ,EAAUlJ,KAAOzD,EAAc2M,GAAa,GAAK,SAApF,UACI,6CACA,+CAAO3H,KAAK,WAAW6K,KAAK,YAAeb,GAAS,aAApD,IAAiE/M,UAAS,uBAAkBkN,GAAOb,SAAW,aAAe,OAC7H,qBAAKrM,UAAU,mBAAf,mBAAmCkN,GAAOb,gBAA1C,aAAmC,EAAiB2B,aAExD,sBAAKhO,UAAYiF,EAAUzD,MAAQkJ,EAAUlJ,KAAOzD,EAAc2M,GAAa,GAAK,SAApF,UACI,qDACA,+CAAO3H,KAAK,kBAAkB6K,KAAK,YAAeb,GAAS,oBAA3D,IAA+E/M,UAAS,uBAAkBkN,GAAOT,gBAAkB,aAAe,OAClJ,qBAAKzM,UAAU,mBAAf,mBAAmCkN,GAAOT,uBAA1C,aAAmC,EAAwBuB,aAW/D,gCACI,wBAAQJ,KAAK,SAAS5N,UAAU,mBAAhC,mBACA,wBAAQ4N,KAAK,SAAS/L,QAAS,kBAAMoL,MAASjN,UAAU,oBAAxD,6BCpPLoO,GA9CK,SAAChO,GACjB,MAAgCS,qBAAhC,mBAAO7B,EAAP,KAAiBqP,EAAjB,KACIC,EAAUC,cAAY9M,GAmC1B,OAjCAF,qBAAU,YACkB,uCAAG,kCAAAlC,EAAA,yDACnB+F,EAAQ5G,aAAaC,QAAQ,mBAC5BO,IAAYoG,GAAqB,WAAZkJ,EAFH,uBAGfjJ,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UARK,SAYbC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,uBAA6CyK,GAAW9I,GAClEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GAEAsI,EAAYnI,EAAOwE,cAG1BvE,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAvBlB,8BAyBnBiI,EAAY,IAzBO,4CAAH,qDA6BxBG,KACD,IAGC,mCACMxP,EACE,cAAC,GAAD,CAAUJ,KAAMI,IAAe,gCCjBhCyP,GA3BQ,SAACrO,GACpB,IAAMsO,EAAe/F,EAAgBvI,EAAMuO,iBAqB3C,OACI,oBAAI3O,UAAU,mBAAd,SAnB2B,WAC3B,IAAI4O,EAAcF,EAAa,GAAG9O,WAC9BiP,EAAYH,EAAaA,EAAavQ,OAAS,GAAGyB,WAClDkP,EAAaJ,EAAa,GAAG7O,cAC7BkP,EAAWL,EAAaA,EAAavQ,OAAS,GAAG0B,cAWrD,OARI+O,IAAgBC,EACV,UAAMpI,EAASK,aAAa8H,GAA5B,YAA4CE,GAC3CA,IAAeC,EAChB,UAAMtI,EAASK,aAAa8H,GAA5B,cAA8CnI,EAASK,aAAa+H,GAApE,YAAkFC,GAElF,UAAMrI,EAASK,aAAa8H,GAA5B,YAA4CE,EAA5C,cAA4DrI,EAASK,aAAa+H,GAAlF,YAAgGE,GAOxEC,MCD3BC,GAtBQ,SAAC7O,GASpB,OACI,sBAAKJ,UAAU,sBAAf,UACI,wBAAQA,UAAU,iCAAiC6B,QAVrC,WAClBzB,EAAM8O,QAAQ,IASV,SACI,mBAAGlP,UAAU,8BAEjB,uBAAMA,UAAU,aAAhB,kBAAmCgI,EAAgB5H,EAAMuO,oBACzD,wBAAQ3O,UAAU,iCAAiC6B,QAVzC,WACdzB,EAAM8O,OAAO,IAST,SACI,mBAAGlP,UAAU,mCCIdmP,GApBO,SAAC/O,GACnB,IAAMsO,EAAe/F,EAAgBvI,EAAMuO,iBAE3C,OACI,qCACI,qBAAK3O,UAAU,uBACf,qBAAKA,UAAU,qBAAf,SACM0O,EAAa/J,KAAI,SAACyK,EAAKC,GACrB,OACI,sBAAKrP,UAAU,2BAAf,UACI,+BAAOyG,EAASG,iBAAiBoC,GAAoBoG,EAAI/G,aACzD,+BAAO+G,EAAIzP,cAFf,oBAA4D0P,aCkBrEC,GA5BE,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YAYVC,EAX2B,WAI7B,IAHA,IAAIC,EAAS,GAETC,EAAe,EACVC,EAAI,EAAGA,EAAI,GAAIA,IACpBF,EAAOvN,KAAKwN,GACZA,GAAgBH,EAGpB,OAAOE,EAEiBG,GAE5B,OACI,mCAEQJ,EAAoB7K,KAAI,SAACkL,EAASR,GAC9B,OAAgB,IAAZQ,EAAsB,cAAC,IAAMC,SAAP,uBAAkCT,IAExD,qBAAKrP,UAAU,YAAYO,MAAO,CAAE,IAAM,GAAN,OAAUsP,EAAV,QAApC,oBAA+ER,U,OCnBvG,SAASU,GAAmBC,GACpB7O,SAASC,eAAe4O,GAAU3O,UAAU4O,SAAS,WACrD9O,SAASC,eAAe4O,GAAU3O,UAAUC,OAAO,UAI3D,SAAS4O,GAAkBF,GAClB7O,SAASC,eAAe4O,GAAU3O,UAAU4O,SAAS,WACtD9O,SAASC,eAAe4O,GAAU3O,UAAU8O,IAAI,UAIxD,IAAMC,GAAc,SAAChQ,GACjB,OACI,qBAAKqB,GAAIrB,EAAMqB,GAAIzB,UAAU,eAA7B,SACI,sBAAKA,UAAU,+BAAf,UACI,sBAAKA,UAAU,sBAAf,UACI,qBAAKA,UAAU,QAAf,SAAwBI,EAAMiQ,QAC9B,qBAAKrQ,UAAU,YAAf,SACI,wBAAQ6B,QAAS,WAAQkO,GAAmB3P,EAAMqB,KAAlD,SAAyD,mBAAGzB,UAAU,uBAG9E,qBAAKA,UAAU,uBAAf,SACI,qBAAKyB,GAAIrB,EAAMkQ,gBAAiBtQ,UAAU,eAA1C,SACKI,EAAMC,aAIXD,EAAMmQ,WACN,sBAAKvQ,UAAU,sBAAf,UACI,qBAAKA,UAAU,WACf,sBAAKA,UAAU,UAAf,UACMI,EAAMoQ,eAAiB,wBAAQxQ,UAAU,kBAAkB6B,QAAS,WAAQkO,GAAmB3P,EAAMqB,IAAKrB,EAAMqQ,mBAAzF,mBAA+H,6BACtJrQ,EAAMsQ,cAAgB,wBAAQ1Q,UAAU,oBAAoB6B,QAAS,WAAQkO,GAAmB3P,EAAMqB,KAAhF,mBAAwG,mCAE/H,mCCyGdkP,GAzIG,SAACvQ,GACf,IAAMwQ,EAAiBvS,IACjBwS,EAAiBC,MAAMC,QAAQ3Q,EAAM4Q,OAErCC,EAAmB,SAACjL,GACtB,IAAIyJ,EACJ,OAAQzJ,GACJ,IAAK,OACDyJ,EAAS,UACT,MACJ,IAAK,WACDA,EAAS,UACT,MACJ,QACIA,EAAS,UAGjB,OAAOA,GAkCLyB,EA/BiB,WACnB,IAAIzB,EAAS,CACT0B,IAAK,EACL/M,OAAQ,EACRgN,OAAQ,IAGRjH,EAAa0G,EAAiBzQ,EAAM4Q,MAAM,GAAG7G,WAAWrC,MAAM,KAAO1H,EAAM4Q,MAAM7G,WAAWrC,MAAM,KAClGsC,EAAWyG,EAAiBzQ,EAAM4Q,MAAM,GAAG5G,SAAStC,MAAM,KAAO1H,EAAM4Q,MAAM5G,SAAStC,MAAM,KAC5FuJ,GAAatJ,SAASoC,EAAW,IAAM,GAAKpC,SAASoC,EAAW,KAAO/J,EAAMmP,YAC7E+B,GAAiBvJ,SAASqC,EAAS,IAAM,GAAKrC,SAASqC,EAAS,KAAOhK,EAAMmP,YAAe8B,EAE5FE,EAAe,GACnB,GAAKV,EAME,CAAC,IAAD,gBACiBzQ,EAAM4Q,OADvB,IACH,2BAAiC,CAAC,IAAvBA,EAAsB,QAC7BO,EAAarP,KAAK+O,EAAiBD,EAAMhL,UAF1C,oCADHuL,EAAarP,KAAK+O,EAAiB7Q,EAAM4Q,MAAMhL,SAWnD,OAJAyJ,EAAO0B,IAAME,EACb5B,EAAOrL,OAASkN,EAChB7B,EAAO2B,OAASG,EAET9B,EAEQ+B,GAEbC,EAAoB,SAACrR,GACvB,IAAMsR,EAAgBZ,MAAMC,QAAQ3Q,EAAMxB,MAEpC+S,EAAe,SAACvR,GAElB,OACI,oBACI4B,KAA4B,SAAtB5B,EAAMxB,KAAKoH,OAAX,kBAA0C5F,EAAMxB,KAAK4C,KAAQ,IACnExB,UAAS,iEAA4DiR,EAAiB7Q,EAAMxB,KAAKoH,SAFrG,UAII,gCACI,+BAEQjH,EAAiB6R,GAAjB,UACGxQ,EAAMxB,KAAKgT,OAAO5O,UADrB,YACkC5C,EAAMxB,KAAKgT,OAAO3O,UAClD,WAGV,+BAAO7C,EAAMxB,KAAKoH,YAEE,SAAtB5F,EAAMxB,KAAKoH,OAAoB,mBAAGhG,UAAU,iBAAsB,iCAKhF,OACI,qCACI,uBAAOA,UAAU,qDAAjB,SACI,kCACI,+BACI,sCACA,6BAAsBuH,EAAhBmK,EAAiCtR,EAAMxB,KAAK,GAAGY,KAAyBY,EAAMxB,KAAKY,WAE7F,+BACI,+CACA,6BAAMkS,EAAgBtR,EAAMxB,KAAK,GAAGuL,WAAa/J,EAAMxB,KAAKuL,gBAEhE,+BACI,6CACA,6BAAMuH,EAAgBtR,EAAMxB,KAAK,GAAGwL,SAAWhK,EAAMxB,KAAKwL,mBAKtE,qBAAIpK,UAAU,YAAd,UAA0B,mBAAGA,UAAU,eAAvC,kBACA,qBAAKA,UAAU,2BAAf,SAEQ0R,EACAtR,EAAMxB,KAAK+F,KAAI,SAACkN,EAAcxC,GAC1B,OACI,cAACsC,EAAD,CAAc/S,KAAMiT,GAApB,0BAA0DxC,OAIlE,cAACsC,EAAD,CAAc/S,KAAMwB,EAAMxB,aAa9C,OACI,qBACIoB,UAAS,qBAAgB6Q,EAAiB,sBAAwB,GAAzD,mBACTtQ,MAAO,CAAE,IAAO2Q,EAAWC,IAAK,OAAUD,EAAW9M,QACrDvC,QAAS,WAVG,IAACiQ,IAUgB1R,EAAM4Q,MARvCe,IAASC,OAAO,cAACP,EAAD,CAAmB7S,KAAMkT,IAAgB3Q,SAASC,eAAe,6BACjF8O,GAAkB,qBAIlB,SAMQW,EACAK,EAAWE,OAAOzM,KAAI,SAACJ,EAAO8K,GAC1B,OAAQ,mBAAGrP,UAAS,0BAAqBuE,IAAjC,qBAA6D8K,OAEvE,mBAAGrP,UAAS,0BAAqBkR,EAAWE,OAAO,SCxEtDa,GA7DS,SAAC7R,GACrB,IA4CM8R,EAnCgB,WAClB,IADwB,EACpBC,EAAkB,GADE,cAEJ/R,EAAM8R,QAFF,IAExB,2BAAkC,CAAC,IAAD,EAAvBlB,EAAuB,QAC1BoB,EAAa,IAAI7S,KAAKyR,EAAMxR,MADF,cAENY,EAAMsO,cAFA,IAE9B,2BAA4C,CAAC,IAAlC2D,EAAiC,QACpCC,EAActJ,GAAoBqJ,EAAUhK,UAEhD,GAAIsB,GAAsByI,EAAYC,IAAcC,IAAgBlS,EAAMwI,YAAa,CACnFuJ,EAAgBjQ,KAAK8O,GACrB,QAPsB,gCAFV,8BAexB,IAfwB,EAepBuB,EAAe,GACfC,EAzBgB,SAACC,GACrB,IADoC,EAChCD,EAAc,GADkB,cAEhBC,GAFgB,IAEpC,2BAAgC,CAAC,IAAtBzB,EAAqB,QACxB0B,EAAc,UAAM1B,EAAM7G,WAAZ,YAA0B6G,EAAM5G,UAC7CoI,EAAYG,SAASD,IAAiBF,EAAYtQ,KAAKwQ,IAJ5B,8BAMpC,OAAOF,EAmBWI,CAAgBT,GAhBV,cAiBCK,GAjBD,IAiBxB,2BAAsC,CAAC,IAAD,EAA3BK,EAA2B,QAC9BC,EAAe,GADe,cAELX,GAFK,IAElC,2BAA8C,CAAC,IAApCY,EAAmC,QAEtCF,IADgB,UAAME,EAAe5I,WAArB,YAAmC4I,EAAe3I,WACjC0I,EAAa5Q,KAAK6Q,IAJzB,8BAON,IAAxBD,EAAa3U,OACboU,EAAarQ,KAAK4Q,EAAa,IACxBA,EAAa3U,OAAS,GAC7BoU,EAAarQ,KAAK4Q,IA3BF,8BAgCxB,OAAOP,EAGIS,GACf,OACI,mCAEQd,EAAO/T,OAAS,EAChB+T,EAAOvN,KAAI,SAACqM,EAAO3B,GACf,OACI,cAAC,GAAD,CAAuC2B,MAAOA,EAAOzB,YAAanP,EAAMmP,aAAxE,qBAA8BF,OAGpC,gCCbH4D,GAzCa,SAAC7S,GACzB,IACMmP,EAAqC,GAAvB9I,EAASM,YACvBmM,EAAgC,GAAd3D,EAClB4D,EVkJV,SAA+BC,EAAajC,EAAKkC,GAK7C,IAJA,IAAI5D,EAAS,GAETC,EAAe2D,GAAc,EAExBC,EAAO,EAAGA,EAAO,GAAIA,IAAQ,CAClC,IAAIC,EAAWlK,GAAiBiK,GAC5BnC,IAAKoC,EAAW,CAAEC,MAAOD,EAAUpC,IAAKzB,EAAe,OAC3DD,EAAOvN,KAAKqR,GACRD,EAAO,IAAG5D,GAAgB0D,GAGlC,OAAO3D,EU9JagE,CAAsBlE,GAAa,EAAMA,EAAc,EAHvD,KAIdb,EAAe/F,EAAgBvI,EAAMuO,iBAE3C,OACI,sBAAK3O,UAAU,wBAAf,UACI,qBAAKA,UAAU,cAAcO,MAAO,CAAE,OAAS,GAAT,OAAa2S,EAAb,OAAtC,SAGQC,EAAYxO,KAAI,SAAC+O,EAAMrE,GACnB,OAAc,IAAVA,EAAoB,cAAC,IAAMS,SAAP,wBAAmCT,IAEvD,qBAAKrP,UAAU,cAAcO,MAAO,CAAE,IAAOmT,EAAKvC,KAAlD,SACKuC,EAAKF,OADV,qBAA4EnE,SAQ5F,sBAAKrP,UAAU,eAAf,UACI,cAAC,GAAD,CAAUuP,YAAaA,IACvB,qBAAKvP,UAAU,uBAAf,SAEQyG,EAASG,iBAAiBjC,KAAI,SAACyK,EAAKC,GAChC,OACI,qBAAKrP,UAAU,qBAAf,SACI,cAAC,GAAD,CAAiB0O,aAAcA,EAAc9F,YAAayG,EAAO6C,OAAQ9R,EAAM8R,OAAQ3C,YAAaA,KADxG,sBAAwDF,gBCiDxEsE,I,OAxEK,WACjB,MAAgC9S,mBX4LpC,WACI,IAAI+S,EAAwBpV,aAAaC,QAAQ,gBACjD,GAAImV,EACA,OAAO,IAAIrU,KAAKqU,GAEhB,IAAIlU,EAAQ,IAAIH,KAEhB,OADAf,aAAaK,QAAQ,eAAgBa,GAC9BA,EWnM8BmU,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAoClT,mBAAS,IAA7C,mBAAOmT,EAAP,KAAmBC,EAAnB,KAQMC,EAAY,uCAAG,WAAOC,EAAKC,GAAZ,eAAA/U,EAAA,sEAEXuG,MAAMuO,EAAKC,GAChBvO,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GAEAkO,EAAc/N,EAAOgM,WAG5B/L,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAbpB,2CAAH,wDAoClB,OApBA7E,qBAAU,WACN,IAAI6D,EAAQ5G,aAAaC,QAAQ,mBAC7BO,EAAWV,KAAKC,MAAMC,aAAaC,QAAQ,aAC/C,GAAI2G,GAASpG,EAAU,CACnB,IAAIqG,EAAY,IAAIC,QACpBD,EAAUE,OAAO,gBAAjB,iBAA4CH,IAC5C,IAAII,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAGQ,YAAlB3G,EAASC,KACTiV,EAAa,UAAD,OAAWtQ,EAAOC,GAAlB,gBAA8C2B,GAE1D0O,EAAa,UAAD,OAAWtQ,EAAOC,GAAlB,wBAA8C7E,EAASwC,KAAOgE,MAGnF,CAACsO,IAGA,sBAAK9T,UAAU,gBAAf,UACI,sBAAKA,UAAU,mBAAf,UACI,cAAC,GAAD,CAAgB2O,gBAAiBmF,IACjC,cAAC,GAAD,CAAgB5E,OA9CR,SAACmF,GACjB,IAAIlN,EXoFZ,SAA6BF,EAASkH,GAElC,IACImG,EADMrN,EAAQtH,UACFwO,EAChB,OAAO,IAAI5O,KAAK0H,EAAQpH,cAAeoH,EAAQrH,WAAY0U,GWxFxCC,CAAoBT,EAAUO,IXmMrD,SAAuClN,GACnC3I,aAAaK,QAAQ,eAAgBsI,GWnMjCqN,CAA8BrN,GAC9B4M,EAAY5M,IA2CiCwH,gBAAiBmF,IACtD,sBAAK9T,UAAU,yBAAf,UACI,cAAC,GAAD,CAAe2O,gBAAiBmF,IAChC,cAAC,GAAD,CAAqBnF,gBAAiBmF,EAAU5B,OAAQ8B,OAE5D,qBAAKhU,UAAU,uBAAf,SACI,yBAAQA,UAAU,cAAc6B,QAAS,WAAQC,OAAOC,SAASC,KAAhB,kBAAjD,UACI,mBAAGhC,UAAU,oBAAsB,8DAI/C,cAAC,GAAD,CACIyB,GAAG,mBACH6O,gBAAgB,2BAChBD,MAAM,gBACNK,eAAe,EACfF,gBAAgB,SCrEjBiE,GAJE,WACb,OAAO,cAAC,GAAD,K,kBCqKIC,I,OA/JE,WACb,MAAkC7T,mBAAS,IAA3C,mBAAO8T,EAAP,KAAkBC,EAAlB,KAEMtG,EADYjQ,IACQmD,IAE1BD,qBAAU,YACY,uCAAG,kCAAAlC,EAAA,6DACb+F,EAAQ5G,aAAaC,QAAQ,oBAC7B4G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAPG,SAWXC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8CyK,GAAW9I,GACnEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GACA6O,EAAa1O,EAAOgM,WAG3B/L,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MArBpB,2CAAH,qDAuBlB8N,KAED,IAEH,IAAMW,EAAY,uCAAG,WAAOzU,GAAP,qBAAAf,EAAA,2DACb+F,EAAQ1G,KADK,uBAGT2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAExC0P,EAAuB,CACvBrP,OAAQ,SACRC,QAASL,EACTM,SAAU,UATD,SAaPC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,+BAAqDzD,GAAS0U,GACxEjP,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IACAM,QAAQC,IAAIJ,GACZuH,MAAM,yBACa,UAAfrN,EAAMwN,KAEN9L,OAAOC,SAASC,KAAK,YAErBF,OAAOC,SAASC,KAAK,iBAKhCmE,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBAjCG,2CAAH,sDAuCVV,EAAaD,cAAbC,SAER,EAAwClM,mBAAS,WAAjD,mBAAOkU,EAAP,KAAqBC,EAArB,KAqDA,OAAO,sBAAKhV,UAAU,mBAAf,UACH,sBAAKA,UAAU,sBAAf,UACI,yBAAQA,UAAU,gCAAgC6B,QAAS,WAAQC,OAAOC,SAASC,KAAK,kBAAxF,UACI,mBAAGhC,UAAU,oBAAsB,0CAEvC,uBAAMA,UAAU,UAAhB,UACI,+CACA,iDAAQ+C,KAAK,aAAgBgK,EAAS,cAAtC,IAAoDgB,aAAc,UAAWkH,SA1DpE,SAAC/R,GAClB8R,EAAgB9R,EAAEL,OAAOgL,QAyDjB,UACI,wBAAQA,MAAM,UAAd,kBACA,wBAAQA,MAAM,YAAd,8BAIZ,qBAAK7N,UAAU,iBAAf,SACI,eAACkV,GAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAAvB,UACI,gCACI,+BACI,sCACA,uCACA,qCACA,wCACA,8CAGR,gCAvEW,WACnB,IAAMC,EAAoBnW,EAAayV,GACnCW,EAAwB,GACxBC,EAAuB,GACvBC,EAAiB,GACjBC,EAAmB,GAEvB,GAAqB,YAAjBV,EAA4B,CAAC,IAAD,gBACDM,GADC,IAC5B,2BAA8C,CAAC,IAApCK,EAAmC,QACd,aAAxBA,EAAa1P,QAAiD,YAAxB0P,EAAa1P,QACnDwP,EAAetT,KAAKwT,IAHA,oCAMzB,GAAqB,cAAjBX,EAA8B,CAAC,IAAD,gBACVM,GADU,IACrC,2BAA8C,CAAC,IAApCK,EAAmC,QACd,YAAxBA,EAAa1P,QACbuP,EAAqBrT,KAAKwT,GAEF,aAAxBA,EAAa1P,QACbsP,EAAsBpT,KAAKwT,IANE,kDASfH,GATe,IASrC,2BAA4C,CAAC,IAAlCI,EAAiC,QACxCH,EAAetT,KAAKyT,IAVa,kDAYdL,GAZc,IAYrC,2BAA8C,CAAC,IAApCM,EAAmC,QAC1CJ,EAAetT,KAAK0T,IAba,+BAiBzC,IA9ByB,iBA8BpB,IAAM5E,EAAK,KACR6E,EAAK,+BACL,6BAAKtO,EAAiByJ,EAAMxR,QAC5B,6BAAKwR,EAAM7G,aACX,6BAAK6G,EAAM5G,WACX,6BAAI,sBAAMpK,UAAS,2BAAwC,aAAjBgR,EAAMhL,OAAyB,gBAAkB,iBAAvF,SAA2GgL,EAAMhL,WACrH,oBAAIhG,UAAU,mBAAd,SAAoD,YAAjBgR,EAAMhL,OACrC,sBAAKhG,UAAU,mBAAf,UACI,wBAAQ6B,QAAS,WAAQgT,EAAa,GAAD,OAAI7D,EAAMxP,OAA/C,SAAyD,mBAAGxB,UAAU,uBACtE,cAAC,IAAD,CAAM4B,GAAE,kBAAaoP,EAAMxP,KAA3B,SAAkC,mBAAGxB,UAAU,qBAC1C,wBAAQ6B,QAAS,WAAQgT,EAAa,GAAD,OAAI7D,EAAMxP,OAA/C,SAAyD,mBAAGxB,UAAU,2BATrEgR,EAAMxP,KAYxBiU,EAAiBvT,KAAK2T,IAb1B,MAAoBL,EAApB,eAAqC,IAcnC,OAAOC,EA4BID,eChCNM,I,OA1HE,WACb,MAAkCjV,mBAAS,IAA3C,mBAAO8T,EAAP,KAAkBC,EAAlB,KACM3P,EAAY5G,IACZiQ,EAAUrJ,EAAUzD,IACpBuU,EAAc9Q,EAAUqG,OAGxB0K,GAAY,IAAIzW,MAAOM,cAAcoW,WACrCC,GAAa,IAAI3W,MAAOK,WAE9B2B,qBAAU,YACY,uCAAG,kCAAAlC,EAAA,6DACb+F,EAAQ5G,aAAaC,QAAQ,oBAC7B4G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAPG,SAWXC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8CyK,GAAW9I,GACnEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GACA6O,EAAa1O,EAAOgM,WAG3B/L,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MArBpB,2CAAH,qDAuBlB8N,KAED,IAEH,IAAQnH,EAAaD,cAAbC,SAER,EAA0BlM,mBAAS,GAAD,OAAIqV,IAAtC,mBAAOC,EAAP,KAAc3N,EAAd,KAMI4N,EAAe,EAoCnB,OAAO,sBAAKpW,UAAU,mBAAf,UACH,sBAAKA,UAAU,sBAAf,UACI,4BAAIgW,IACJ,uBAAMhW,UAAU,UAAhB,UACI,2CACA,iDAAQ+C,KAAK,SAAYgK,EAAS,UAAlC,IAA4CgB,aAAY,UAAKmI,GAAcjB,SA7ClE,SAAC/R,GAClBsF,EAAStF,EAAEL,OAAOgL,QA4CV,UACI,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,KAAd,iBACA,wBAAQA,MAAM,KAAd,iBACA,wBAAQA,MAAM,KAAd,2BAIZ,qBAAK7N,UAAU,iBAAf,SACI,eAACkV,GAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAAvB,UACI,gCACI,+BACI,sCACA,uCACA,qCACA,6CAGR,gCAjEW,WACnB,IADyB,EACnBC,EAAoBnW,EAAayV,GACnC0B,EAAoB,GACpBZ,EAAmB,GAHE,cAKEJ,GALF,IAKzB,2BAA8C,CAAC,IAApCK,EAAmC,QACtCY,EAAc9O,EAAekO,EAAalW,MAC1C+W,EAAa9O,EAAciO,EAAalW,MACf,SAAxBkW,EAAa1P,QAAuBsQ,IAAgBH,GAAWI,IAAeP,GAC/EK,EAAkBnU,KAAKwT,IATN,8BAazB,cAAyBW,EAAzB,eAA4C,CAAvC,IAAMG,EAAU,KACbC,EAAcD,EAAWrM,WACzBuM,EAAYF,EAAWpM,SACvBuM,EAAQjP,EAAmB+O,GAC3BG,EAAMlP,EAAmBgP,GAE7BN,IADiBQ,EAAMD,GACOZ,EAGlC,cAAoBM,EAApB,eAAuC,CAAlC,IAAMrF,EAAK,KACR6E,EAAK,+BACL,6BAAKtO,EAAiByJ,EAAMxR,QAC5B,6BAAKwR,EAAM7G,aACX,6BAAK6G,EAAM5G,WACX,6BAAI,sBAAMpK,UAAU,iCAAhB,SAAkDgR,EAAMhL,aAJ9CgL,EAAMxP,KAMxBiU,EAAiBvT,KAAK2T,GACxB,OAAOJ,EAoCID,UAIb,sBAAKxV,UAAU,YAAf,8CAAsDoW,GAAtD,kBCzGOS,GAhBG,WAEd,OACI,sBAAK7W,UAAU,oBAAf,UACI,sBAAKA,UAAU,yBAAf,UACI,mBAAGA,UAAU,oCAAoCgC,KAAK,YAAY2B,cAAY,MAA9E,sBACA,mBAAG3D,UAAU,mCAAmCgC,KAAK,YAAY2B,cAAY,MAA7E,yBAEJ,sBAAK3D,UAAU,cAAcyB,GAAG,eAAhC,UACI,qBAAKzB,UAAU,4BAA4ByB,GAAG,WAAWxC,KAAK,WAAW6X,kBAAgB,WAAzF,SAAoG,cAAC,GAAD,MACpG,qBAAK9W,UAAU,gBAAgByB,GAAG,WAAWxC,KAAK,WAAW6X,kBAAgB,cAA7E,SAA2F,cAAC,GAAD,aC2V5FC,GAnWG,SAAC3W,GAAW,IAAD,UAEnB6E,EAAY5G,IAClB,EAAwCwC,mBAAS,IAAjD,mBAAOmW,EAAP,KAAqBC,EAArB,KAEMnF,EAAa1R,EAAMxB,KACnBgT,EAAS7T,EAAc+T,GAAc7M,EAAUzD,IAAMsQ,EAAWF,OAAOpQ,KAAOsQ,EAAWF,QAAU3M,EAAUzD,IAC7G4Q,EAAapL,EAAY8K,EAAWtS,MACpC2K,EAAa2H,EAAW3H,WAAa2H,EAAW3H,WAAa,GAC7DC,EAAW0H,EAAW1H,SAAW0H,EAAW1H,SAAW,GACvD8M,EAA4B,KAAf/M,GAAkC,KAAbC,EAArB,UAA0CD,EAA1C,YAAwDC,GAAa,GAClFpE,EAAS8L,EAAW9L,OAAS8L,EAAW9L,OAAS,UACjDmR,EAAMrF,EAAWqF,IAAMrF,EAAWqF,IAAM,GAGxC1L,EAAmBC,MAAaC,MAAM,CACxChB,UAAWe,MACXkG,OAAQlG,MAAaI,KAAK,YAAa,CACnCC,GAAI,EACJlG,KAAM6F,MAAaG,SAAS,0BAEhCuG,WAAY1G,MAAaU,SAAQ,WACzB,OAAO,IAAI7M,QAEdyM,QAAQ,mDAAoD,sDAC5DH,SAAS,oBACdqL,WAAYxL,MAAaG,SAAS,oBAClC7F,OAAQ0F,MAAaI,KAAK,YAAa,CACnCC,GAAI,EACJlG,KAAM6F,MAAaG,SAAS,sBAEhCsL,IAAKzL,QAEHiB,EAAc,CAAEC,SAAUC,YAAYpB,IAG5C,EAAqDqB,YAAQH,GAArDI,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,aAAcC,EAAhC,EAAgCA,MACxBC,EADR,EAAuCC,UAC/BD,OA8IF2H,EAAY,uCAAG,kCAAAxV,EAAA,2DACb+F,EAAQ1G,KADK,uBAGT2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAExC0P,EAAuB,CACvBrP,OAAQ,SACRC,QAASL,EACTM,SAAU,UATD,SAaPC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,+BAAqDiO,EAAWtQ,KAAOsT,GACjFjP,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IACAM,QAAQC,IAAIJ,GACZuH,MAAM,yBACa,UAAfrN,EAAMwN,KAEN9L,OAAOC,SAASC,KAAK,YAErBF,OAAOC,SAASC,KAAK,cAKT,MAAhB+D,GACA0H,MAAMvH,EAAO8H,YAGpB7H,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBArCG,2CAAH,qDA4ElB,OAlCAlM,qBAAU,YACmB,uCAAG,kCAAAlC,EAAA,2DACpB+F,EAAQ1G,KADY,uBAGhB2G,EAAY,IAAIC,SACVC,OAAO,aAAcN,EAAUzD,IAAMyD,EAAUzD,IAAM,IAC/D6D,EAAUE,OAAO,gBAAjB,iBAA4CH,IAExCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAVM,SAcdC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,yBAAuD2B,GACjEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACF,GAAoB,MAAhBH,EAAqB,CACrB,IAAIqR,EAAgBlR,EAAOnB,MAC3BqS,EAAcC,QAAQpS,GACtBgS,EAAgBG,OAGvBjR,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MA1BjB,2CAAH,qDA8BzBkR,KACD,IAGC,sBAAKtX,UAAU,sBAAf,UACI,6BAAMjC,EAAc+T,GAAc,iBAAmB,iBACrD,uBAAM1E,SAAUJ,GA3NP,SAACpO,GACd,IAAM2Y,EAAiB,uCAAG,WAAOnF,EAAYoF,GAAnB,uBAAAnY,EAAA,yDAClBoY,GAAc,IACdrS,EAAQ1G,KAFU,uBAKd2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAExCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAXI,SAeZC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,uBAA6C2T,GAAahS,GACpEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACF,GAAoB,MAAhBH,EACA,GAAIG,EAAOwE,UAAUgN,QAAQvZ,OAAS,EAAG,CACrC,IAAIwZ,EAAa,IAAIpY,KAAK6S,GAC1B/L,QAAQC,IAAI,oBAAsBqR,GAFG,oBAGfzR,EAAOwE,UAAUgN,SAHF,IAGrC,2BAAgD,CAAC,IAAtCE,EAAqC,QACxCC,EAAe,IAAItY,KAAKqY,GAC5B,GAAIjO,GAAsBgO,EAAYE,GAAe,CACjDxR,QAAQC,IAAI,sBAAwBuR,GACpCJ,GAAc,EACd,QAR6B,8BAYhCA,EACEhK,MAAM,oEADMqK,EAAmBlZ,QAGtCkZ,EAAmBlZ,MAI9BuH,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAzCnB,2CAAH,wDA6CjB0R,EAAkB,uCAAG,WAAOlZ,GAAP,iCAAAS,EAAA,2DACnB+F,EAAQ1G,KADW,qBAGf2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAC5CC,EAAUE,OAAO,eAAgB,oBAE7BwS,EAAmBnZ,EAAKsY,WAAWpP,MAAM,KAAK,GAC9CkQ,EAAiBpZ,EAAKsY,WAAWpP,MAAM,KAAK,GAC5CmQ,EAAa,CACbzY,KAAMZ,EAAKwT,WACX+E,IAAKvY,EAAKuY,IACVhN,WAAY4N,EACZ3N,SAAU4N,EACVhS,OAAQpH,EAAKoH,QAAUA,EACvB4L,OAAQhT,EAAKgT,QAAUA,GAIvBvE,EAAM/O,KAAKQ,UAAUmZ,GAEpBla,EAAc+T,GArBA,oBAsBV/S,EAAiBkG,IAAoC,YAAtBgT,EAAWjS,OAtBhC,iBAuBXyH,MAAM,mEAvBK,+BAyBPH,EAAsB,CACtB7H,OAAQ,QACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UA7BH,UAiCLC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8CiO,EAAWtQ,KAAO8L,GAC1EzH,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IACAM,QAAQC,IAAIJ,GAEO,UAAf9F,EAAMwN,KACN9L,OAAOC,SAASC,KAAK,YAErBF,OAAOC,SAASC,KAAK,iBAIhCmE,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBApDC,uCAyDXC,EAAqB,CACrBjI,OAAQ,OACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UA7DC,UAiETC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,gBAA8C6J,GACxD7H,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IACAM,QAAQC,IAAIJ,GAEO,UAAf9F,EAAMwN,KACN9L,OAAOC,SAASC,KAAK,YAErBF,OAAOC,SAASC,KAAK,iBAIhCmE,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBApFK,4CAAH,sDA2FxB8J,EAAkB3Y,EAAKwT,WAAYxT,EAAKgT,QAAUA,MAkF9C,UACI,+CAAO7O,KAAK,YAAY6K,KAAK,UAAab,EAAS,cAAnD,IAAiEc,MAAO9O,EAAiBkG,GAAa,EAAI,KAItG+R,EAAa7Y,OAAS,EACtB,sBAAK6B,UAAYjB,EAAiBkG,GAAa,GAAK,SAApD,UACI,6CACA,gDACIxD,GAAG,6BACHsM,aAAc6D,EACd7O,KAAK,UACDgK,EAAS,WAJjB,IAKI/M,UAAS,uBAAkBkN,EAAO0E,OAAS,aAAhB,IAC3B9D,UAAU/O,EAAiBkG,GAN/B,SASQ+R,EAAarS,KAAI,SAACuT,EAAU7I,GACxB,OACI,wBAAyCxB,MAAOqK,EAAS1W,IAAzD,SACK0W,EAAS1W,MAAQyD,EAAUzD,IAAM,SAAjC,UAA+C0W,EAASlV,UAAxD,YAAqEkV,EAASjV,WADnF,0BAAgCoM,UAOhD,qBAAKrP,UAAU,mBAAf,mBAAmCkN,EAAO0E,cAA1C,aAAmC,EAAe5D,aAEpD,6BAIN,gCACI,yCACA,+CAAOjL,KAAK,aAAa6K,KAAK,QAAWb,EAAS,eAAlD,IAAiE/M,UAAS,uBAAkBkN,EAAOkF,WAAa,aAAe,IAAMrE,aAAcqE,KACnJ,qBAAKpS,UAAU,mBAAf,mBAAmCkN,EAAOkF,kBAA1C,aAAmC,EAAmBpE,aAI1D,gCACI,yCACA,iDACIjL,KAAK,cACDgK,EAAS,eAFjB,IAGI/M,UAAS,uBAAkBkN,EAAOgK,WAAa,aAApB,IAC3BnJ,aAAcmJ,EAJlB,UAMI,wBAAQrJ,MAAM,GAAd,mCACA,wBAAQA,MAAM,cAAd,2BACA,wBAAQA,MAAM,cAAd,2BACA,wBAAQA,MAAM,cAAd,2BACA,wBAAQA,MAAM,cAAd,+BAEJ,qBAAK7N,UAAU,mBAAf,mBAAmCkN,EAAOgK,kBAA1C,aAAmC,EAAmBlJ,aAI1D,sBAAKhO,UAAYjB,EAAiBkG,GAAa,GAAK,SAApD,UACI,2CACA,iDACIlC,KAAK,UACDgK,EAAS,WAFjB,IAGI/M,UAAS,uBAAkBkN,EAAOlH,OAAS,aAAhB,IAC3B8H,UAAU/O,EAAiBkG,GAC3B8I,aAAc/H,EALlB,UAOI,wBAAQ6H,MAAM,UAAd,qBACA,wBAAQA,MAAM,WAAd,sBACA,wBAAQA,MAAM,OAAd,sBAEJ,qBAAK7N,UAAU,mBAAf,mBAAmCkN,EAAOlH,cAA1C,aAAmC,EAAegI,aAItD,gCACI,wCACA,+CAAOjL,KAAK,MAAM6K,KAAK,QAAWb,EAAS,QAA3C,IAAmD/M,UAAS,uBAAkBkN,EAAOiK,IAAM,aAAe,IAAMpJ,aAAcoJ,KAC9H,qBAAKnX,UAAU,mBAAf,mBAAmCkN,EAAOiK,WAA1C,aAAmC,EAAYnJ,aAInD,sBAAKhO,UAAU,iBAAf,UACI,sBAAKA,UAAU,YAAf,UACI,wBAAQ4N,KAAK,SAAS5N,UAAU,mBAAhC,mBACA,wBAAQ4N,KAAK,SAAS/L,QAAS,kBAAMoL,KAASjN,UAAU,oBAAxD,sBAEJ,qBAAKA,UAAU,aAAf,SACiB,SAAXgG,GAAsBjI,EAAc+T,GAEpC,6BADE,wBAAQlE,KAAK,SAAS/L,QAAS,WAAQgT,KAAkB7U,UAAU,yBAAnE,gCC1SbmY,GAhDM,SAAC/X,GAClB,MAAkCS,qBAAlC,mBAAO8T,EAAP,KAAkBC,EAAlB,KACIwD,EAAW7J,cAAY9M,GAqC3B,OAnCAF,qBAAU,YACmB,uCAAG,kCAAAlC,EAAA,2DACpB+F,EAAQ1G,KADY,oBAGfiW,GAA0B,WAAbyD,EAHE,wBAIZ/S,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UATE,SAaVC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,8BAAoDuU,GAAY5S,GAC1EK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GAEA6O,EAAa1O,EAAO8K,UAG3B7K,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAxBrB,+BA0BhBwO,EAAa,IA1BG,4CAAH,qDA+BzByD,KACD,IAGC,mCACM1D,EACE,cAAC,GAAD,CAAW/V,KAAM+V,EAAW/G,KAAK,SAAY,gCC+E9C0K,GA5HK,SAAClY,GACjB,IA2BMmY,EA3BiB,WACnB,IjCsBsBpZ,EiCtBlBH,EAAWoB,EAAMpB,SACjBwZ,EAAQxZ,EAASwM,cAAgB,GACjCiN,EAAOzZ,EAAS0Y,SAAW,GAC3BgB,IjCmBkBvZ,EiCnBiBsZ,GjCoBvCrZ,MAAK,SAASC,EAAGC,GAGjB,OAFQ,IAAIC,KAAKF,GACT,IAAIE,KAAKD,MAGdH,GiCRH,MAAO,CACHqZ,MAAOA,EACPG,MAjBJ,SAAmBC,GACf,IAD2B,EACvBD,EAAQ,GADe,cAGJC,GAHI,IAG3B,2BAAmC,CAAC,IAAzBC,EAAwB,QAE3BzR,EADW,IAAI7H,KAAKsZ,GACAhZ,cACnB8Y,EAAMhG,SAASvL,IAChBuR,EAAMzW,KAAKkF,IAPQ,8BAY3B,OAAOuR,EAKAG,CAAUJ,GACjBD,KAAMC,GAGMK,GAEdC,EAAc,uCAAG,WAAOC,GAAP,uBAAA5Z,EAAA,2DACf+F,EAAQ1G,KADO,uBAGX2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAC5CC,EAAUE,OAAO,eAAgB,oBAE7B8H,EAAM/O,KAAKQ,UAAU,CAAE,MAAS,CAACma,KAEjCzT,EAAiB,CACjBC,OAAQ,QACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UAbC,SAiBTC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,uBAA6CzD,EAAMpB,SAASwC,IAA5D,mBAAkFgE,GAC5FK,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IAEA0H,MAAM,yBACNrN,EAAM8Y,gBAAgBhT,EAAOsH,cAGb,MAAhBzH,GACA0H,MAAMvH,EAAO8H,YAGpB7H,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sBApCK,2CAAH,sDAyCpB,OACI,mCACI,oBAAIhM,GAAG,iBAAiBzB,UAAU,8BAAlC,SAEQuY,EAAYI,MAAMxa,OAAS,EAC3Boa,EAAYI,MAAMhU,KAAI,SAACwU,EAAMC,GACzB,OACI,qBAAIpZ,UAAU,YAAd,UACI,oBAAGgC,KAAI,qBAAgBoX,GACnBpZ,UAAU,gFACV2D,cAAY,WAFhB,UAII,sBAAM3D,UAAU,QAAhB,+BAAwCmZ,KACxC,mBAAGnZ,UAAU,4CAEjB,qBAAKyB,GAAE,oBAAe2X,GAAWpZ,UAAS,oBlB5B1D,IAAIT,MACHM,gBkB2BgGsZ,EAAO,OAAS,IAAME,cAAY,kBAAnH,SACI,qBAAKrZ,UAAU,YAAf,SAEQuY,EAAYE,KAAKta,OAAS,EAC1Boa,EAAYE,KAAK9T,KAAI,SAACiT,EAAS0B,GAC3B,IAAInS,EAAW,IAAI5H,KAAKqY,GACpB2B,EAAchS,EAAiBqQ,GAC/BqB,EAAWjS,EAAY4Q,GAK3B,OAJgBzQ,EAAStH,gBAIPsZ,EAAa,KAG3B,sBAAKnZ,UAAU,kCAAf,UACI,uBAAO4N,KAAK,OAAO5N,UAAU,2BAA2B6N,MAAO0L,EAAaC,UAAU,IACtF,qBAAKxZ,UAAU,qBAAf,SACI,wBAAQA,UAAU,qCAAqC4N,KAAK,SAAS/L,QAAS,WAAQmX,EAAeC,IAArG,SACI,mBAAGjZ,UAAU,sBAJzB,wBAAuEsZ,OAS1E,WAhCrB,eAAuCF,OAuC7C,qBAAIK,MAAM,0CAAV,UAAoD,mBAAGA,MAAM,6BAA7D,8BC/BPC,GAnFI,SAACtZ,GAAW,IAAD,IAEpBqL,EAAmBC,MAAaC,MAAM,CACxCgO,UAAWjO,MAAaG,SAAS,kCACjC+N,QAASlO,QAEPiB,EAAc,CAAEC,SAAUC,YAAYpB,IAG5C,EAAqDqB,YAAQH,GAArDI,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,aAAcC,EAAhC,EAAgCA,MACxBC,EADR,EAAuCC,UAC/BD,OA8CR,OACI,uBAAME,SAAUJ,GA7CH,SAACpO,IACM,uCAAG,WAAOA,GAAP,uBAAAS,EAAA,2DACf+F,EAAQ1G,KADO,uBAGX2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAC5CC,EAAUE,OAAO,eAAgB,oBAE7B8H,EAAM/O,KAAKQ,UAAUF,GAErB4G,EAAiB,CACjBC,OAAQ,QACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UAbC,SAiBTC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,uBAA6CzD,EAAMpB,SAASwC,IAA5D,mBAAkFgE,GAC5FK,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,IAEA0H,MAAM,uBACNrN,EAAM8Y,gBAAgBhT,EAAOsH,cAGb,MAAhBzH,GACA0H,MAAMvH,EAAO8H,YAGpB7H,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,oBApCK,2CAAH,sDAwCpBoM,CAAejb,MAIf,UAEI,gCACI,uDACA,+CAAOmE,KAAK,YAAY6K,KAAK,QAAWb,EAAS,cAAjD,IAA+D/M,UAAS,uBAAkBkN,EAAOyM,UAAY,aAAe,OAC5H,qBAAK3Z,UAAU,mBAAf,mBAAmCkN,EAAOyM,iBAA1C,aAAmC,EAAkB3L,aAIzD,gCACI,4CACA,+CAAOjL,KAAK,UAAU6K,KAAK,QAAWb,EAAS,YAA/C,IAA2D/M,UAAS,uBAAkBkN,EAAO0M,QAAU,aAAe,OACtH,qBAAK5Z,UAAU,mBAAf,mBAAmCkN,EAAO0M,eAA1C,aAAmC,EAAgB5L,aAIvD,qBAAKhO,UAAU,sBAAf,SACI,sBAAKA,UAAU,YAAf,UACI,wBAAQ4N,KAAK,SAAS5N,UAAU,uBAAhC,mBACA,wBAAQ4N,KAAK,SAAS/L,QAAS,kBAAMoL,KAASjN,UAAU,oBAAxD,4BCnCL8Z,I,OAxCC,WACZ,MAAgCjZ,mBAASxC,KAAzC,mBAAOW,EAAP,KAAiB+a,EAAjB,KAEMb,EAAkB,SAACc,GACrBrb,EAAuBqb,GACvBD,EAAYC,GACZjK,GAAmB,yBASvB,OACI,sBAAK/P,UAAU,eAAf,UACI,sBAAKA,UAAU,kBAAf,UACI,qBAAKA,UAAU,gBAAf,2BAEA,qBAAKA,UAAU,eAAf,SACI,cAAC,GAAD,CAAahB,SAAUA,EAAUka,gBAAiBA,MAGtD,qBAAKlZ,UAAU,uBAAf,SACI,yBAAQA,UAAU,cAAc6B,QAAS,WAdrDkQ,IAASC,OAAO,cAAC,GAAD,CAAYhT,SAAUA,EAAUka,gBAAiBA,IAAqB/X,SAASC,eAAe,iCAC9G8O,GAAkB,yBAaN,UACI,mBAAGlQ,UAAU,oBAAsB,wDAI/C,cAAC,GAAD,CACIyB,GAAG,uBACH6O,gBAAgB,+BAChBD,MAAM,eACNE,YAAY,S,qBCQb0J,I,OA7CU,WACrB,MAAkCpZ,qBAAlC,mBAAOqZ,EAAP,KAAkBC,EAAlB,KACMnb,EAAWX,IAmBjB,OAjBAkD,qBAAU,YACW,uCAAG,4BAAAlC,EAAA,0DACJX,IADI,0CAKiB0b,KAAOC,UAAUrb,EAASwC,IAAK,CAAC8Y,QAAS,KAL1D,OAKFC,EALE,OAORJ,EAAaI,GAPL,gDASRlU,QAAQC,IAAR,MATQ,yDAAH,qDAajBkU,KACD,IAGC,qBAAKxa,UAAU,cAAf,SACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKA,UAAU,gBAAf,0BAEA,qBAAKA,UAAU,eAAf,SAEQka,EAAY,qBAAKla,UAAU,aAAagE,IAAKkW,IAAgB,qBAAKla,UAAU,kCAIpF,qBAAKA,UAAU,kBAAf,SAE0B,YAAlBhB,EAASC,KACT,yBAAQe,UAAU,cAAc6B,QAAS,WAAQC,OAAOC,SAASC,KAAK,kBAAtE,UACI,mBAAGhC,UAAU,sBAAwB,mDAC7B,sBAAMA,UAAU,wBAAhB,qE,qBC+GrBya,GAlJW,WACtB,MAAmC5Z,qBAAnC,mBAGMiX,GAHN,UACiBzZ,IAEO,uCAAG,WAAOqc,GAAP,uBAAArb,EAAA,yDACI,SAAvBqb,EAAY1U,OADO,gBAEnByH,MAAM,2DAFa,8BAIfrI,EAAQ1G,KACR2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAC5CC,EAAUE,OAAO,eAAgB,oBAE7ByU,EAAW,CACXxa,KAAMwH,EAAY,IAAIzH,KAAKmb,EAAYlb,OACvC2X,IAAKuD,EAAYvD,IACjBhN,WAAYuQ,EAAYvQ,WACxBC,SAAUsQ,EAAYtQ,SACtBpE,OAAQ,OACR4L,OAAQ8I,EAAY9I,QAGpBtE,EAAsB,CACtB7H,OAAQ,QACRC,QAASL,EACTkI,KAAMjP,KAAKQ,UAAUkb,GACrBrU,SAAU,UAtBK,UA0BbC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8C6W,EAAYlZ,KAAO8L,GAC3EzH,MAAK,SAAAC,GAGF,OAFA6U,EAAqB7U,EAASE,OAEvBF,EAASG,UAEnBJ,MAAK,SAAAK,GACyB,MAAvByU,GACAtU,QAAQC,IAAIJ,GACZuH,MAAM,0BACN3L,OAAOC,SAASC,KAAK,cAErByL,MAAM,oBACN3L,OAAOC,SAASC,KAAK,oBAG5BmE,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,GACrBqH,MAAM,sDACN3L,OAAOC,SAASC,KAAK,mBA7CN,4CAAH,uDAkDlB4Y,EAAmB,uCAAG,WAAOtM,GAAP,yBAAAjP,EAAA,yDACpB+F,EAAQ1G,IACRmc,EAAW,IAAItb,KACfub,EAAWxR,GAAYuR,IAEvBzV,EALoB,uBAMhBC,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IAExC2V,EAAoB,CACpBtV,OAAQ,MACRC,QAASL,EACTM,SAAU,UAZM,SAiBdC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8CyK,GAAWyM,GACnElV,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACF,GAAoB,MAAhBH,EAAqB,CAErB,IAAIiV,EAAc9U,EAAOgM,OAGzB,GAFA7L,QAAQC,IAAI0U,GAERA,EAAa,CAEb,IAAIN,EAFS,gBAGYM,GAHZ,IAGb,2BAAsC,CAAC,IAA5BC,EAA2B,QAElC,GADA5U,QAAQC,IAAIqD,GAAsBkR,EAAU,IAAItb,KAAK0b,EAAWzb,QAC5DmK,GAAsBkR,EAAU,IAAItb,KAAK0b,EAAWzb,QACpDyK,GAAiB6Q,EAAUG,EAAW9Q,WAAY8Q,EAAW7Q,UACjE,CACIsQ,EAAcO,EACd,QATK,8BAcTP,EACA5C,EAAmB4C,IAEnBjN,MAAM,iDACN3L,OAAOC,SAASC,KAAK,sBAGzByL,MAAM,4CACN3L,OAAOC,SAASC,KAAK,oBAIhCmE,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAtDjB,2CAAH,sDAsEzB,OACI,qBAAKpG,UAAU,cAAf,SACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKA,UAAU,gBAAf,6BAEA,qBAAKA,UAAU,eAAf,SACI,cAAC,KAAD,CACIkb,MAAO,IACPC,QAbA,SAACC,GACjB3N,MAAM,gCACNpH,QAAQD,MAAMgV,IAYEC,OArBD,SAACzc,GACZA,IACAyH,QAAQC,IAAI1H,GACZgc,EAAoBhc,KAmBR2B,MAAO,CAAE4D,MAAO,YAIxB,qBAAKnE,UAAU,kBAAf,SACI,sBAAMA,UAAU,wBAAhB,gECpBLsb,I,OAvHI,WACf,MAAkCza,mBAAS,IAA3C,mBAAO8T,EAAP,KAAkBC,EAAlB,KAEArT,qBAAU,YACiB,uCAAG,sCAAAlC,EAAA,yDAChB4F,EAAY5G,IACZiQ,EAAUrJ,EAAUzD,MAEtB4D,EAAQ1G,KAJU,uBAMd2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAXI,SAeZC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8CyK,GAAW9I,GACnEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GACA6O,EAAa1O,EAAOgM,WAG3B/L,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAzBnB,2CAAH,qDA4BvBmV,KAED,IAgFH,OAAO,qBAAKvb,UAAU,sBAAf,SA9Ee,WAClB,IAGIwb,EAAWC,EAAaC,EAAWC,EAJf,EAEpBjc,EAAQsH,EADI,IAAIzH,MAEhBqc,EAAe,GAHK,cAKEjH,GALF,IAKxB,2BAAqC,CAAC,IAA3BkH,EAA0B,QAG7Bnc,IADasH,EADI6U,EAAYrc,QAG7Boc,EAAa1Z,KAAK2Z,GAClBL,EAAYK,EAAY1E,IACxBsE,EAAcI,EAAY1R,WAC1BuR,EAAYG,EAAYzR,SACxBuR,EAAeE,EAAY7V,SAbX,8BAiBxB,GAA4B,IAAxB4V,EAAazd,QACY,IAAxByd,EAAazd,QAAiC,YAAjBwd,GACL,IAAxBC,EAAazd,QAAiC,WAAjBwd,EAE9B,OAAO,sBAAK3b,UAAU,WAAf,UACH,gCACI,oDACA,4DAEJ,qBAAKgE,IAAG,UAAKwC,GAAL,0BAAqDtC,IAAI,gBAEvE,GAA4B,IAAxB0X,EAAazd,QAAiC,aAAjBwd,EAC/B,OAAO,sBAAK3b,UAAU,WAAf,UACH,gCACI,qDACA,2CAAcwb,EAAd,IAAyB,uBAAzB,cACYC,EADZ,OAC6BC,QAEjC,qBAAK1X,IAAG,UAAKwC,GAAL,yBAAoDtC,IAAI,kBAEtE,GAA4B,IAAxB0X,EAAazd,QAAiC,SAAjBwd,EAC/B,OAAO,sBAAK3b,UAAU,WAAf,UACP,gCACI,8DACA,4DAEJ,qBAAKgE,IAAG,UAAKwC,GAAL,yBAAoDtC,IAAI,kBAElE,GAA4B,IAAxB0X,EAAazd,OAwBZ,OAAO,sBAAK6B,UAAU,WAAf,UACV,gCACI,oDACA,4DAEJ,qBAAKgE,IAAG,UAAKwC,GAAL,0BAAqDtC,IAAI,gBA5BjE,IAAI4X,EAAUF,EAAa,GACvBG,EAAUH,EAAa,GAC3B,MAAuB,aAAnBE,EAAQ9V,QAA4C,aAAnB+V,EAAQ/V,OAClC,sBAAKhG,UAAU,WAAf,UACP,gCACI,qDACA,2CAAc8b,EAAQ3E,IAAI,uBAA1B,cACY2E,EAAQ3R,WADpB,OACoC2R,EAAQ1R,YAC5C,2CAAc2R,EAAQ5E,IAAI,uBAA1B,cACY4E,EAAQ5R,WADpB,OACoC4R,EAAQ3R,eAEhD,qBAAKpG,IAAG,UAAKwC,GAAL,yBAAoDtC,IAAI,kBAG7C,SAAnB4X,EAAQ9V,QAAwC,SAAnB+V,EAAQ/V,OAC9B,sBAAKhG,UAAU,WAAf,UACP,gCACI,8DACA,4DAEJ,qBAAKgE,IAAG,UAAKwC,GAAL,yBAAoDtC,IAAI,uBANpE,EAmBH8X,OCXMC,I,OAxGQ,SAAC7b,GACpB,MAAkCS,mBAAS,IAA3C,mBAAO8T,EAAP,KAAkBC,EAAlB,KA4BMsH,EAAa,SAAC9b,GAChB,IAAI+b,EA3BqB,SAACrK,EAAYsK,GAKtC,IAJA,IAAI7J,EAAe,GACf8C,EAAoBnW,EAAa4S,GACjCuK,EAAY,CAAE3c,OAAO,EAAMF,KAAM,IAAID,MAEhC8P,EAAQ,EAAGA,EAAQgG,EAAkBlX,OAAQkR,IAAS,CAC3D,IAAIiN,EAAY,GAChBA,EAAUpa,KAAKma,EAAWhH,EAAkBhG,IAC5C,IAAIkN,EAAerd,EAAaod,GAEhC,GAAIC,EAAa,GAAGC,eAAe,WAC9B7S,GAAsB,IAAIpK,KAAKgd,EAAa,GAAG/c,MAAO,IAAID,KAAKgd,EAAa,GAAG/c,OAAQ,CAIxF,IAHA,IAAIid,EAAapH,EAAkBlX,OAASkR,EACxCqN,EAAWD,GAAc,GAAKA,GAAcL,EAAa/G,EAAkBlX,OAASkR,EAAQ+M,EAEvFO,EAActN,EAAOsN,EAAcD,EAAUC,IAEvB,aADTtH,EAAkBsH,GACpB3W,QAAuBuM,EAAarQ,KAAKmT,EAAkBsH,IAE/E,OAIR,OAAOpK,EAIcqK,CAAqBxc,EAAMxB,KAAM,GAEtD,OACI,mCAEQud,EAAehe,OAAS,EACxBge,EAAexX,KAAI,SAACqM,EAAO3B,GACvB,OACI,sBAAKrP,UAAU,iBAAiByB,GAAIuP,EAAMxP,IAA1C,UACI,mBAAGxB,UAAU,sBAAb,SAAoCuH,EAAiByJ,EAAMxR,QAC3D,qBAAKQ,UAAU,sBAAf,SACI,2CAAcgR,EAAMmG,IAAI,uBAAxB,cACYnG,EAAM7G,WADlB,mCACsE6G,EAAM5G,gBAJpF,mBAAgEiF,OAUxE,sBAAKrP,UAAU,qBAAf,UACI,sBAAKA,UAAU,0BAAf,UACI,oEAAsC,mBAAGA,UAAU,8BACnD,+EAEJ,yBAAQA,UAAU,uCAAuC6B,QAAS,WAAQC,OAAOC,SAASC,KAAK,kBAA/F,UACI,mBAAGhC,UAAU,oBAAsB,mEA0C3D,OAlCAuB,qBAAU,YACiB,uCAAG,sCAAAlC,EAAA,yDAChB4F,EAAY5G,IACZiQ,EAAUrJ,EAAUzD,MACtB4D,EAAQ1G,KAHU,uBAKd2G,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UAVI,SAcZC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,wBAA8CyK,GAAW9I,GACnEK,MAAK,SAAAC,GAGF,OAFAC,EAAcD,EAASE,OAEhBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GAEA6O,EAAa1O,EAAOgM,WAG3B/L,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MA1BnB,2CAAH,qDA8BvBmV,KACD,IAEI,sBAAKvb,UAAU,0BAAf,UACH,iDACA,qBAAKA,UAAU,4BAAf,SACI,cAACkc,EAAD,CAAYtd,KAAM+V,WC5FfkI,I,OATF,WACT,OACI,sBAAK7c,UAAU,eAAf,UACI,cAAC,GAAD,IACA,cAAC,GAAD,SCqEG8c,GA5DF,SAAC1c,GAmCV,OAlCAmB,qBAAU,YAEkB,uCAAG,oCAAAlC,EAAA,yDACnB4F,EAAY5G,MACZ+G,EAAQ1G,OACCuG,EAHU,uBAIfI,EAAY,IAAIC,SACVC,OAAO,gBAAjB,iBAA4CH,IACxCI,EAAiB,CACjBC,OAAQ,MACRC,QAASL,EACTM,SAAU,UATK,SAabC,MAAM,UAAD,OAAWhC,EAAOC,GAAlB,uBAA6CoB,EAAUzD,KAAOgE,GACxEK,MAAK,SAAAC,GAEF,OADAC,EAAcD,EAASE,OAChBF,EAASG,UAEnBJ,MAAK,SAAAK,GACkB,MAAhBH,GAGApH,EAAuBuH,EAAOwE,cAGrCvE,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,QAASF,MAzBlB,2CAAH,qDA6BxBoI,KACD,IAEEpO,EAAM2c,WAEP,sBAAK/c,UAAU,eAAf,UACI,cAAC,EAAD,IACA,+BACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOgd,OAAK,EAACC,KAAK,IAAIC,UAAWL,KACjC,cAAC,IAAD,CAAOG,OAAK,EAACC,KAAK,mBAAmBC,UAAWpY,IAChD,cAAC,IAAD,CAAOkY,OAAK,EAACC,KAAK,SAASC,UAAW3W,IACtC,cAAC,IAAD,CAAOyW,OAAK,EAACC,KAAK,aAAaC,UAAW9O,KAC1C,cAAC,IAAD,CAAO4O,OAAK,EAACC,KAAK,gBAAgBC,UAAW9O,KAC7C,cAAC,IAAD,CAAO4O,OAAK,EAACC,KAAK,YAAYC,UAAWzI,KACzC,cAAC,IAAD,CAAOuI,OAAK,EAACC,KAAK,aAAaC,UAAWrG,KAC1C,cAAC,IAAD,CAAOmG,OAAK,EAACC,KAAK,WAAWC,UAAWC,KACxC,cAAC,IAAD,CAAOH,OAAK,EAACC,KAAK,cAAcC,UAAW/E,KAC3C,cAAC,IAAD,CAAO6E,OAAK,EAACC,KAAK,iBAAiBC,UAAW/E,KAC9C,cAAC,IAAD,CAAO6E,OAAK,EAACC,KAAK,gBAAgBC,UAAWjD,KAC7C,cAAC,IAAD,CAAO+C,OAAK,EAACC,KAAK,iBAAiBC,UAAWzC,UAGtD,cAAC,EAAD,OApBsB,cAAC,IAAD,CAAU7Y,GAAG,aCoChCwb,I,OAjFA,WAAO,IAAD,IACbzc,EAAUC,cACVyc,IAAY7e,aAAaC,QAAQ,mBAE/BgN,EAAmBC,MAAaC,MAAM,CACxCb,MAAOY,MACFG,SAAS,wBACdQ,SAAUX,MACLY,IAAI,EAAG,0CACPT,SAAS,0BAEZc,EAAc,CAAEC,SAAUC,YAAYpB,IAG5C,EAA8CqB,YAAQH,GAA9CI,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,aACVE,EADR,EAAgCC,UACxBD,OAEFE,EAAQ,uCAAG,WAAOxO,GAAP,mBAAAS,EAAA,6DACTgG,EAAY,IAAIC,SACVC,OAAO,eAAgB,oBAE7B8H,EAAM/O,KAAKQ,UAAUF,GAErB4G,EAAiB,CACjBC,OAAQ,OACRC,QAASL,EACTkI,KAAMF,EACN1H,SAAU,UAVD,SAaPC,MAAM,WAAD,OAAYhC,EAAOC,GAAnB,qBAAoD2B,GAC9DK,MAAK,SAAAC,GAGF,OAFAO,QAAQC,IAAIR,GACY,MAApBA,EAASE,OAAgBK,QAAQC,IAAI,YAAkBD,QAAQC,IAAI,WAChER,EAASG,UAEnBJ,MAAK,SAAAK,GACEA,EAAOsW,eAAe,UACtBhe,aAAaK,QAAQ,kBAAmBqH,EAAOd,OAC/C5G,aAAaK,QAAQ,WAAYP,KAAKQ,UAAUoH,EAAOlH,WACvD2B,EAAQuB,KAAK,MAEb1D,aAAa8e,WAAW,mBAG5BjX,QAAQC,IAAIJ,MAEfC,OAAM,SAAAC,GACHC,QAAQC,IAAI,QAASF,MA/BZ,2CAAH,sDAmCd,OAAIiX,EAAkB,cAAC,IAAD,CAAUzb,GAAG,MAG/B,qBAAK5B,UAAU,2BAAf,SACI,sBAAKA,UAAU,sBAAf,UACI,gDACA,uBAAMoN,SAAUJ,EAAaI,GAA7B,UACI,gCACI,6CACA,+CAAOrK,KAAK,QAAQ6K,KAAK,QAAWb,EAAS,UAA7C,IAAuD/M,UAAS,uBAAkBkN,EAAOpC,MAAQ,aAAe,OAChH,qBAAK9K,UAAU,mBAAf,mBAAmCkN,EAAOpC,aAA1C,aAAmC,EAAckD,aAErD,gCACI,6CACA,+CAAOjL,KAAK,WAAW6K,KAAK,YAAeb,EAAS,aAApD,IAAiE/M,UAAS,uBAAkBkN,EAAOb,SAAW,aAAe,OAC7H,qBAAKrM,UAAU,mBAAf,mBAAmCkN,EAAOb,gBAA1C,aAAmC,EAAiB2B,aAExD,qBAAKhO,UAAU,QAAf,SACI,wBAAQ4N,KAAK,SAAS5N,UAAU,MAAhC,sBAGR,qBAAKA,UAAU,aAAf,SACI,oDCnELud,GAXH,WACV,OACI,cAAC,IAAD,UACI,eAAC,IAAD,WACE,cAAC,IAAD,CAAON,KAAK,UAAUC,UAAWE,KACjC,cAAC,IAAD,CAAOH,KAAK,IAAIC,UAAW,kBAAM,cAAC,GAAD,CAAMH,aAAYve,aAAaC,QAAQ,8BCHpFsT,IAASC,OAAO,cAAC,GAAD,IAAS7Q,SAASC,eAAe,U","file":"static/js/main.2ee426b0.chunk.js","sourcesContent":["function isEmptyObject(obj) {\r\n    return obj && Object.keys(obj).length === 0 && obj.constructor === Object;\r\n}\r\n\r\nfunction get_local_user_data() {\r\n    return JSON.parse(localStorage.getItem(\"userData\"));\r\n}\r\n\r\nfunction get_local_user_token() {\r\n    return localStorage.getItem(\"logged_in_token\");\r\n}\r\n\r\nfunction update_local_user_data(data) {\r\n    localStorage.setItem(\"userData\", JSON.stringify(data));\r\n}\r\n\r\nfunction check_if_manager(userData) {\r\n    return userData.role === 'manager' ? true : false;\r\n}\r\n\r\nfunction sort_by_date(arr) {\r\n    arr.sort(function(a, b) {\r\n        var c = new Date(a.date);\r\n        var d = new Date(b.date);\r\n        return c-d;\r\n    });\r\n    return arr;\r\n}\r\n\r\nfunction sort_by_date_from_db(arr) {\r\n    arr.sort(function(a, b) {\r\n        var c = new Date(a);\r\n        var d = new Date(b);\r\n        return c-d;\r\n    });\r\n    return arr;\r\n}\r\n\r\n/**\r\n * Convert a full name to super short name\r\n * E.g. Rose Smith => RS or José Mário dos Santos Félix Mourinho => JMdSFM\r\n * @param {String} firstname \r\n * @param {String} lastname \r\n * @returns {String}\r\n */\r\nfunction get_short_name(firstname, lastname) {\r\n    function shorten_name(name) {\r\n        let sub_names = name.split(' ');\r\n        let short_name = '';\r\n        for (const sub_name of sub_names) {\r\n            short_name += sub_name.substring(0, 1);\r\n        }\r\n\r\n        return short_name;\r\n    }\r\n\r\n    return shorten_name(firstname) + shorten_name(lastname);\r\n}\r\n\r\nexport {\r\n    isEmptyObject,\r\n    get_local_user_token,\r\n    get_local_user_data,\r\n    update_local_user_data,\r\n    check_if_manager,\r\n    sort_by_date,\r\n    sort_by_date_from_db,\r\n    get_short_name\r\n}","import React, { Component } from 'react';\r\n\r\nclass DateToday extends Component {\r\n    constructor() {\r\n        super();\r\n        var today = new Date(),\r\n        date = today.getDate() + '.' + (today.getMonth() + 1) + '.' + today.getFullYear() ;\r\n\r\n        this.state = {\r\n            currentDate: date\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <p className=\"headerDate\">{ this.state.currentDate }</p>\r\n    }\r\n}\r\n\r\nexport default DateToday;","import React from 'react';\r\n\r\nimport './MainHeader.css';\r\n\r\nconst MainHeader = props => {\r\n    return <div className=\"mainHeader\">{props.children}</div>\r\n};\r\n\r\nexport default MainHeader;","import React from 'react';\r\n\r\nimport './NavIcon.css';\r\n\r\nconst NavIcon = props => {\r\n  return (\r\n    <div className={`nav_icon_btn ${props.className}`} style={props.style}>\r\n        <p className=\"nav_icon_img\">{props.icon}</p>\r\n        <div className=\"nav_icon_text\">{props.text}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavIcon;","import React, { useState, useEffect } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport './SideDrawer.css';\r\nimport NavIcon from '../UIElements/NavIcon';\r\n\r\nconst SideDrawer = (props) => {\r\n    let history = useHistory();\r\n    const sideDrawerOpenClass = \"drawerOpen\";\r\n    const rotateClass = \"navbar_rotate\";\r\n    const [userID, setUserID] = useState();\r\n    const [userRole, setUserRole] = useState(\"employee\");\r\n\r\n    const closeDrawer = () => {\r\n        document.getElementById(\"sideDrawer\").classList.remove(sideDrawerOpenClass);\r\n    }\r\n\r\n    const user_logout = () => {\r\n        localStorage.clear();\r\n        history.push('/signin');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('userData')) {\r\n            let userData = JSON.parse(localStorage.getItem('userData'));\r\n            setUserID(userData._id);\r\n            setUserRole(userData.role);\r\n        }\r\n    }, [userID, userRole])\r\n\r\n    return (\r\n        <aside>\r\n            <nav id=\"sideDrawer\" className={props.visible ? props.visible_class : null}>\r\n                <div className=\"sideDrawerWrapper\">\r\n                    <Link to={`/users/${userID}`} onClick={() => { closeDrawer(); window.location.href=`/users/${userID}`; }}>\r\n                        <NavIcon icon={<i className=\"fas fa-id-badge\"></i>} text={\"User Profile\"}/>\r\n                    </Link>\r\n                    { userRole === \"manager\" ? <Link to=\"/users/create\" onClick={() => { closeDrawer(); window.location.href=\"/users/create\"; }}>\r\n                        <NavIcon icon={<i className=\"fas fa-user-plus\"></i>} text={\"Create User\"}/></Link> : <></> }\r\n                    { userRole === \"manager\" ? <Link to=\"/users/employees\" onClick={closeDrawer}>\r\n                        <NavIcon icon={<i className=\"fas fa-users\"></i>} text={\"Manage Employees\"}/></Link> : <></> }\r\n                    {/* <Link to=\"/\" onClick={closeDrawer}>\r\n                        <NavIcon icon={<i className=\"fas fa-cogs\"></i>} text={\"Settings\"}/>\r\n                    </Link> */}\r\n                    <Link to=\"/about\" onClick={closeDrawer}>\r\n                        <NavIcon icon={<i className=\"fas fa-info-circle\"></i>} text={\"About\"}/>\r\n                    </Link>\r\n                    <Link to=\"/signin\" onClick={() => { closeDrawer(); user_logout(); }}>\r\n                        <NavIcon icon={<i className=\"fas fa-sign-out-alt\"></i>} text={\"Sign out\"}/>\r\n                    </Link>\r\n                    {/* <Link onClick={closeDrawer} to=\"#\"><i class=\"far fa-times-circle\"></i></Link> */}\r\n                </div>\r\n            </nav>\r\n        </aside>\r\n    )\r\n};\r\n\r\nexport default SideDrawer;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport DateToday from '../../functions/Date';\r\nimport MainHeader from './MainHeader';\r\nimport SideDrawer from './SideDrawer';\r\nimport './NavBar.css';\r\n\r\nconst NavHeader = props => {\r\n    const [username, setUsername] = useState(\"Username\");\r\n    const [drawerVisible, setdrawerVisible] = useState(false);\r\n    var sideDrawerOpenClass = \"drawerOpen\";\r\n    var rotateClass = \"navbar_rotate\";\r\n\r\n    const openDrawer = (event) => {\r\n        event.preventDefault();\r\n        setdrawerVisible(!drawerVisible);\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('mouseup',function(event){\r\n            var sideDrawer = document.getElementById('sideDrawer');\r\n            var navBtn = document.getElementById(\"userNavBtn\");\r\n            var navBtn_i = document.getElementById(\"userNavBtn_i\");\r\n            if (sideDrawer && event.target !== sideDrawer && event.target.parentNode !== sideDrawer\r\n                && event.target !== navBtn && event.target !== navBtn_i){\r\n                setdrawerVisible(false);\r\n            }\r\n        });\r\n\r\n        if (localStorage.getItem(\"userData\")) {\r\n            let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n            setUsername(userData.name ? userData.name : `${userData.firstName} ${userData.lastName}`);\r\n        }\r\n    }, [])\r\n    \r\n    return (\r\n        <header>\r\n            <MainHeader>\r\n                <div className=\"headerUserContainer\">\r\n                    <Link id=\"userNavBtn\" className=\"userNavBtn\" onClick={(e) => openDrawer(e)} to=\"#\">\r\n                        <i id=\"userNavBtn_i\" className={`fa fa-bars navbar_icon ${ drawerVisible ? rotateClass : '' }`} aria-hidden=\"true\"></i>\r\n                    </Link>\r\n                    <span className=\"headerUsername\">{username}</span>\r\n                </div>\r\n                <DateToday />\r\n            </MainHeader>\r\n            <SideDrawer visible={drawerVisible} visible_class={sideDrawerOpenClass} />\r\n        </header>\r\n    )\r\n};\r\n\r\nexport default NavHeader;","import React from 'react';\r\n\r\nimport './MainFooter.css';\r\n\r\nconst MainFooter = props => {\r\n    return <footer className=\"mainFooter\">{props.children}</footer>\r\n};\r\n\r\nexport default MainFooter;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// import \"bootstrap/dist/css/bootstrap.css\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\nimport Tooltip from \"react-bootstrap/Tooltip\";\r\n\r\nimport { get_local_user_data } from '../../functions/General';\r\n\r\nimport MainFooter from './MainFooter';\r\nimport './NavBar.css';\r\n\r\nconst NavFooter = props => {\r\n    const localUser = get_local_user_data();\r\n    return (\r\n        <MainFooter>      \r\n            <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>Home</strong></Tooltip> }>\r\n                <Link to=\"/\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                    <div><i className=\"fas fa-house-user\"></i></div>\r\n                </Link>\r\n            </OverlayTrigger>\r\n\r\n            <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>Calendar</strong></Tooltip> }>\r\n                <Link to=\"/calendar\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                    <div><i className=\"far fa-calendar-alt\"></i></div>\r\n                </Link>\r\n            </OverlayTrigger>\r\n\r\n            <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>Timesheet</strong></Tooltip> }>\r\n                <Link to=\"/timesheet\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                    <div><i className=\"far fa-file-alt\"></i><i className=\"fas fa-clock clockIcon\"></i></div>\r\n                </Link>\r\n            </OverlayTrigger>\r\n\r\n            <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>Days-Off</strong></Tooltip> }>\r\n                <Link to=\"/daysoff\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                    <div><i className=\"fas fa-umbrella-beach\"></i></div>\r\n                </Link>\r\n            </OverlayTrigger>\r\n\r\n            {/* {\r\n                localUser.role === 'manager' ? \r\n                <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>Manage employees</strong></Tooltip> }>\r\n                    <Link to=\"/users/employees\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                        <div><i className=\"fa fa-users\"></i></div>\r\n                    </Link>\r\n                </OverlayTrigger> : null\r\n            } */}\r\n            \r\n            <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>QR Code</strong></Tooltip> }>\r\n                <Link to=\"/qrcodeviewer\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                    <div><i className=\"fas fa-qrcode\"></i></div>\r\n                </Link>\r\n            </OverlayTrigger>\r\n            \r\n            {/* <OverlayTrigger placement='top' overlay={ <Tooltip id='tooltip-top'><strong>About</strong></Tooltip> }>\r\n                <Link to=\"/about\" data-toggle=\"tooltip\" className=\"navIcon\">\r\n                    <div><i className=\"fas fa-info-circle\"></i></div>\r\n                </Link>\r\n            </OverlayTrigger> */}\r\n        </MainFooter>\r\n    )\r\n};\r\n\r\nexport default NavFooter;","const get_ip = (device_type) => {\r\n    let ip;\r\n    switch (device_type) {\r\n        case 'pc':\r\n            ip = \"127.0.0.1\";   // localhost\r\n            break;\r\n        case 'mobile':\r\n            ip = \"192.168.178.48\";  // IP of your PC on the same network with your mobile phone\r\n            break;\r\n        default:\r\n            ip = \"10.0.2.2\";    // localhost on Android simulator devices\r\n            break;\r\n    }\r\n    return ip;\r\n} ;\r\n\r\nconst device_type = 'mobile';\r\n\r\nexport { get_ip, device_type }","import React from 'react';\r\n\r\nimport './Avatar.css';\r\n\r\nconst Avatar = props => {\r\n  return (\r\n    <div className={`avatar ${props.className}`} style={props.style}>\r\n      <img\r\n        src={props.image}\r\n        alt={props.alt}\r\n        style={{ width: props.width, height: props.width }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Avatar;\r\n","import React from 'react';\r\n\r\nimport './Card.css';\r\n\r\nconst Card = props => {\r\n  return (\r\n    <div className={`card ${props.className}`} style={props.style}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Avatar from '../../shared/components/UIElements/Avatar';\r\nimport Card from '../../shared/components/UIElements/Card';\r\nimport './UserItem.css';\r\n\r\nconst UserItem = props => {\r\n    return (\r\n        <li className=\"userItem\">\r\n            <Card className=\"userContent\">\r\n                <Link to={`/users/${props.id}`}>\r\n                    <div className=\"userImage\">\r\n                        <Avatar image={props.image} alt={props.name} />\r\n                    </div>\r\n                    <div className=\"userInfo\">\r\n                        <p className=\"userInfoName\">{props.name}</p>\r\n                        <div className=\"userPlace\">\r\n                            <p>{props.role}</p>\r\n                            <p><i className=\"fas fa-paint-brush\" style={{color:`${props.color}`}}></i><span className=\"badge badge-pill\" style={{background:`${props.color}`}}>\r\n                                &nbsp; &nbsp; &nbsp;</span>\r\n                            </p>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </Link>\r\n            </Card>\r\n        </li>\r\n    )\r\n};\r\n\r\nexport default UserItem;","import React from 'react';\r\nimport './UserList.css';\r\nimport UserItem from './UserItem';\r\nimport Card from '../../shared/components/UIElements/Card';\r\n\r\nconst UsersList = props => {\r\n    // console.log(props.items);\r\n    if (props.items.length === 0)\r\n        return (\r\n            <Card>\r\n                <h2>No users found!</h2>\r\n            </Card>\r\n        );\r\n    \r\n    return <ul className=\"usersList\">\r\n        {props.items.map(user => {\r\n            let current_user_id = JSON.parse(localStorage.getItem(\"userData\"))._id;\r\n            if (current_user_id !== user._id)\r\n                return (\r\n                    <UserItem \r\n                        key={user._id}\r\n                        id={user._id} \r\n                        image={user.image} \r\n                        name={user.name || `${user.firstName} ${user.lastName}`} \r\n                        role={user.role}\r\n                        color={user.color_bkgr}\r\n                    />\r\n                )\r\n        })}\r\n    </ul>\r\n};\r\n\r\nexport default UsersList;","import React, { useState, useEffect } from 'react';\r\nimport UsersList from '../components/UsersList';\r\nimport { get_local_user_data } from '../../shared/functions/General';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\n\r\nconst Users = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [localUser, setlocalUser] = useState(get_local_user_data())\r\n\r\n    useEffect(() => {\r\n        const fetch_all_users = async () => {\r\n            let token = localStorage.getItem(\"logged_in_token\");\r\n            if (token) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"manager_id\", localUser._id ? localUser._id : '');\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n                var requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n    \r\n                var status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/users/employees`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        setUsers(result.users);\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            }\r\n        }\r\n\r\n        setlocalUser(get_local_user_data());\r\n        fetch_all_users();\r\n    }, [])\r\n\r\n    return <UsersList items={users} />\r\n}\r\n\r\nexport default Users;","import React from 'react';\r\nimport './About.css';\r\n\r\nconst About = () => {\r\n    return (\r\n        <div className=\"about_page\">\r\n            <div className=\"about_wrapper\">\r\n                <div className=\"title_section\">About the app</div>\r\n\r\n                <div className=\"main_content\">\r\n                    <div className=\"logo\">\r\n                        <img className=\"icon\" src={`${process.env.PUBLIC_URL}/icons/logos/180x180.png`} />\r\n                        <span className=\"version text-secondary\">Version 1.0</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"intro_text\">\r\n                        <span className=\"text-info\">EveryShift is one of the most epic and powerful tool for managment of working staffs and their daily shifts.</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"author_info\">\r\n                        <p>Author: Ngoc Huong Phan</p>\r\n                        <button className=\"btn formBtn\" onClick={() => { window.location.href=\"https://phanhuong.com\" }}>Visit author's homepage</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default About;","// Constants\r\nconst CALENDAR = {\r\n    days_of_week: [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n    days_short: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n    days_super_short: [\"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n    months_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n    height_rate: 0.5\r\n}\r\n\r\n/**\r\n * Convert a date to format YYYY-MM-DD\r\n * @param {String} date_in \r\n * @returns {String}\r\n */\r\nfunction to_raw_date(date_in) {\r\n    let date_out = '';\r\n    if (date_in) {\r\n        let new_date = new Date(date_in);\r\n        let new_year = new_date.getFullYear();\r\n        let new_month = new_date.getMonth() < 9 ? \"0\" + (new_date.getMonth() + 1) : new_date.getMonth() + 1;\r\n        let new_day = new_date.getDate() < 10 ? \"0\" + new_date.getDate() : new_date.getDate();\r\n        date_out = `${new_year}-${new_month}-${new_day}`;\r\n    }\r\n    return date_out;\r\n}\r\n\r\n// Convert a date to format DD-MM-YYYY\r\nfunction to_standard_date(date_in) {\r\n    let date_out = '';\r\n    if (date_in) {\r\n        let new_date = new Date(date_in);\r\n        let new_year = new_date.getFullYear();\r\n        let new_month = new_date.getMonth() < 9 ? \"0\" + (new_date.getMonth() + 1) : new_date.getMonth() + 1;\r\n        let new_day = new_date.getDate() < 10 ? \"0\" + new_date.getDate() : new_date.getDate();\r\n        date_out = `${new_day}-${new_month}-${new_year}`;\r\n    }\r\n    return date_out;\r\n}\r\n\r\n// Function to get Month\r\nfunction get_this_month(date_in) {\r\n    let date_out = '';\r\n    if (date_in) {\r\n        let new_date = new Date(date_in);\r\n        let new_month = new_date.getMonth() + 1;\r\n        date_out = `${new_month}`;\r\n    }\r\n    return date_out;\r\n}\r\n\r\n// Function to get Year\r\nfunction get_this_year(date_in) {\r\n    let date_out = '';\r\n    if (date_in) {\r\n        let new_date = new Date(date_in);\r\n        let new_year = new_date.getFullYear();\r\n        date_out = `${new_year}`;\r\n    }\r\n    return date_out;\r\n}\r\n\r\nfunction get_this_year_only() {\r\n    let today = new Date();\r\n    return today.getFullYear();\r\n}\r\n\r\n// Function to get Hour as number\r\nfunction get_hour_as_number(time_in) {\r\n    let hour_out;\r\n    if (time_in) {\r\n        let hour_arr = time_in.split(\":\");\r\n        let hour_str = hour_arr[0];\r\n        hour_out = parseInt(hour_str);\r\n    }\r\n    return hour_out;\r\n}\r\n\r\n// Function to get a week number (DEPRECATED)\r\nfunction get_week_number(date) {\r\n    let first_day = new Date(date.getFullYear(), 0, 1);\r\n    let week_number = Math.ceil( (((date.getTime() - first_day.getTime()) / 86400000) + first_day.getDay() + 1) / 7 );\r\n    return week_number.toString();\r\n}\r\n\r\n// Get ISO-8601 week number of year, weeks starting on Monday\r\n// https://www.w3resource.com/javascript-exercises/javascript-date-exercise-24.php\r\nfunction ISO8601_week_no(dt) {\r\n    var tdt = new Date(dt.valueOf());\r\n    var dayn = (dt.getDay() + 6) % 7;\r\n    tdt.setDate(tdt.getDate() - dayn + 3);\r\n    var firstThursday = tdt.valueOf();\r\n    tdt.setMonth(0, 1);\r\n    if (tdt.getDay() !== 4) {\r\n        tdt.setMonth(0, 1 + ((4 - tdt.getDay()) + 7) % 7);\r\n    }\r\n    return 1 + Math.ceil((firstThursday - tdt) / 604800000);\r\n}\r\n\r\n// Function to up date the full date (return tomorrow, yesterday or date of next/previous week)\r\nfunction change_current_date(date_in, step) {\r\n    // let date_in = new Date(date_str);\r\n    let alt = date_in.getDate();\r\n    let neu = alt + step;\r\n    return new Date(date_in.getFullYear(), date_in.getMonth(), neu);\r\n}\r\n\r\n/**\r\n * Get a whole week by a certain date.\r\n * E.g. if selected date is 08.09.2021, then the it should return the whole week from 06.09.2021 to 12.09.2021\r\n * @param {Date} date_in\r\n * @returns {[Date]}\r\n */\r\nfunction get_week_by_day(date_in) {\r\n    let current_day = date_in.getDay();\r\n    let current_date = date_in.getDate();\r\n    let current_month = date_in.getMonth();\r\n    let current_year = date_in.getFullYear();\r\n\r\n    current_day = correct_day_of_week(current_day);\r\n\r\n    let the_week = [];\r\n    for (let day_index = 0; day_index < 7; day_index++) {\r\n        let new_date;\r\n        if (day_index < current_day) {\r\n            let x = current_day - day_index;\r\n            new_date = current_date - x;\r\n        } else if (day_index > current_day) {\r\n            let x = day_index - current_day;\r\n            new_date = current_date + x;\r\n        } else {\r\n            new_date = current_date;\r\n        }\r\n\r\n        let full_date = new Date(current_year, current_month, new_date);\r\n        the_week[day_index] = full_date;\r\n        // let element_id = \"day_text_\" + day;\r\n        // let element = document.getElementById(element_id);\r\n        // element.innerText =\r\n        //     (full_date.getDate() < 10 ? \"0\" + full_date.getDate() : full_date.getDate()) + \".\" +\r\n        //     (full_date.getMonth() + 1 < 10 ? \"0\" + (full_date.getMonth() + 1) : full_date.getMonth() + 1) + \".\" +\r\n        //     full_date.getFullYear();\r\n    }\r\n\r\n    // console.log(the_week);\r\n\r\n    return the_week;\r\n}\r\n\r\n// Function to get correct day of week (0 as Monday,..., 6 as Sunday)\r\nfunction correct_day_of_week(old_day) {\r\n    let new_day = old_day === 0 ? 6 : old_day - 1;\r\n    return new_day;\r\n}\r\n\r\nfunction get_time_of_day_label(minute_step, top, top_offset) {\r\n    let output = [];\r\n    // let top_position = top_offset ? top_offset : 0;\r\n    let top_position = top_offset || 0;\r\n\r\n    for (let hour = 0; hour < 24; hour++) {\r\n        let new_time = make_pretty_time(hour);\r\n        if (top) new_time = { label: new_time, top: top_position + \"px\" }\r\n        output.push(new_time);\r\n        if (hour > 0) top_position += minute_step;\r\n    }\r\n\r\n    return output;\r\n}\r\n\r\nfunction make_pretty_time(time_in) {\r\n    return time_in < 10 ? \"0\" + time_in : time_in;\r\n}\r\n\r\n// Convert a date to format HH:MM\r\nfunction to_raw_time(date) {\r\n    let hours = make_pretty_time(date.getHours())\r\n    let minutes = make_pretty_time(date.getMinutes());\r\n    return `${hours}:${minutes}`;\r\n}\r\n\r\nfunction compare_date_standard(date1, date2) {\r\n    return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate()\r\n}\r\n\r\nfunction to_total_minutes_raw(time_str) {\r\n    let time_arr = time_str.split(\":\");\r\n    let hours = parseInt(time_arr[0]);\r\n    let minute = parseInt(time_arr[1]);\r\n    return hours * 60 + minute;\r\n}\r\n\r\nfunction is_time_in_range(input_time, start_time, end_time) {\r\n    let total_minutes_input = to_total_minutes_raw(input_time);\r\n    let total_minutes_start = to_total_minutes_raw(start_time);\r\n    let total_minutes_end = to_total_minutes_raw(end_time);\r\n\r\n    return total_minutes_input >= total_minutes_start && total_minutes_input <= total_minutes_end;\r\n}\r\n\r\nfunction get_localstorage_current_date() {\r\n    var localstorage_date_raw = localStorage.getItem(\"current_date\");\r\n    if (localstorage_date_raw) {\r\n        return new Date(localstorage_date_raw)\r\n    } else {\r\n        let today = new Date();\r\n        localStorage.setItem(\"current_date\", today);\r\n        return today;\r\n    }\r\n}\r\n\r\nfunction set_localstorage_current_date(new_date) {\r\n    localStorage.setItem(\"current_date\", new_date);\r\n}\r\n\r\nexport {\r\n    CALENDAR,\r\n    to_raw_date,\r\n    to_raw_time,\r\n    is_time_in_range,\r\n    ISO8601_week_no,\r\n    change_current_date,\r\n    get_week_by_day,\r\n    get_this_month,\r\n    get_this_year,\r\n    get_hour_as_number,\r\n    correct_day_of_week,\r\n    get_time_of_day_label,\r\n    get_week_number,\r\n    to_standard_date,\r\n    compare_date_standard,\r\n    get_localstorage_current_date,\r\n    set_localstorage_current_date,\r\n    get_this_year_only\r\n}","import React, { useState } from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\nimport { to_raw_date } from '../../shared/functions/FormatDate';\r\nimport { isEmptyObject, get_local_user_data, update_local_user_data } from '../../shared/functions/General';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\n\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport './UserForm.css';\r\n\r\nconst UserForm = (props) => {\r\n    const [localUser, setLocalUser] = useState(get_local_user_data())\r\n\r\n    // Prepare data\r\n    const user_data = props.data;\r\n    const user_role = user_data.role ? user_data.role : '';\r\n    const first_name = user_data.firstName ? user_data.firstName : '';\r\n    const last_name = user_data.lastName ? user_data.lastName : '';\r\n    const email = user_data.email ? user_data.email : '';\r\n    const dateOfBirth = to_raw_date(user_data.dateOfBirth);\r\n    const gender = user_data.gender ? user_data.gender : '';\r\n    const streetHouseNr = user_data.streetHouseNr ? user_data.streetHouseNr : '';\r\n    const city = user_data.city ? user_data.city : '';\r\n    const postalCode = user_data.postalCode ? user_data.postalCode : '';\r\n    const state = user_data.state ? user_data.state : '';\r\n    const phone = user_data.phone ? user_data.phone : '';\r\n    const country = user_data.country ? user_data.country : '';\r\n    const salary = user_data.salary ? user_data.salary : '';\r\n    const entryDate = to_raw_date(user_data.entryDate);\r\n    const daysOffCount = user_data.daysOffCount ? user_data.daysOffCount : 0;\r\n    \r\n    // form validation rules \r\n    const validationSchema = Yup.object().shape({\r\n        form_signup: Yup.number(),\r\n        firstName: Yup.string()\r\n            .required('First Name is required'),\r\n        lastName: Yup.string()\r\n            .required('Last name is required'),\r\n        email: Yup.string()\r\n            .required('Email is required')\r\n            .email('Email is invalid'),\r\n        role: Yup.string().when('form_signup', {\r\n            is: 1,\r\n            then: Yup.string().required('Position is required')\r\n        }),\r\n        dateOfBirth: Yup.string()\r\n            .required('Date of birth is required')\r\n            .matches(/^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/, 'Date of Birth must be a valid date in the format YYYY-MM-DD'),\r\n        gender: Yup.string()\r\n            .required('Gender is required'),\r\n        phone: Yup.string()\r\n            .required('Phone is required'),\r\n        streetHouseNr: Yup.string()\r\n            .required('Adress is required'),\r\n        postalCode: Yup.number().positive().integer()\r\n            .required('Postal code is required')\r\n            .typeError('Postal code must be a positive number'),\r\n        city: Yup.string()\r\n            .required('City is required'),\r\n        state: Yup.string()\r\n            .required('State is required'),\r\n        country: Yup.string()\r\n            .required('Country is required'),\r\n        salary: Yup.number().positive().integer()\r\n            .required('Salary is required')\r\n            .typeError('Postal code must be a positive number'),\r\n        entryDate: Yup.string().default(function () {\r\n                return new Date();\r\n            })\r\n            .matches(/^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/, 'Entry date must be a valid date in the format YYYY-MM-DD')\r\n            .required('Entry Date is required'),\r\n        daysOffCount: Yup.number().positive().integer(),\r\n        password: Yup.string().when('form_signup', {\r\n            is: 1,\r\n            then: Yup.string().min(6, 'Password must be at least 6 characters').required('Password is required'),\r\n            otherwise: Yup.string().when('password', {\r\n                is: (val) => val !== '',\r\n                then: Yup.string().min(6, 'Password must be at least 6 characters'),\r\n                otherwise: Yup.string()\r\n            })\r\n        }),\r\n        confirmPassword: Yup.string().when('password', {\r\n            is: (val) => val !== '',\r\n            then: Yup.string().oneOf([Yup.ref('password'), null], 'Passwords must match').required('Confirm Password is required'),\r\n            otherwise: Yup.string()\r\n        })\r\n        // acceptTerms: Yup.bool()\r\n        //     .oneOf([true], 'Accept Ts & Cs is required')\r\n    });\r\n    const formOptions = { resolver: yupResolver(validationSchema) };\r\n\r\n    // useForm() hook\r\n    const { register, handleSubmit, reset, formState } = useForm(formOptions);\r\n    const { errors } = formState;\r\n\r\n    const onSubmit = (data) => {\r\n        const update_user_by_id = async (data) => {\r\n            let token = localStorage.getItem(\"logged_in_token\");\r\n            if (token) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                myHeaders.append(\"Content-Type\", \"application/json\");\r\n    \r\n                var raw = JSON.stringify(data);\r\n    \r\n                if (!isEmptyObject(user_data)) {   // update user\r\n                    let requestOptionsPatch = {\r\n                        method: 'PATCH',\r\n                        headers: myHeaders,\r\n                        body: raw,\r\n                        redirect: 'follow'\r\n                    };\r\n                    \r\n                    let status_code;\r\n                    await fetch(`http://${get_ip(device_type)}:9000/users/${user_data._id}`, requestOptionsPatch)\r\n                    .then(response => {\r\n                        status_code = response.status;\r\n                        // console.log(response);\r\n                        return response.json()\r\n                    })\r\n                    .then(result => {\r\n                        if (status_code === 200) {\r\n                            // console.log(result);\r\n                            // alert('Updated successfully!');\r\n                            if (localUser._id === result.edited_user._id) {\r\n                                setLocalUser(result.edited_user);\r\n                                update_local_user_data(result.edited_user);\r\n                                // history.push(\"/\");\r\n                                window.location.href=\"/\"\r\n                            } else {\r\n                                window.location.href=\"/users/employees\"\r\n                                // history.push(\"/users/employees\");\r\n                            }\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.log('error', error);\r\n                        alert('Updated failed!');\r\n                    });\r\n                } else {    // Create user\r\n                    let requestOptionsPost = {\r\n                        method: 'POST',\r\n                        headers: myHeaders,\r\n                        body: raw,\r\n                        redirect: 'follow'\r\n                    };\r\n        \r\n                    let status_code;\r\n                    await fetch(`http://${get_ip(device_type)}:9000/users/signup`, requestOptionsPost)\r\n                    .then(response => {\r\n                        status_code = response.status;\r\n                        // console.log(response);\r\n                        return response.json()\r\n                    })\r\n                    .then(result => {\r\n                        if (status_code === 201) {\r\n                            console.log(result);\r\n                            alert('Created successfully!');\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.log('error', error);\r\n                        alert('Created failed!');\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        update_user_by_id(data);\r\n    }\r\n\r\n    return (\r\n        <div className=\"signupFormContainer\">\r\n            { isEmptyObject(user_data) ? <h4>Create a new account</h4> : <></> }\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <input name=\"form_signup\" type=\"hidden\" {...register('form_signup')} value={isEmptyObject(props.data) ? 1 : 0} />\r\n                <input name=\"current_user_id\" type=\"hidden\" value={localUser._id ? localUser._id : -1} />\r\n\r\n                <div>\r\n                    <label>Position</label>\r\n                    <select \r\n                        name=\"role\" \r\n                        {...register('role')} \r\n                        className={`form-control ${errors.role ? 'is-invalid' : ``}`} \r\n                        disabled={localUser.role !== 'manager' ? true : false}\r\n                        defaultValue={user_role}\r\n                    >\r\n                        <option value=\"\">Please choose role</option>\r\n                        <option value=\"employee\">Employee</option>\r\n                        <option value=\"manager\">Manager</option>\r\n                    </select>\r\n                    <div className=\"invalid-feedback\">{errors.role?.message}</div>\r\n                </div>\r\n                <div>\r\n                    <label>First Name</label>\r\n                    <input name=\"firstName\" type=\"text\" {...register('firstName')} className={`form-control ${errors.firstName ? 'is-invalid' : ''}`} defaultValue={first_name} />\r\n                    <div className=\"invalid-feedback\">{errors.firstName?.message}</div>\r\n                </div>\r\n                <div>\r\n                    <label>Last Name</label>\r\n                    <input name=\"lastName\" type=\"text\" {...register('lastName')} className={`form-control ${errors.lastName ? 'is-invalid' : ''}`} defaultValue={last_name} />\r\n                    <div className=\"invalid-feedback\">{errors.lastName?.message}</div>\r\n                </div>\r\n                <div>\r\n                    <label>Email</label>\r\n                    <input name=\"email\" type=\"text\" placeholder=\"example@email.com\" {...register('email')} className={`form-control ${errors.email ? 'is-invalid' : ''}`} defaultValue={email} />\r\n                    <div className=\"invalid-feedback\">{errors.email?.message}</div>\r\n                </div>\r\n                <div className=\"field_2col\">\r\n                    <div>\r\n                        <label>Date of Birth</label>\r\n                        <input name=\"dateOfBirth\" type=\"date\" {...register('dateOfBirth')} className={`form-control ${errors.dateOfBirth ? 'is-invalid' : ''}`} defaultValue={dateOfBirth} />\r\n                        <div className=\"invalid-feedback\">{errors.dateOfBirth?.message}</div>\r\n                    </div>\r\n                    <div>\r\n                        <label>Gender</label>\r\n                        <select name=\"gender\" {...register('gender')} className={`form-control ${errors.gender ? 'is-invalid' : ''}`} defaultValue={gender}>\r\n                            <option value=\"\"></option>\r\n                            <option value=\"female\">Female</option>\r\n                            <option value=\"male\">Male</option>\r\n                            <option value=\"other\">Other</option>\r\n                        </select>\r\n                        <div className=\"invalid-feedback\">{errors.gender?.message}</div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label>Phone</label>\r\n                    <input name=\"phone\" type=\"tel\" placeholder=\"+49 12345678910\" pattern=\"+[0-9]{2} [0-9]{11}\" {...register('phone')} className={`form-control ${errors.phone ? 'is-invalid' : ''}`}  defaultValue={phone}/>\r\n                    <div className=\"invalid-feedback\">{errors.phone?.message}</div>\r\n                </div>\r\n                <p>Adress</p>\r\n                <div>\r\n                    <label>Street, House number</label>\r\n                    <input name=\"streetHouseNr\" type=\"text\" {...register('streetHouseNr')} className={`form-control ${errors.streetHouseNr ? 'is-invalid' : ''}`} defaultValue={streetHouseNr} />\r\n                    <div className=\"invalid-feedback\">{errors.streetHouseNr?.message}</div>\r\n                </div>\r\n                <div className=\"field_2col\">\r\n                    <div>\r\n                        <label>City</label>\r\n                        <input name=\"city\" type=\"text\" {...register('city')} className={`form-control ${errors.city ? 'is-invalid' : ''}`} defaultValue={city} />\r\n                        <div className=\"invalid-feedback\">{errors.city?.message}</div>\r\n                    </div>\r\n                    <div>\r\n                        <label>Postal Code</label>\r\n                        <input name=\"postalCode\" type=\"text\" {...register('postalCode')} className={`form-control ${errors.postalCode ? 'is-invalid' : ''}`} defaultValue={postalCode} />\r\n                        <div className=\"invalid-feedback\">{errors.postalCode?.message}</div>\r\n                    </div>\r\n                    <div>\r\n                        <label>State</label>\r\n                        <input name=\"state\" type=\"text\" {...register('state')} className={`form-control ${errors.state ? 'is-invalid' : ''}`} defaultValue={state} />\r\n                        <div className=\"invalid-feedback\">{errors.state?.message}</div>\r\n                    </div>\r\n                    <div>\r\n                        <label>Country</label>\r\n                        <input name=\"country\" type=\"text\" {...register('country')} className={`form-control ${errors.country ? 'is-invalid' : ''}`} defaultValue={country} />\r\n                        <div className=\"invalid-feedback\">{errors.country?.message}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"field_2col\">\r\n                    <div>\r\n                        <label>Salary</label>\r\n                        <input name=\"salary\" type=\"number\" min=\"1\" {...register('salary')} className={`form-control ${errors.salary ? 'is-invalid' : ''}`} defaultValue={salary} />\r\n                        <div className=\"invalid-feedback\">{errors.salary?.message}</div>\r\n                    </div>\r\n                    <div>\r\n                        <label>Days-off</label>\r\n                        <input name=\"daysOffCount\" type=\"number\" min={0} step={1} {...register('daysOffCount')} className={`form-control ${errors.daysOffCount ? 'is-invalid' : ''}`}  defaultValue={daysOffCount}/>\r\n                        <div className=\"invalid-feedback\">{errors.daysOffCount?.message}</div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label>Entry date</label>\r\n                    <input name=\"entryDate\" type=\"date\" {...register('entryDate')} className={`form-control ${errors.entryDate ? 'is-invalid' : ''}`} defaultValue={entryDate} />\r\n                    <div className=\"invalid-feedback\">{errors.entryDate?.message}</div>\r\n                </div>\r\n                <div className={ localUser._id === user_data._id || isEmptyObject(user_data) ? '' : 'd-none' }>\r\n                    <label>Password</label>\r\n                    <input name=\"password\" type=\"password\" {...register('password')} className={`form-control ${errors.password ? 'is-invalid' : ''}`} />\r\n                    <div className=\"invalid-feedback\">{errors.password?.message}</div>\r\n                </div>\r\n                <div className={ localUser._id === user_data._id || isEmptyObject(user_data) ? '' : 'd-none' }>\r\n                    <label>Confirm Password</label>\r\n                    <input name=\"confirmPassword\" type=\"password\" {...register('confirmPassword')} className={`form-control ${errors.confirmPassword ? 'is-invalid' : ''}`} />\r\n                    <div className=\"invalid-feedback\">{errors.confirmPassword?.message}</div>\r\n                </div>\r\n                {/* {\r\n                    props.type === 'sign_up' ? \r\n                        <div className=\"checkTerms\">\r\n                            <input name=\"acceptTerms\" type=\"checkbox\" {...register('acceptTerms')} id=\"acceptTerms\" className={`form-check-input ${errors.acceptTerms ? 'is-invalid' : ''}`} />\r\n                            <label htmlFor=\"acceptTerms\" className=\"form-check-label\">Accept Terms & Conditions</label>\r\n                            <div className=\"invalid-feedback\">{errors.acceptTerms?.message}</div>\r\n                        </div> :\r\n                        <></>\r\n                } */}\r\n                <div>\r\n                    <button type=\"submit\" className=\"btn mr-1 formBtn\">Apply</button>\r\n                    <button type=\"button\" onClick={() => reset()} className=\"btn btn-secondary\">Reset</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default UserForm;","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\n\r\nimport UserForm from '../components/UserForm';\r\n\r\nconst UserProfile = (props) => {\r\n    const [userData, setUserData] = useState();\r\n    let user_id = useParams().id;\r\n\r\n    useEffect(() => {\r\n        const fetch_user_profile = async () => {\r\n            let token = localStorage.getItem(\"logged_in_token\");\r\n            if (!userData && token && user_id !== 'create') {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                var requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n        \r\n                var status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/users/${user_id}`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        // console.log(result);\r\n                        setUserData(result.user_data);\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            } else {\r\n                setUserData({});\r\n            }\r\n        }\r\n        \r\n        fetch_user_profile();\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            { userData ?\r\n                <UserForm data={userData} /> : <></>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserProfile;","import React from 'react';\r\nimport { CALENDAR, get_week_by_day } from '../../shared/functions/FormatDate';\r\n\r\nconst CalendarTopBar = (props) => {\r\n    const current_week = get_week_by_day(props.currentUserDate);\r\n    // console.log(current_week);\r\n\r\n    const display_month_and_year = () => {\r\n        let start_month = current_week[0].getMonth();\r\n        let end_month = current_week[current_week.length - 1].getMonth();\r\n        let start_year = current_week[0].getFullYear();\r\n        let end_year = current_week[current_week.length - 1].getFullYear()\r\n\r\n        let output;\r\n        if (start_month === end_month) {\r\n            output = `${CALENDAR.months_short[start_month]} ${start_year}`;\r\n        } else if (start_year === end_year) {\r\n            output = `${CALENDAR.months_short[start_month]} / ${CALENDAR.months_short[end_month]} ${start_year}`;\r\n        } else {\r\n            output = `${CALENDAR.months_short[start_month]} ${start_year} / ${CALENDAR.months_short[end_month]} ${end_year}`;\r\n        }\r\n\r\n        return output;\r\n    }\r\n\r\n    return (\r\n        <h5 className=\"month_label mb-0\">{display_month_and_year()}</h5>\r\n    )\r\n}\r\n\r\nexport default CalendarTopBar\r\n","import React from 'react';\r\nimport { ISO8601_week_no } from '../../shared/functions/FormatDate';\r\n\r\nconst WeekController = (props) => {\r\n    const previous_week = () => {\r\n        props.update(-7)\r\n    }\r\n\r\n    const next_week = () => {\r\n        props.update(7)\r\n    }\r\n\r\n    return (\r\n        <div className=\"calendar_controller\">\r\n            <button className=\"btn-sm btn formBtn shadow-none\" onClick={previous_week}>\r\n                <i className=\"fa fa-angle-double-left\"></i>\r\n            </button>\r\n            <span className=\"week_label\">Week {ISO8601_week_no(props.currentUserDate)}</span>\r\n            <button className=\"btn-sm btn formBtn shadow-none\" onClick={next_week}>\r\n                <i className=\"fa fa-angle-double-right\"></i>\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WeekController\r\n","import React from \"react\";\r\nimport { CALENDAR, get_week_by_day, correct_day_of_week } from \"../../shared/functions/FormatDate\";\r\n\r\nconst CalendarTitle = (props) => {\r\n    const current_week = get_week_by_day(props.currentUserDate);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"hours_of_day_label\"></div>\r\n            <div className=\"days_of_week_label\">\r\n                { current_week.map((day, index) => {\r\n                    return (\r\n                        <div className=\"single_day_of_week_label\" key={`day_title_${index}`}>\r\n                            <span>{CALENDAR.days_super_short[correct_day_of_week(day.getDay())]}</span>\r\n                            <span>{day.getDate()}</span>\r\n                        </div>\r\n                    )\r\n                }) }\r\n            </div>\r\n        </> \r\n    )\r\n}\r\n\r\nexport default CalendarTitle;","import React from \"react\";\r\n\r\nconst HourLine = ({ item_height }) => {\r\n    const set_hour_line_postitions = () => {\r\n        let output = [];\r\n\r\n        let top_position = 0;\r\n        for (let i = 0; i < 24; i++) {\r\n            output.push(top_position);\r\n            top_position += item_height;\r\n        }\r\n\r\n        return output;\r\n    }\r\n    const hour_line_positions = set_hour_line_postitions();\r\n\r\n    return (\r\n        <>\r\n            {\r\n                hour_line_positions.map((top_pos, index) => {\r\n                    if (top_pos === 0) return <React.Fragment key={`hour_line_${index}`}></React.Fragment>\r\n                    return (\r\n                        <div className=\"hour_line\" style={{ \"top\": `${top_pos}px` }} key={`hour_line_${index}`}></div>\r\n                    )\r\n                })\r\n            }\r\n        </>   \r\n    )\r\n}\r\n\r\nexport default HourLine;","import React from \"react\";\r\nimport './CustomModal.css';\r\n\r\nfunction close_custom_modal(modal_id) {\r\n    if (document.getElementById(modal_id).classList.contains(\"d-flex\")) {\r\n        document.getElementById(modal_id).classList.remove(\"d-flex\");\r\n    }\r\n}\r\n\r\nfunction open_custom_modal(modal_id) {\r\n    if (!document.getElementById(modal_id).classList.contains(\"d-flex\")) {\r\n        document.getElementById(modal_id).classList.add(\"d-flex\");\r\n    }\r\n}\r\n\r\nconst CustomModal = (props) => {\r\n    return (\r\n        <div id={props.id} className=\"custom_modal\">\r\n            <div className=\"custom_modal_wrapper rounded\">\r\n                <div className=\"custom_modal_header\">\r\n                    <div className=\"title\">{props.title}</div>\r\n                    <div className=\"close_btn\">\r\n                        <button onClick={() => { close_custom_modal(props.id) }}><i className=\"fa fa-times\"></i></button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"custom_modal_content\">\r\n                    <div id={props.main_content_id} className=\"main_content\">\r\n                        {props.children}\r\n                    </div>\r\n                </div>\r\n                {\r\n                    props.has_footer ?\r\n                    <div className=\"custom_modal_footer\">\r\n                        <div className=\"status\"></div>\r\n                        <div className=\"buttons\">\r\n                            { props.has_action_btn ? <button className=\"btn btn-success\" onClick={() => { close_custom_modal(props.id); props.action_function() }}>Apply</button> : <></> }\r\n                            { props.has_close_btn ? <button className=\"btn btn-secondary\" onClick={() => { close_custom_modal(props.id) }}>Close</button> : <></> }\r\n                        </div>\r\n                    </div> : <></>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport {\r\n    CustomModal,\r\n    close_custom_modal,\r\n    open_custom_modal\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { get_local_user_data, check_if_manager } from \"../../shared/functions/General\";\r\nimport { to_standard_date } from \"../../shared/functions/FormatDate\";\r\nimport { open_custom_modal } from \"../../shared/components/UIElements/CustomModal\";\r\n\r\nconst ShiftItem = (props) => {\r\n    const local_userData = get_local_user_data();\r\n    const multiple_users = Array.isArray(props.shift);\r\n\r\n    const set_status_color = (status) => {\r\n        let output;\r\n        switch (status) {\r\n            case 'done':\r\n                output = 'success';\r\n                break;\r\n            case 'accepted':\r\n                output = 'primary';\r\n                break;\r\n            default:\r\n                output = 'warning';\r\n                break;\r\n        }\r\n        return output;\r\n    }\r\n\r\n    const set_properties = () => {\r\n        let output = {\r\n            top: 0,\r\n            height: 0,\r\n            colors: []\r\n        };\r\n\r\n        let start_time = multiple_users ? props.shift[0].start_time.split(\":\") : props.shift.start_time.split(\":\");\r\n        let end_time = multiple_users ? props.shift[0].end_time.split(\":\") : props.shift.end_time.split(\":\");\r\n        let final_top = (parseInt(start_time[1]) / 60 + parseInt(start_time[0])) * props.item_height;\r\n        let final_height = ((parseInt(end_time[1]) / 60 + parseInt(end_time[0])) * props.item_height) - final_top;\r\n\r\n        let final_colors = [];\r\n        if (!multiple_users) {\r\n            // let new_data = {\r\n            //     value: props.shift,\r\n            //     color: set_status_color(props.shift.status)\r\n            // }\r\n            final_colors.push(set_status_color(props.shift.status));\r\n        } else {\r\n            for (const shift of props.shift) {\r\n                final_colors.push(set_status_color(shift.status));\r\n            }\r\n        }\r\n\r\n        output.top = final_top;\r\n        output.height = final_height;\r\n        output.colors = final_colors;\r\n\r\n        return output;\r\n    }\r\n    const properties = set_properties();\r\n\r\n    const ShiftModalContent = (props) => {\r\n        const multiple_data = Array.isArray(props.data);\r\n\r\n        const EmployeeItem = (props) => {\r\n            // console.log(props.data)\r\n            return (\r\n                <a \r\n                    href={props.data.status !== 'done' ? `/shifts/${props.data._id}` : \"#\"} \r\n                    className={`list-group-item list-group-item-action list-group-item-${set_status_color(props.data.status)}`}\r\n                >\r\n                    <div>\r\n                        <span>\r\n                            { \r\n                                check_if_manager(local_userData) ? \r\n                                `${props.data.worker.firstName} ${props.data.worker.lastName}`\r\n                                : 'Myself'\r\n                            }\r\n                        </span>\r\n                        <span>{props.data.status}</span>\r\n                    </div>\r\n                    { props.data.status !== 'done' ? <i className=\"fa fa-pencil\"></i> : <></>}\r\n                </a>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <table className=\"table table-striped table-bordered text-light mt-3\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Date</th>\r\n                            <td>{ multiple_data ? to_standard_date(props.data[0].date) : to_standard_date(props.data.date) }</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>Starting time</th>\r\n                            <td>{ multiple_data ? props.data[0].start_time : props.data.start_time }</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>Ending time</th>\r\n                            <td>{ multiple_data ? props.data[0].end_time : props.data.end_time }</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n                <h6 className=\"mt-4 mb-3\"><i className=\"fa fa-user\"></i> Employee(s)</h6>\r\n                <div className=\"list-group employee_list\">\r\n                    {\r\n                        multiple_data ? \r\n                        props.data.map((single_shift, index) => {\r\n                            return (\r\n                                <EmployeeItem data={single_shift} key={`single_employee_${index}`} />\r\n                            )\r\n                        })\r\n                        : \r\n                        <EmployeeItem data={props.data} />\r\n                    }\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const item_action = (shift_data) => {\r\n        // window.location.href=`/shifts/${props.shift._id}`;\r\n        ReactDOM.render(<ShiftModalContent data={shift_data} />, document.getElementById(\"edit_shift_modal_content\"))\r\n        open_custom_modal(\"edit_shift_modal\")\r\n    }\r\n\r\n    return (\r\n        <div \r\n            className={`shift_item ${multiple_users ? 'shift_item_multiple' : ''} rounded border`}\r\n            style={{ \"top\": properties.top, \"height\": properties.height }}\r\n            onClick={() => { item_action(props.shift) }}\r\n        >\r\n            {\r\n                multiple_users ? \r\n                properties.colors.map((color, index) => {\r\n                    return (<i className={`fa fa-user text-${color}`} key={`item_color_${index}`}></i>)\r\n                })\r\n                : <i className={`fa fa-user text-${properties.colors[0]}`}></i>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ShiftItem","import React from \"react\";\r\nimport { correct_day_of_week, compare_date_standard } from \"../../shared/functions/FormatDate\";\r\nimport ShiftItem from './ShiftItem';\r\n\r\nconst SingleDayShifts = (props) => {\r\n    const get_time_ranges = (all_shifts) => {\r\n        let time_ranges = []\r\n        for (const shift of all_shifts) {\r\n            let new_time_range = `${shift.start_time}-${shift.end_time}`;\r\n            if (!time_ranges.includes(new_time_range)) time_ranges.push(new_time_range);\r\n        }\r\n        return time_ranges;\r\n    }\r\n\r\n    const filter_shifts = () => {\r\n        let filtered_shifts = [];\r\n        for (const shift of props.shifts) {\r\n            let shift_date = new Date(shift.date);\r\n            for (const week_date of props.current_week) {\r\n                let day_of_week = correct_day_of_week(week_date.getDay());\r\n\r\n                if (compare_date_standard(shift_date, week_date) && day_of_week === props.current_day) {\r\n                    filtered_shifts.push(shift);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // console.log(filtered_shifts);\r\n\r\n        let final_shifts = [];\r\n        let time_ranges = get_time_ranges(filtered_shifts);\r\n        for (const time_range of time_ranges) {\r\n            let tempo_shifts = [];\r\n            for (const filtered_shift of filtered_shifts) {\r\n                let shift_time_range = `${filtered_shift.start_time}-${filtered_shift.end_time}`;\r\n                if (time_range === shift_time_range) tempo_shifts.push(filtered_shift);\r\n            }\r\n\r\n            if (tempo_shifts.length === 1) {\r\n                final_shifts.push(tempo_shifts[0]);\r\n            } else if (tempo_shifts.length > 1) {\r\n                final_shifts.push(tempo_shifts);\r\n            }\r\n        }\r\n        // console.log(final_shifts);\r\n\r\n        return final_shifts;\r\n    }\r\n\r\n    const shifts = filter_shifts();\r\n    return (\r\n        <>\r\n            {\r\n                shifts.length > 0 ? \r\n                shifts.map((shift, index) => {\r\n                    return (\r\n                        <ShiftItem key={`shift_item_${index}`} shift={shift} item_height={props.item_height} />\r\n                    )\r\n                })\r\n                : <></>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SingleDayShifts;","import React from \"react\";\r\nimport { CALENDAR, get_time_of_day_label, get_week_by_day } from \"../../shared/functions/FormatDate\";\r\nimport HourLine from \"./HourLine\";\r\nimport SingleDayShifts from \"./SingleDayShifts\";\r\n\r\nconst CalendarMainWrapper = (props) => {\r\n    const font_height = 16 * 0.85 / 2;\r\n    const item_height = CALENDAR.height_rate * 60;\r\n    const calendar_height = item_height * 24;\r\n    const time_of_day = get_time_of_day_label(item_height, true, item_height / 2 + font_height);\r\n    const current_week = get_week_by_day(props.currentUserDate);\r\n\r\n    return (\r\n        <div className=\"calendar_main_wrapper\">\r\n            <div className=\"time_of_day\" style={{ \"height\": `${calendar_height}px` }}>\r\n                {/* <HourLine item_height={item_height} /> */}\r\n                {\r\n                    time_of_day.map((time, index) => {\r\n                        if (index === 0) return <React.Fragment key={`time_label_${index}`}></React.Fragment>;\r\n                        return (\r\n                            <div className=\"single_time\" style={{ \"top\": time.top }} key={`time_label_${index}`}>\r\n                                {time.label}\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            \r\n            <div className=\"days_of_week\">\r\n                <HourLine item_height={item_height} />\r\n                <div className=\"days_of_week_content\">\r\n                    {\r\n                        CALENDAR.days_super_short.map((day, index) => {\r\n                            return (\r\n                                <div className=\"single_day_content\" key={`day_content_${index}`}>\r\n                                    <SingleDayShifts current_week={current_week} current_day={index} shifts={props.shifts} item_height={item_height} />\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CalendarMainWrapper;","import React, { useState, useEffect } from 'react';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\nimport { change_current_date, get_localstorage_current_date, set_localstorage_current_date } from '../../shared/functions/FormatDate';\r\n\r\nimport CalendarTopBar from './CalendarTopBar';\r\nimport WeekController from './WeekController';\r\nimport CalendarTitle from './CalendarTitle';\r\nimport CalendarMainWrapper from './CalendarMainWrapper';\r\nimport { CustomModal } from '../../shared/components/UIElements/CustomModal';\r\nimport './WeekCalendar.css';\r\n\r\nconst WeekCalendar = () => {\r\n    const [userDate, setUserDate] = useState(get_localstorage_current_date());\r\n    const [userShifts, setUserShifts] = useState([]);\r\n\r\n    const update_week = (days_step) => {\r\n        let new_date = change_current_date(userDate, days_step);\r\n        set_localstorage_current_date(new_date);\r\n        setUserDate(new_date);\r\n    }\r\n\r\n    const fetch_shifts = async (url, request_options) => {\r\n        var status_code;\r\n        await fetch(url, request_options)\r\n        .then(response => {\r\n            status_code = response.status;\r\n            return response.json()\r\n        })\r\n        .then(result => {\r\n            if (status_code === 200) {\r\n                // console.log(result);\r\n                setUserShifts(result.shifts);\r\n            }\r\n        })\r\n        .catch(error => console.log('error', error));\r\n    }\r\n\r\n    useEffect(() => {\r\n        let token = localStorage.getItem(\"logged_in_token\");\r\n        let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n        if (token && userData) {\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n            \r\n            if (userData.role === 'manager') {\r\n                fetch_shifts(`http://${get_ip(device_type)}:9000/shifts`, requestOptions)\r\n            } else {\r\n                fetch_shifts(`http://${get_ip(device_type)}:9000/shifts/${userData._id}`, requestOptions)\r\n            }\r\n        }\r\n    }, [userDate])\r\n\r\n    return (\r\n        <div className=\"calendar_page\">\r\n            <div className=\"calendar_wrapper\">\r\n                <CalendarTopBar currentUserDate={userDate} />\r\n                <WeekController update={update_week} currentUserDate={userDate} />\r\n                <div className=\"calender_inner_wrapper\">   \r\n                    <CalendarTitle currentUserDate={userDate} />\r\n                    <CalendarMainWrapper currentUserDate={userDate} shifts={userShifts} />\r\n                </div>\r\n                <div className=\"create_shift_section\">\r\n                    <button className=\"btn formBtn\" onClick={() => { window.location.href=`/shifts/create` }}>\r\n                        <i className=\"fa fa-plus mr-2\"></i><span>Create a new shift</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <CustomModal \r\n                id=\"edit_shift_modal\" \r\n                main_content_id=\"edit_shift_modal_content\"\r\n                title=\"Shift details\"\r\n                has_close_btn={true} \r\n                has_action_btn={false} \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default  WeekCalendar;","import React from 'react';\r\n\r\nimport WeekCalendar from '../components/WeekCalendar';\r\n\r\nconst Calendar = () => {\r\n    return <WeekCalendar />\r\n};\r\n\r\nexport default Calendar;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { get_local_user_data, sort_by_date, get_local_user_token } from '../../shared/functions/General';\r\nimport { to_standard_date } from '../../shared/functions/FormatDate';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\nimport { useForm } from \"react-hook-form\";\r\nimport Table from 'react-bootstrap/Table'\r\n\r\nimport './Wishlist.css';\r\n\r\nconst Wishlist = () => {\r\n    const [shiftData, setShiftData] = useState([]);\r\n    const localUser = get_local_user_data();\r\n    const user_id = localUser._id;\r\n\r\n    useEffect(() => {\r\n        const fetch_shifts = async () => {\r\n            let token = localStorage.getItem(\"logged_in_token\");\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n    \r\n            var status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/shifts/${user_id}`, requestOptions)\r\n            .then(response => {\r\n                status_code = response.status;\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (status_code === 200) {\r\n                    setShiftData(result.shifts);\r\n                }\r\n            })\r\n            .catch(error => console.log('error', error));\r\n        }\r\n        fetch_shifts();\r\n\r\n    }, [])\r\n\r\n    const delete_shift = async (props) => {\r\n        let token = get_local_user_token();\r\n        if (token) {\r\n            let myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n            let requestOptionsDelete = {\r\n                method: 'DELETE',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n\r\n            let status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/shifts/delete/${props}`, requestOptionsDelete)\r\n            .then(response => {\r\n                status_code = response.status;\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (status_code === 200) {\r\n                    console.log(result);\r\n                    alert('Deleted successfully!');\r\n                    if (props.type === 'quick') {\r\n                        // history.push(\"/\");\r\n                        window.location.href=\"/calendar\"\r\n                    } else {\r\n                        window.location.href=\"/timesheet\"\r\n                        // history.push(\"/users/employees\");\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log('error', error);\r\n                alert('Deleted failed!');\r\n            });\r\n        }\r\n    }\r\n\r\n    // useForm() hook\r\n    const { register } = useForm();\r\n\r\n    const [sortingValue, setSortingValue] = useState('by_date');\r\n\r\n    const handleChange = (e) => {\r\n        setSortingValue(e.target.value);\r\n    }\r\n\r\n    const display_shifts = () => {\r\n        const sorted_shift_data = sort_by_date(shiftData);\r\n        let sorted_shift_accepted = [];\r\n        let sorted_shift_pending = [];\r\n        let display_shifts = [];\r\n        let display_elements = [];\r\n        \r\n        if (sortingValue === 'by_date') {\r\n            for (const sorted_shift of sorted_shift_data) {\r\n                if (sorted_shift.status === 'accepted' || sorted_shift.status === 'pending') {\r\n                    display_shifts.push(sorted_shift);\r\n                }\r\n            }\r\n        } else if (sortingValue === 'by_status') {\r\n            for (const sorted_shift of sorted_shift_data) {\r\n                if (sorted_shift.status === 'pending') {\r\n                    sorted_shift_pending.push(sorted_shift);\r\n                }\r\n                if (sorted_shift.status === 'accepted') {\r\n                    sorted_shift_accepted.push(sorted_shift);\r\n                }\r\n            }\r\n            for (const pending of sorted_shift_pending) {\r\n                display_shifts.push(pending);\r\n            }\r\n            for (const accepted of sorted_shift_accepted) {\r\n                display_shifts.push(accepted);\r\n            }\r\n        }\r\n\r\n        for (const shift of display_shifts) {\r\n            let el = <tr key={shift._id}>\r\n                <td>{to_standard_date(shift.date)}</td>\r\n                <td>{shift.start_time}</td>\r\n                <td>{shift.end_time}</td>\r\n                <td><span className={`badge badge-pill ${(shift.status === 'accepted') ? 'badge-primary' : 'badge-warning'}`}>{shift.status}</span></td>\r\n                <td className=\"wishlist_actions\">{(shift.status === 'pending') ? \r\n                    <div className=\"wishlist_pending\">\r\n                        <button onClick={() => { delete_shift(`${shift._id}`) }}><i className=\"fas fa-trash-alt\"></i></button>\r\n                        <Link to={`/shifts/${shift._id}`}><i className=\"fas fa-edit\"></i></Link>\r\n                    </div> : <button onClick={() => { delete_shift(`${shift._id}`) }}><i className=\"fas fa-trash-alt\"></i></button> }\r\n                </td>\r\n            </tr>\r\n            display_elements.push(el);\r\n        } return display_elements;\r\n    } \r\n    \r\n    return <div className=\"wishlist_wrapper\">  \r\n        <div className=\"wishlist_controller\">\r\n            <button className=\"wishlist_btn btn mr-1 formBtn\" onClick={() => { window.location.href=\"/shifts/create\" }}>\r\n                <i className=\"fa fa-plus mr-2\"></i><span>New</span>\r\n            </button>\r\n            <form className=\"sort_by\">\r\n                <label>Sorted by:</label>\r\n                <select name=\"sorted_by\" {...register('sorted_by')} defaultValue={\"by_date\"} onChange={handleChange}>\r\n                    <option value=\"by_date\">Date</option>\r\n                    <option value=\"by_status\">Status</option>\r\n                </select>\r\n            </form>\r\n        </div>\r\n        <div className=\"wishlist_table\">\r\n            <Table striped bordered>\r\n                <thead>\r\n                    <tr>\r\n                        <td>Date</td>\r\n                        <td>Start</td>\r\n                        <td>End</td>\r\n                        <td>Status</td>\r\n                        <td>Actions</td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {display_shifts()}\r\n                </tbody>\r\n            </Table>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Wishlist;","import React, { useState, useEffect} from 'react';\r\nimport { get_local_user_data, sort_by_date, get_local_user_token } from '../../shared/functions/General';\r\nimport { to_standard_date, get_this_month, get_this_year, get_hour_as_number } from '../../shared/functions/FormatDate';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\nimport { useForm } from \"react-hook-form\";\r\nimport Table from 'react-bootstrap/Table'\r\n\r\nimport './Paycheck.css';\r\n\r\nconst Paycheck = () => {\r\n    const [shiftData, setShiftData] = useState([]);\r\n    const localUser = get_local_user_data();\r\n    const user_id = localUser._id;\r\n    const user_salary = localUser.salary;\r\n    // console.log(user_salary)\r\n\r\n    const this_year = new Date().getFullYear().toString();\r\n    const this_month = new Date().getMonth();\r\n\r\n    useEffect(() => {\r\n        const fetch_shifts = async () => {\r\n            let token = localStorage.getItem(\"logged_in_token\");\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n    \r\n            var status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/shifts/${user_id}`, requestOptions)\r\n            .then(response => {\r\n                status_code = response.status;\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (status_code === 200) {\r\n                    setShiftData(result.shifts);\r\n                }\r\n            })\r\n            .catch(error => console.log('error', error));\r\n        }\r\n        fetch_shifts();\r\n\r\n    }, [])\r\n\r\n    const { register } = useForm();\r\n\r\n    const [month, setMonth] = useState(`${this_month}`);\r\n\r\n    const handleChange = (e) => {\r\n        setMonth(e.target.value);\r\n    }\r\n\r\n    let month_salary = 0;\r\n\r\n    const display_shifts = () => {\r\n        const sorted_shift_data = sort_by_date(shiftData);\r\n        let sorted_shift_done = [];\r\n        let display_elements = [];\r\n        \r\n        for (const sorted_shift of sorted_shift_data) {\r\n            let shift_month = get_this_month(sorted_shift.date);\r\n            let shift_year = get_this_year(sorted_shift.date);\r\n            if ((sorted_shift.status === 'done') && (shift_month === month) && (shift_year === this_year)) {\r\n                sorted_shift_done.push(sorted_shift);\r\n            }\r\n        }       \r\n\r\n        for (const this_shift of sorted_shift_done) {\r\n            let start_shift = this_shift.start_time;\r\n            let end_shift = this_shift.end_time;\r\n            let start = get_hour_as_number(start_shift);\r\n            let end = get_hour_as_number(end_shift);\r\n            let work_hours = end - start;\r\n            month_salary += (work_hours * user_salary);\r\n        }\r\n\r\n        for (const shift of sorted_shift_done) {\r\n            let el = <tr key={shift._id}>\r\n                <td>{to_standard_date(shift.date)}</td>\r\n                <td>{shift.start_time}</td>\r\n                <td>{shift.end_time}</td>\r\n                <td><span className=\"badge badge-pill badge-success\">{shift.status}</span></td>\r\n            </tr>\r\n            display_elements.push(el);\r\n        } return display_elements;\r\n\r\n    } \r\n    \r\n    return <div className=\"wishlist_wrapper\">  \r\n        <div className=\"wishlist_controller\">\r\n            <p>{this_year}</p>\r\n            <form className=\"sort_by\">\r\n                <label>Month:</label>\r\n                <select name=\"month\" {...register('month')} defaultValue={`${this_month}`} onChange={handleChange}>\r\n                    <option value=\"1\">Jan</option>\r\n                    <option value=\"2\">Feb</option>\r\n                    <option value=\"3\">Mar</option>\r\n                    <option value=\"4\">Apr</option>\r\n                    <option value=\"5\">May</option>\r\n                    <option value=\"6\">Jun</option>\r\n                    <option value=\"7\">Jul</option>\r\n                    <option value=\"8\">Aug</option>\r\n                    <option value=\"9\">Sep</option>\r\n                    <option value=\"10\">Oct</option>\r\n                    <option value=\"11\">Nov</option>\r\n                    <option value=\"12\">Dec</option>\r\n                </select>\r\n            </form>\r\n        </div>\r\n        <div className=\"wishlist_table\">\r\n            <Table striped bordered>\r\n                <thead>\r\n                    <tr>\r\n                        <td>Date</td>\r\n                        <td>Start</td>\r\n                        <td>End</td>\r\n                        <td>Status</td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {display_shifts()}\r\n                </tbody>\r\n            </Table>\r\n        </div>\r\n        <div className=\"pay_check\">Brutto monthly salary: {`${month_salary}`} €</div>\r\n    </div>\r\n}\r\n\r\nexport default Paycheck;","import React from 'react';\r\n\r\nimport './Timesheet.css';\r\nimport Wishlist from '../wishlist/Wishlist';\r\nimport Paycheck from '../timesheet/Paycheck';\r\n\r\nconst Timesheet = () => {\r\n\r\n    return (\r\n        <div className=\"timesheet_wrapper\">\r\n            <nav className=\"nav nav-pills nav-fill\">\r\n                <a className=\"wishlist nav-item nav-link active\" href=\"#wishlist\" data-toggle=\"tab\">Wishlist</a>\r\n                <a className=\"finishedShifts nav-item nav-link\" href=\"#paycheck\" data-toggle=\"tab\">Paycheck</a>\r\n            </nav>\r\n            <div className=\"tab-content\" id=\"myTabContent\">\r\n                <div className=\"tab-pane fade show active\" id=\"wishlist\" role=\"tabpanel\" aria-labelledby=\"home-tab\"><Wishlist /></div>\r\n                <div className=\"tab-pane fade\" id=\"paycheck\" role=\"tabpanel\" aria-labelledby=\"profile-tab\"><Paycheck /></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Timesheet;","import React, { useState, useEffect } from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\nimport { to_raw_date, compare_date_standard } from '../../shared/functions/FormatDate';\r\nimport { isEmptyObject, get_local_user_token, get_local_user_data, check_if_manager } from '../../shared/functions/General';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\n\r\nconst ShiftForm = (props) => {\r\n    // Prepare data\r\n    const localUser = get_local_user_data();\r\n    const [employeeList, setEmployeeList] = useState([]);\r\n\r\n    const shift_data = props.data;\r\n    const worker = isEmptyObject(shift_data) ? localUser._id : shift_data.worker._id || shift_data.worker || localUser._id;\r\n    const shift_date = to_raw_date(shift_data.date);\r\n    const start_time = shift_data.start_time ? shift_data.start_time : '';\r\n    const end_time = shift_data.end_time ? shift_data.end_time : '';\r\n    const shift_time = start_time !== '' && end_time !== '' ? `${start_time}-${end_time}` : '';\r\n    const status = shift_data.status ? shift_data.status : 'pending';\r\n    const job = shift_data.job ? shift_data.job : '';\r\n\r\n    // form validation rules \r\n    const validationSchema = Yup.object().shape({\r\n        user_role: Yup.number(),\r\n        worker: Yup.string().when('user_role', {\r\n            is: 1,\r\n            then: Yup.string().required('Employee is required')\r\n        }),\r\n        shift_date: Yup.string().default(function () {\r\n                return new Date();\r\n            })\r\n            .matches(/^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/, 'Date must be a valid date in the format YYYY-MM-DD')\r\n            .required('Date is required'),\r\n        shift_time: Yup.string().required('Time is required'),\r\n        status: Yup.string().when('user_role', {\r\n            is: 1,\r\n            then: Yup.string().required('Time is required')\r\n        }),\r\n        job: Yup.string()\r\n    });\r\n    const formOptions = { resolver: yupResolver(validationSchema) };\r\n\r\n    // useForm() hook\r\n    const { register, handleSubmit, reset, formState } = useForm(formOptions);\r\n    const { errors } = formState;\r\n\r\n    const onSubmit = (data) => {\r\n        const check_if_days_off = async (shift_date, worker_id) => {\r\n            let is_days_off = false;\r\n            let token = get_local_user_token();\r\n            // let userData = {}\r\n            if (token) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n                let requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n        \r\n                let status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/users/${worker_id}`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        if (result.user_data.daysOff.length > 0) {\r\n                            let input_date = new Date(shift_date);\r\n                            console.log(\"===> input_date: \" + input_date);\r\n                            for (const daysoff of result.user_data.daysOff) {\r\n                                let user_daysoff = new Date(daysoff);\r\n                                if (compare_date_standard(input_date, user_daysoff)) {\r\n                                    console.log(\"===> user_daysoff: \" + user_daysoff);\r\n                                    is_days_off = true\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                            if (!is_days_off) {update_shift_by_id(data)}\r\n                            else { alert('Cannot have a shift on vacation day. Please choose another date!') }\r\n                        } else {\r\n                            update_shift_by_id(data)\r\n                        }\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            }\r\n        }\r\n\r\n        const update_shift_by_id = async (data) => {\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n                let final_start_time = data.shift_time.split(\"-\")[0];\r\n                let final_end_time = data.shift_time.split(\"-\")[1];\r\n                let final_data = {\r\n                    date: data.shift_date,\r\n                    job: data.job,\r\n                    start_time: final_start_time,\r\n                    end_time: final_end_time,\r\n                    status: data.status || status,\r\n                    worker: data.worker || worker\r\n                }\r\n                // console.log(final_data);\r\n\r\n                var raw = JSON.stringify(final_data);\r\n\r\n                if (!isEmptyObject(shift_data)) {   // update shift\r\n                    if (!check_if_manager(localUser) && final_data.status !== \"pending\") {\r\n                        alert(\"This shift has been approved/done and can't be updated anymore.\");\r\n                    } else {\r\n                        let requestOptionsPatch = {\r\n                            method: 'PATCH',\r\n                            headers: myHeaders,\r\n                            body: raw,\r\n                            redirect: 'follow'\r\n                        };\r\n                        \r\n                        let status_code;\r\n                        await fetch(`http://${get_ip(device_type)}:9000/shifts/${shift_data._id}`, requestOptionsPatch)\r\n                        .then(response => {\r\n                            status_code = response.status;\r\n                            // console.log(response);\r\n                            return response.json()\r\n                        })\r\n                        .then(result => {\r\n                            if (status_code === 200) {\r\n                                console.log(result);\r\n                                // alert('Updated successfully!');\r\n                                if (props.type === 'quick') {\r\n                                    window.location.href=\"/calendar\"\r\n                                } else {\r\n                                    window.location.href=\"/timesheet\"\r\n                                }\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            console.log('error', error);\r\n                            alert('Updated failed!');\r\n                        });\r\n                    }\r\n                } else {    // Create shift\r\n                    // let raw = JSON.stringify(final_data);\r\n                    let requestOptionsPost = {\r\n                        method: 'POST',\r\n                        headers: myHeaders,\r\n                        body: raw,\r\n                        redirect: 'follow'\r\n                    };\r\n        \r\n                    let status_code;\r\n                    await fetch(`http://${get_ip(device_type)}:9000/shifts`, requestOptionsPost)\r\n                    .then(response => {\r\n                        status_code = response.status;\r\n                        // console.log(response);\r\n                        return response.json()\r\n                    })\r\n                    .then(result => {\r\n                        if (status_code === 201) {\r\n                            console.log(result);\r\n                            // alert('Created successfully!');\r\n                            if (props.type === 'quick') {\r\n                                window.location.href=\"/calendar\"\r\n                            } else {\r\n                                window.location.href=\"/timesheet\"\r\n                            }\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.log('error', error);\r\n                        alert('Created failed!');\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        // update_shift_by_id(data);\r\n        check_if_days_off(data.shift_date, data.worker || worker)\r\n    }\r\n\r\n    const delete_shift = async () => {\r\n        let token = get_local_user_token();\r\n        if (token) {\r\n            let myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n            let requestOptionsDelete = {\r\n                method: 'DELETE',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n\r\n            let status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/shifts/delete/${shift_data._id}`, requestOptionsDelete)\r\n            .then(response => {\r\n                status_code = response.status;\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (status_code === 200) {\r\n                    console.log(result);\r\n                    alert('Deleted successfully!');\r\n                    if (props.type === 'quick') {\r\n                        // history.push(\"/\");\r\n                        window.location.href=\"/calendar\"\r\n                    } else {\r\n                        window.location.href=\"/timesheet\"\r\n                        // history.push(\"/users/employees\");\r\n                    }\r\n                }\r\n\r\n                if (status_code === 500) {\r\n                    alert(result.message)\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log('error', error);\r\n                alert('Deleted failed!');\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetch_all_employees = async () => {\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                let myHeaders = new Headers();\r\n                myHeaders.append(\"manager_id\", localUser._id ? localUser._id : '');\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n                let requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n    \r\n                let status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/users/employees`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        let all_employees = result.users;\r\n                        all_employees.unshift(localUser);\r\n                        setEmployeeList(all_employees);\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            }\r\n        }\r\n\r\n        fetch_all_employees();\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"signupFormContainer\">\r\n            <h4>{ isEmptyObject(shift_data) ? \"Create a shift\" : \"Update shift\" }</h4>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <input name=\"user_role\" type=\"hidden\" {...register('user_role')} value={check_if_manager(localUser) ? 1 : 0} />\r\n\r\n                {/* Select employee */}\r\n                {\r\n                    employeeList.length > 0 ?\r\n                    <div className={ check_if_manager(localUser) ? '' : 'd-none' }>\r\n                        <label>Employee</label>\r\n                        <select \r\n                            id=\"shift_form_select_employee\"\r\n                            defaultValue={worker}\r\n                            name=\"worker\" \r\n                            {...register('worker')} \r\n                            className={`form-control ${errors.worker ? 'is-invalid' : ``}`} \r\n                            disabled={check_if_manager(localUser) ? false : true}\r\n                        >\r\n                            {\r\n                                employeeList.map((employee, index) => {\r\n                                    return (\r\n                                        <option key={`select_employee_${index}`} value={employee._id}>\r\n                                            {employee._id === localUser._id ? 'Myself' : `${employee.firstName} ${employee.lastName}`}\r\n                                        </option>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </select>\r\n                        <div className=\"invalid-feedback\">{errors.worker?.message}</div>\r\n                    </div>\r\n                    : <></>\r\n                }\r\n\r\n                {/* Choose date */}\r\n                <div>\r\n                    <label>Date</label>\r\n                    <input name=\"shift_date\" type=\"date\" {...register('shift_date')} className={`form-control ${errors.shift_date ? 'is-invalid' : ''}`} defaultValue={shift_date} />\r\n                    <div className=\"invalid-feedback\">{errors.shift_date?.message}</div>\r\n                </div>\r\n\r\n                {/* Select shift/time */}\r\n                <div>\r\n                    <label>Time</label>\r\n                    <select \r\n                        name=\"shift_time\" \r\n                        {...register('shift_time')} \r\n                        className={`form-control ${errors.shift_time ? 'is-invalid' : ``}`} \r\n                        defaultValue={shift_time}\r\n                    >\r\n                        <option value=\"\">Please choose a shift</option>\r\n                        <option value=\"06:00-10:00\">06:00 - 10:00</option>\r\n                        <option value=\"10:00-14:00\">10:00 - 14:00</option>\r\n                        <option value=\"14:00-18:00\">14:00 - 18:00</option>\r\n                        <option value=\"18:00-22:00\">18:00 - 22:00</option>\r\n                    </select>\r\n                    <div className=\"invalid-feedback\">{errors.shift_time?.message}</div>\r\n                </div>\r\n\r\n                {/* Set status */}\r\n                <div className={ check_if_manager(localUser) ? '' : 'd-none' }>\r\n                    <label>Status</label>\r\n                    <select \r\n                        name=\"status\" \r\n                        {...register('status')} \r\n                        className={`form-control ${errors.status ? 'is-invalid' : ``}`} \r\n                        disabled={check_if_manager(localUser) ? false : true}\r\n                        defaultValue={status}\r\n                    >\r\n                        <option value=\"pending\">Pending</option>\r\n                        <option value=\"accepted\">Accepted</option>\r\n                        <option value=\"done\">Done</option>\r\n                    </select>\r\n                    <div className=\"invalid-feedback\">{errors.status?.message}</div>\r\n                </div>\r\n\r\n                {/* Job/Description (not required) */}\r\n                <div>\r\n                    <label>Job</label>\r\n                    <input name=\"job\" type=\"text\" {...register('job')} className={`form-control ${errors.job ? 'is-invalid' : ''}`} defaultValue={job} />\r\n                    <div className=\"invalid-feedback\">{errors.job?.message}</div>\r\n                </div>\r\n\r\n                {/* Action buttons */}\r\n                <div className=\"action_buttons\">\r\n                    <div className=\"left_btns\">\r\n                        <button type=\"submit\" className=\"btn mr-1 formBtn\">Apply</button>\r\n                        <button type=\"button\" onClick={() => reset()} className=\"btn btn-secondary\">Reset</button>\r\n                    </div>\r\n                    <div className=\"right_btns\">\r\n                        { status !== 'done' && !isEmptyObject(shift_data) ? \r\n                            <button type=\"button\" onClick={() => { delete_shift() }} className=\"btn btn-outline-danger\">Delete</button>\r\n                        : <></>}\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ShiftForm;","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\nimport { get_local_user_token } from '../../shared/functions/General';\r\n\r\nimport ShiftForm from '../components/ShiftForm';\r\n\r\nconst ShiftDetails = (props) => {\r\n    const [shiftData, setShiftData] = useState();\r\n    let shift_id = useParams().id;\r\n\r\n    useEffect(() => {\r\n        const fetch_shift_details = async () => {\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                if (!shiftData && shift_id !== 'create') {\r\n                    var myHeaders = new Headers();\r\n                    myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                    var requestOptions = {\r\n                        method: 'GET',\r\n                        headers: myHeaders,\r\n                        redirect: 'follow'\r\n                    };\r\n            \r\n                    var status_code;\r\n                    await fetch(`http://${get_ip(device_type)}:9000/shifts/shift/${shift_id}`, requestOptions)\r\n                    .then(response => {\r\n                        status_code = response.status;\r\n                        return response.json()\r\n                    })\r\n                    .then(result => {\r\n                        if (status_code === 200) {\r\n                            // console.log(result);\r\n                            setShiftData(result.shift);\r\n                        }\r\n                    })\r\n                    .catch(error => console.log('error', error));\r\n                } else {\r\n                    setShiftData({});\r\n                }\r\n            }\r\n        }\r\n        \r\n        fetch_shift_details();\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            { shiftData ?\r\n                <ShiftForm data={shiftData} type=\"full\" /> : <></>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ShiftDetails;","import React, { useState } from \"react\";\r\nimport { get_ip, device_type } from \"../../shared/components/localhost\";\r\nimport { sort_by_date_from_db, get_local_user_token } from '../../shared/functions/General';\r\nimport { to_standard_date, get_this_year_only, to_raw_date } from \"../../shared/functions/FormatDate\";\r\n\r\nconst DaysOffList = (props) => {\r\n    const filter_daysoff = () => {\r\n        let userData = props.userData;\r\n        let count = userData.daysOffCount || 24;\r\n        let list = userData.daysOff || [];\r\n        let sorted_list = sort_by_date_from_db(list);\r\n\r\n        function get_years(dates_list) {\r\n            let years = [];\r\n            let tempo_year = 0;\r\n            for (const date_str of dates_list) {\r\n                let new_date = new Date(date_str);\r\n                let new_year = new_date.getFullYear();\r\n                if (!years.includes(new_year)) {\r\n                    years.push(new_year)\r\n                }\r\n            }\r\n\r\n            // console.log(years);\r\n            return years;\r\n        }\r\n\r\n        return { \r\n            count: count, \r\n            years: get_years(sorted_list), \r\n            list: sorted_list\r\n        };\r\n    }\r\n    const daysOffData = filter_daysoff();\r\n\r\n    const delete_daysoff = async (raw_date) => {\r\n        let token = get_local_user_token();\r\n        if (token) {\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n            myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n            var raw = JSON.stringify({ \"dates\": [raw_date] });\r\n\r\n            var requestOptions = {\r\n                method: 'PATCH',\r\n                headers: myHeaders,\r\n                body: raw,\r\n                redirect: 'follow'\r\n            };\r\n\r\n            let status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/users/${props.userData._id}/daysoff/delete`, requestOptions)\r\n            .then(response => {\r\n                status_code = response.status;\r\n                // console.log(response);\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (status_code === 200) {\r\n                    // console.log(result);\r\n                    alert('Deleted successfully!');\r\n                    props.update_userData(result.edited_user);\r\n                }\r\n\r\n                if (status_code === 500) {\r\n                    alert(result.message);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log('error', error);\r\n                alert('Deleted failed!');\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ul id=\"year_accordion\" className=\"year_list list-group border\">\r\n                {\r\n                    daysOffData.years.length > 0 ? \r\n                    daysOffData.years.map((year, y_index) => {\r\n                        return(\r\n                            <li className=\"year_item\" key={`year_${y_index}`}>\r\n                                <a href={`#year_item_${y_index}`} \r\n                                    className=\"year_item_link list-group-item list-group-item-action list-group-item-primary\" \r\n                                    data-toggle=\"collapse\"\r\n                                >\r\n                                    <span className=\"title\">{`Days-off in ${year}`}</span>\r\n                                    <i className=\"icon fa fa-chevron-down arrow_rotate\"></i>\r\n                                </a>\r\n                                <div id={`year_item_${y_index}`} className={`collapse ${get_this_year_only() === year ? 'show' : ''}`} data-parent=\"#year_accordion\">\r\n                                    <div className=\"card-body\">\r\n                                        { \r\n                                            daysOffData.list.length > 0 ?\r\n                                            daysOffData.list.map((daysoff, d_index) => {\r\n                                                let new_date = new Date(daysoff);\r\n                                                let pretty_date = to_standard_date(daysoff); // DD-MM-YYYY\r\n                                                let raw_date = to_raw_date(daysoff); // YYYY-MM-DD\r\n                                                let base_year = new_date.getFullYear();\r\n                                                // let base_month = new_date.getMonth();\r\n                                                // let base_date = new_date.getDate()\r\n\r\n                                                if (base_year !== year) return null;\r\n\r\n                                                return (\r\n                                                    <div className=\"input-group input-group-sm mb-1\" key={`daysoff_group_${d_index}`}>\r\n                                                        <input type=\"text\" className=\"form-control shadow-none\" value={pretty_date} readOnly={true} />\r\n                                                        <div className=\"input-group-append\">\r\n                                                            <button className=\"btn btn-outline-danger shadow-none\" type=\"button\" onClick={() => { delete_daysoff(raw_date) }}>\r\n                                                                <i className=\"fa fa-times\"></i>\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )\r\n                                            }) : null\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        )\r\n                    })\r\n                    : <li class=\"list-group-item list-group-item-warning\"><i class=\"fa fa-exclamation-circle\"></i> No days-off found.</li>\r\n                }\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default DaysOffList;","import React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\nimport { isEmptyObject, get_local_user_token, get_local_user_data, check_if_manager } from '../../shared/functions/General';\r\n\r\n\r\nconst AddDaysOff = (props) => {\r\n    // form validation rules \r\n    const validationSchema = Yup.object().shape({\r\n        from_date: Yup.string().required('Single / From date is required'),\r\n        to_date: Yup.string()\r\n    });\r\n    const formOptions = { resolver: yupResolver(validationSchema) };\r\n\r\n    // useForm() hook\r\n    const { register, handleSubmit, reset, formState } = useForm(formOptions);\r\n    const { errors } = formState;\r\n\r\n    const onSubmit = (data) => {\r\n        const create_daysoff = async (data) => {\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n                var raw = JSON.stringify(data);\r\n\r\n                var requestOptions = {\r\n                    method: 'PATCH',\r\n                    headers: myHeaders,\r\n                    body: raw,\r\n                    redirect: 'follow'\r\n                };\r\n\r\n                let status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/users/${props.userData._id}/daysoff/create`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    // console.log(response);\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        // console.log(result);\r\n                        alert('Added successfully!');\r\n                        props.update_userData(result.edited_user);\r\n                    }\r\n\r\n                    if (status_code === 500) {\r\n                        alert(result.message);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.log('error', error);\r\n                    alert('Added failed!');\r\n                });\r\n            }\r\n        }\r\n        create_daysoff(data);\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            {/* Choose a single / from date */}\r\n            <div>\r\n                <label>Single / From date</label>\r\n                <input name=\"from_date\" type=\"date\" {...register('from_date')} className={`form-control ${errors.from_date ? 'is-invalid' : ''}`} />\r\n                <div className=\"invalid-feedback\">{errors.from_date?.message}</div>\r\n            </div>\r\n\r\n            {/* Choose to date */}\r\n            <div>\r\n                <label>To date</label>\r\n                <input name=\"to_date\" type=\"date\" {...register('to_date')} className={`form-control ${errors.to_date ? 'is-invalid' : ''}`} />\r\n                <div className=\"invalid-feedback\">{errors.to_date?.message}</div>\r\n            </div>\r\n\r\n            {/* Action buttons */}\r\n            <div className=\"action_buttons mt-4\">\r\n                <div className=\"left_btns\">\r\n                    <button type=\"submit\" className=\"btn btn-success mr-1\">Apply</button>\r\n                    <button type=\"button\" onClick={() => reset()} className=\"btn btn-secondary\">Reset</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default AddDaysOff;","import React, { useState } from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport { get_local_user_data, update_local_user_data } from '../../shared/functions/General';\r\nimport { CustomModal, open_custom_modal, close_custom_modal } from '../../shared/components/UIElements/CustomModal';\r\nimport DaysOffList from '../components/DaysOffList';\r\nimport AddDaysOff from '../components/AddDaysOff';\r\n\r\nimport './DaysOff.css';\r\n\r\nconst Daysoff = () => {\r\n    const [userData, setuserData] = useState(get_local_user_data());\r\n\r\n    const update_userData = (new_data) => {\r\n        update_local_user_data(new_data);\r\n        setuserData(new_data);\r\n        close_custom_modal(\"create_daysoff_modal\");\r\n        // console.log(new_data);\r\n    }\r\n\r\n    const modal_action = () => {\r\n        ReactDOM.render(<AddDaysOff userData={userData} update_userData={update_userData} />, document.getElementById(\"create_daysoff_modal_content\"))\r\n        open_custom_modal(\"create_daysoff_modal\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"daysoff_page\">\r\n            <div className=\"daysoff_wrapper\">\r\n                <div className=\"title_section\">Your days-off</div>\r\n                \r\n                <div className=\"main_content\">\r\n                    <DaysOffList userData={userData} update_userData={update_userData} />\r\n                </div>\r\n                \r\n                <div className=\"add_days_off_section\">\r\n                    <button className=\"btn formBtn\" onClick={() => { modal_action() }}>\r\n                        <i className=\"fa fa-plus mr-2\"></i><span>Add days-off</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <CustomModal\r\n                id=\"create_daysoff_modal\" \r\n                main_content_id=\"create_daysoff_modal_content\"\r\n                title=\"Add days-off\"\r\n                has_footer={false} \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Daysoff;","import React, { useState, useEffect } from 'react';\r\nimport QRCode from 'qrcode';\r\nimport { get_local_user_data, get_local_user_token } from '../../shared/functions/General';\r\n\r\nimport './QRCodePage.css';\r\n\r\nconst QRCodeViewerPage = () => {\r\n    const [qrCodeURL, setqrCodeURL] = useState();\r\n    const userData = get_local_user_data();\r\n\r\n    useEffect(() => {\r\n        const get_qr_code = async () => {\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                // https://www.npmjs.com/package/qrcode\r\n                try {\r\n                    const image_data = await QRCode.toDataURL(userData._id, {version: 10});\r\n                    // console.log(image_data)\r\n                    setqrCodeURL(image_data);\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n            }\r\n        }\r\n        get_qr_code();\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"qrcode_page\">\r\n            <div className=\"qrcode_wrapper\">\r\n                <div className=\"title_section\">Your QR Code</div>\r\n                \r\n                <div className=\"main_content\">\r\n                    {\r\n                        qrCodeURL ? <img className=\"border p-2\" src={qrCodeURL} /> : <div className=\"spinner-border text-primary\"></div>\r\n                    }\r\n                </div>\r\n                \r\n                <div className=\"buttons_section\">\r\n                    {\r\n                        userData.role === 'manager' ? \r\n                        <button className=\"btn formBtn\" onClick={() => { window.location.href=\"/qrcodescanner\" }}>\r\n                            <i className=\"fa fa-qrcode mr-2\"></i><span>Scan QR Code</span>\r\n                        </button> : <span className=\"text-info font-italic\">Let QR Code scanned to check-in to your shift.</span>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default QRCodeViewerPage;","import React, { useState } from 'react';\r\nimport QrReader from 'react-qr-reader';\r\nimport { get_local_user_data, get_local_user_token } from '../../shared/functions/General';\r\nimport { to_raw_date, to_raw_time, is_time_in_range, compare_date_standard } from '../../shared/functions/FormatDate';\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\n\r\nimport './QRCodePage.css';\r\n\r\nconst QRCodeScannerPage = () => {\r\n    const [qrCodeData, setrCodeData] = useState();\r\n    const userData = get_local_user_data();\r\n\r\n    const update_shift_by_id = async (found_shift) => {\r\n        if (found_shift.status === \"done\") {\r\n            alert(\"This employee has already checked-in the current shift.\");\r\n        } else {\r\n            let token = get_local_user_token();\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n            myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n            let new_data = {\r\n                date: to_raw_date(new Date(found_shift.date)),\r\n                job: found_shift.job,\r\n                start_time: found_shift.start_time,\r\n                end_time: found_shift.end_time,\r\n                status: \"done\",\r\n                worker: found_shift.worker\r\n            }\r\n\r\n            let requestOptionsPatch = {\r\n                method: 'PATCH',\r\n                headers: myHeaders,\r\n                body: JSON.stringify(new_data),\r\n                redirect: 'follow'\r\n            };\r\n            \r\n            let update_status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/shifts/${found_shift._id}`, requestOptionsPatch)\r\n            .then(response => {\r\n                update_status_code = response.status;\r\n                // console.log(response);\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (update_status_code === 200) {\r\n                    console.log(result);\r\n                    alert('Check-in successfully!');\r\n                    window.location.href=\"/calendar\"\r\n                } else {\r\n                    alert('Check-in failed!');\r\n                    window.location.href=\"/qrcodeviewer\";\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log('error', error);\r\n                alert('There are technical error, please try again later!');\r\n                window.location.href=\"/qrcodeviewer\";\r\n            });\r\n        }\r\n    }\r\n\r\n    const update_shift_status = async (user_id) => {\r\n        let token = get_local_user_token();\r\n        let date_now = new Date();\r\n        let time_now = to_raw_time(date_now);\r\n\r\n        if (token) {\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n            let requestOptionsGet = {\r\n                method: 'GET',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n            \r\n            // First get all shifts by user ID\r\n            var status_code;\r\n            await fetch(`http://${get_ip(device_type)}:9000/shifts/${user_id}`, requestOptionsGet)\r\n            .then(response => {\r\n                status_code = response.status;\r\n                return response.json()\r\n            })\r\n            .then(result => {\r\n                if (status_code === 200) {\r\n                    // Then Check if the moment after scanning of QR Code is in any shift\r\n                    let user_shifts = result.shifts;\r\n                    console.log(user_shifts);\r\n\r\n                    if (user_shifts) {\r\n                        // Find a shift at the moment of scanning\r\n                        let found_shift;\r\n                        for (const user_shift of user_shifts) {\r\n                            console.log(compare_date_standard(date_now, new Date(user_shift.date)));\r\n                            if (compare_date_standard(date_now, new Date(user_shift.date)) && \r\n                                is_time_in_range(time_now, user_shift.start_time, user_shift.end_time)) \r\n                            {\r\n                                found_shift = user_shift;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        // If a shift was found, then starting to update its status\r\n                        if (found_shift) {\r\n                            update_shift_by_id(found_shift);\r\n                        } else {\r\n                            alert(\"This employee doesn't have a shift right now!\");\r\n                            window.location.href=\"/qrcodeviewer\";\r\n                        }\r\n                    } else {\r\n                        alert(\"This employee hasn't had any shifts yet!\");\r\n                        window.location.href=\"/qrcodeviewer\";\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => console.log('error', error));\r\n        }\r\n    }\r\n\r\n    const handleScan = (data) => {\r\n        if (data) {\r\n            console.log(data);\r\n            update_shift_status(data);\r\n        }\r\n    }\r\n\r\n    const handleError = (err) => {\r\n        alert(\"Unable to access the camera!\")\r\n        console.error(err);\r\n    }\r\n\r\n    return (\r\n        <div className=\"qrcode_page\">\r\n            <div className=\"qrcode_wrapper\">\r\n                <div className=\"title_section\">QR Code Scanner</div>\r\n                \r\n                <div className=\"main_content\">\r\n                    <QrReader\r\n                        delay={300}\r\n                        onError={handleError}\r\n                        onScan={handleScan}\r\n                        style={{ width: '100%' }}\r\n                    />\r\n                </div>\r\n                \r\n                <div className=\"buttons_section\">\r\n                    <span className=\"text-info font-italic\">Hold your camera over a QR Code to scan...</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default QRCodeScannerPage;","import React, { useState, useEffect } from 'react';\r\n\r\nimport { get_local_user_data, get_local_user_token } from '../shared/functions/General';\r\nimport { to_raw_date } from '../shared/functions/FormatDate';\r\nimport { get_ip, device_type } from '../shared/components/localhost';\r\n\r\nimport './ShiftToday.css';\r\n\r\nconst ShiftToday = () => {\r\n    const [shiftData, setShiftData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetch_shift_today = async () => {\r\n            const localUser = get_local_user_data();\r\n            const user_id = localUser._id;\r\n\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                var requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n        \r\n                var status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/shifts/${user_id}`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        setShiftData(result.shifts);\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            }\r\n        }\r\n        fetch_shift_today();\r\n\r\n    }, [])\r\n\r\n    const compare_dates = () => {\r\n        let today_raw = new Date();\r\n        let today = to_raw_date(today_raw);\r\n        let shifts_today = [];\r\n        let today_job, today_start, today_end, shift_status;\r\n        for (const shift_today of shiftData) {\r\n            let shift_date_raw = shift_today.date;\r\n            let shift_date = to_raw_date(shift_date_raw);\r\n            if (today === shift_date) {\r\n                shifts_today.push(shift_today);\r\n                today_job = shift_today.job;\r\n                today_start = shift_today.start_time;\r\n                today_end = shift_today.end_time;\r\n                shift_status = shift_today.status;\r\n            }\r\n        } \r\n        \r\n        if (shifts_today.length === 0 || \r\n            (shifts_today.length === 1 && shift_status === 'pending') || \r\n            (shifts_today.length === 1 && shift_status === 'denied') \r\n            ) {\r\n            return <div className=\"work_day\">\r\n                <div>\r\n                    <p>You are free today!</p>\r\n                    <p>Just sit back and relax!</p>\r\n                </div>\r\n                <img src={`${process.env.PUBLIC_URL}/icons/no-work-day.gif`} alt=\"free day\"/>\r\n            </div>\r\n        } if (shifts_today.length === 1 && shift_status === 'accepted') {\r\n            return <div className=\"work_day\">\r\n                <div>\r\n                    <p>It's work day today!</p>\r\n                    <p>Your job: {today_job} <br />\r\n                    Time: from {today_start} to {today_end}</p>\r\n                </div>\r\n                <img src={`${process.env.PUBLIC_URL}/icons/work-alarm.gif`} alt=\"work alarm\"/>\r\n            </div>\r\n        } if (shifts_today.length === 1 && shift_status === 'done') {\r\n            return <div className=\"work_day\">\r\n            <div>\r\n                <p>You have done your job today!</p>\r\n                <p>Just sit back and relax!</p>\r\n            </div>\r\n            <img src={`${process.env.PUBLIC_URL}/icons/shift-done.gif`} alt=\"shift done\"/>\r\n        </div>\r\n        } if (shifts_today.length === 2) {\r\n            let shift_1 = shifts_today[0];\r\n            let shift_2 = shifts_today[1];\r\n            if (shift_1.status === 'accepted' || shift_2.status === 'accepted') {\r\n                return <div className=\"work_day\">\r\n                <div>\r\n                    <p>It's work day today!</p>\r\n                    <p>Your job: {shift_1.job}<br />\r\n                    Time: from {shift_1.start_time} to {shift_1.end_time}</p>\r\n                    <p>Your job: {shift_2.job}<br />\r\n                    Time: from {shift_2.start_time} to {shift_2.end_time}</p>\r\n                </div>\r\n                <img src={`${process.env.PUBLIC_URL}/icons/work-alarm.gif`} alt=\"work alarm\"/>\r\n            </div>\r\n            }\r\n            if (shift_1.status === 'done' || shift_2.status === 'done') {\r\n                return <div className=\"work_day\">\r\n                <div>\r\n                    <p>You have done your job today!</p>\r\n                    <p>Just sit back and relax!</p>\r\n                </div>\r\n                <img src={`${process.env.PUBLIC_URL}/icons/shift-done.gif`} alt=\"shift done\"/>\r\n            </div>\r\n            }\r\n        } else return <div className=\"work_day\">\r\n            <div>\r\n                <p>You are free today!</p>\r\n                <p>Just sit back and relax!</p>\r\n            </div>\r\n            <img src={`${process.env.PUBLIC_URL}/icons/no-work-day.gif`} alt=\"free day\"/>\r\n        </div>\r\n    }\r\n\r\n    return <div className=\"shift_today_wrapper\">        \r\n        {compare_dates()}\r\n    </div>\r\n}\r\n\r\nexport default ShiftToday;","import React, { useState, useEffect } from 'react';\r\n\r\nimport { get_local_user_data, get_local_user_token, sort_by_date } from '../shared/functions/General';\r\nimport { to_standard_date, compare_date_standard } from '../shared/functions/FormatDate';\r\nimport { get_ip, device_type } from '../shared/components/localhost';\r\n\r\nimport './UpcomingShifts.css';\r\n\r\nconst UpcomingShifts = (props) => {\r\n    const [shiftData, setShiftData] = useState([]);\r\n\r\n    const get_upcomming_shifts = (shift_data, max_shifts) => {\r\n        let final_shifts = [];\r\n        let sorted_shift_data = sort_by_date(shift_data);\r\n        let today_obj = { today: true, date: new Date() };\r\n\r\n        for (let index = 0; index < sorted_shift_data.length; index++) {\r\n            let tempo_arr = [];\r\n            tempo_arr.push(today_obj, sorted_shift_data[index]);\r\n            let sorted_tempo = sort_by_date(tempo_arr);\r\n\r\n            if (sorted_tempo[0].hasOwnProperty(\"today\") && \r\n                !compare_date_standard(new Date(sorted_tempo[0].date), new Date(sorted_tempo[1].date))) {\r\n                let difference = sorted_shift_data.length - index;\r\n                let max_loop = difference >= 0 && difference <= max_shifts ? sorted_shift_data.length : index + max_shifts;\r\n\r\n                for (let final_index = index; final_index < max_loop; final_index++) {\r\n                    let final_shift = sorted_shift_data[final_index];\r\n                    if (final_shift.status === 'accepted') final_shifts.push(sorted_shift_data[final_index]);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        \r\n        return final_shifts;\r\n    }\r\n\r\n    const NextShifts = (props) => {\r\n        let upcomingShifts = get_upcomming_shifts(props.data, 5);\r\n\r\n        return (\r\n            <>\r\n                {\r\n                    upcomingShifts.length > 0 ? \r\n                    upcomingShifts.map((shift, index) => {\r\n                        return(\r\n                            <div className=\"upcoming_shift\" id={shift._id} key={`upcoming_${index}`}>\r\n                                <p className=\"upcoming_shift_date\">{to_standard_date(shift.date)}</p>\r\n                                <div className=\"upcoming_shift_info\">\r\n                                    <p>Your job: {shift.job}<br/>\r\n                                    Starts at: {shift.start_time} &nbsp; &nbsp; / &nbsp; &nbsp; ends at: {shift.end_time}</p>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                    : \r\n                    <div className=\"no_upcoming_shifts\">\r\n                        <div className=\"no_upcoming_shifts_text\">\r\n                            <p>You don't have any shifts awaiting <i className=\"far fa-grin-beam-sweat\"></i></p>\r\n                            <p>Apply for work by adding shifts to wishlist</p>\r\n                        </div>\r\n                        <button className=\"add_to_wishlist_btn btn mr-1 formBtn\" onClick={() => { window.location.href=\"/shifts/create\" }}>\r\n                            <i className=\"fa fa-plus mr-2\"></i><span>Add shifts to wishlist</span>\r\n                        </button>\r\n                    </div>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetch_shift_today = async () => {\r\n            const localUser = get_local_user_data();\r\n            const user_id = localUser._id;\r\n            let token = get_local_user_token();\r\n            if (token) {\r\n                let myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                let requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n        \r\n                let status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/shifts/${user_id}`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    // console.log(response);\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        // console.log(result);\r\n                        setShiftData(result.shifts);\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            }\r\n        }\r\n\r\n        fetch_shift_today();\r\n    }, [])\r\n    \r\n    return <div className=\"upcoming_shifts_wrapper\">  \r\n        <h5>Upcoming shifts</h5>\r\n        <div className=\"upcoming_shifts_container\">\r\n            <NextShifts data={shiftData} />\r\n        </div>   \r\n    </div>\r\n}\r\n\r\nexport default UpcomingShifts;","import React from 'react';\r\nimport ShiftToday from './ShiftToday';\r\nimport UpcomingShifts from './UpcomingShifts';\r\n\r\nimport './Home.css';\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div className=\"home_wrapper\">\r\n            <ShiftToday />\r\n            <UpcomingShifts />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;","import React, { useEffect } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\n\r\nimport { get_local_user_data, update_local_user_data, get_local_user_token } from './shared/functions/General';\r\nimport NavHeader from './shared/components/Navigation/NavHeader';\r\nimport NavFooter from './shared/components/Navigation/NavFooter';\r\nimport { get_ip, device_type } from './shared/components/localhost';\r\n\r\nimport Users from './users/pages/Users';\r\nimport About from './places/pages/About';\r\nimport UserProfile from './users/pages/UserProfile';\r\nimport Calendar from './calendar/pages/Calendar';\r\nimport Timesheet from './shifts/pages/Timesheet';\r\nimport ShiftDetails from './shifts/pages/ShiftDetails';\r\nimport DaysOff from './daysoff/pages/DaysOff';\r\nimport QRCodeViewerPage from './qrcode/pages/QRCodeViewerPage';\r\nimport QRCodeScannerPage from './qrcode/pages/QRCodeScannerPage';\r\nimport Home from './home/Home';\r\n\r\nconst Main = (props) => {\r\n    useEffect(() => {\r\n        // console.log(\"Getting user data...\")\r\n        const fetch_user_profile = async () => {\r\n            let localUser = get_local_user_data();\r\n            let token = get_local_user_token();\r\n            if (token && localUser) {\r\n                var myHeaders = new Headers();\r\n                myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n                var requestOptions = {\r\n                    method: 'GET',\r\n                    headers: myHeaders,\r\n                    redirect: 'follow'\r\n                };\r\n        \r\n                var status_code;\r\n                await fetch(`http://${get_ip(device_type)}:9000/users/${localUser._id}`, requestOptions)\r\n                .then(response => {\r\n                    status_code = response.status;\r\n                    return response.json()\r\n                })\r\n                .then(result => {\r\n                    if (status_code === 200) {\r\n                        // console.log(result);\r\n                        // setLocalUser(result.user_data);\r\n                        update_local_user_data(result.user_data);\r\n                    }\r\n                })\r\n                .catch(error => console.log('error', error));\r\n            }\r\n        }\r\n\r\n        fetch_user_profile()\r\n    }, [])\r\n\r\n    if (!props.authorized) return <Redirect to=\"/signin\" />\r\n    return (\r\n        <div className=\"page_wrapper\">\r\n            <NavHeader />\r\n            <main>\r\n                <Switch>\r\n                    <Route exact path=\"/\" component={Home} />\r\n                    <Route exact path=\"/users/employees\" component={Users} />\r\n                    <Route exact path=\"/about\" component={About} />\r\n                    <Route exact path=\"/users/:id\" component={UserProfile} />\r\n                    <Route exact path=\"/users/create\" component={UserProfile} />\r\n                    <Route exact path=\"/calendar\" component={Calendar} />\r\n                    <Route exact path=\"/timesheet\" component={Timesheet} />\r\n                    <Route exact path=\"/daysoff\" component={DaysOff} />\r\n                    <Route exact path=\"/shifts/:id\" component={ShiftDetails} />\r\n                    <Route exact path=\"/shifts/create\" component={ShiftDetails} />\r\n                    <Route exact path=\"/qrcodeviewer\" component={QRCodeViewerPage} />\r\n                    <Route exact path=\"/qrcodescanner\" component={QRCodeScannerPage} />\r\n                </Switch>\r\n            </main>\r\n            <NavFooter />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Main\r\n","import React from 'react';\r\nimport { Redirect, useHistory, Link } from 'react-router-dom';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\n\r\nimport { get_ip, device_type } from '../../shared/components/localhost';\r\nimport './SignIn.css';\r\n\r\nconst SignIn = () => {\r\n    let history = useHistory();\r\n    let has_token = localStorage.getItem('logged_in_token') ? true : false;\r\n\r\n    const validationSchema = Yup.object().shape({\r\n        email: Yup.string()\r\n            .required('Username is required'),\r\n        password: Yup.string()\r\n            .min(6, 'Password must be at least 6 characters')\r\n            .required('Password is required')\r\n    });\r\n    const formOptions = { resolver: yupResolver(validationSchema) };\r\n\r\n    // useForm() hook\r\n    const { register, handleSubmit, formState } = useForm(formOptions);\r\n    const { errors } = formState;\r\n\r\n    const onSubmit = async (data) => {\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"Content-Type\", \"application/json\");\r\n        \r\n        var raw = JSON.stringify(data);\r\n        \r\n        var requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: raw,\r\n            redirect: 'follow'\r\n        };\r\n        \r\n        await fetch(`http:///${get_ip(device_type)}:9000/users/login`, requestOptions)\r\n        .then(response => {\r\n            console.log(response);\r\n            if (response.status === 200) console.log('Success!'); else console.log('Failed!');\r\n            return response.json()\r\n        })\r\n        .then(result => {\r\n            if (result.hasOwnProperty(\"token\")) {\r\n                localStorage.setItem('logged_in_token', result.token);\r\n                localStorage.setItem('userData', JSON.stringify(result.userData));\r\n                history.push(\"/\");\r\n            } else {\r\n                localStorage.removeItem('logged_in_token');\r\n            }\r\n\r\n            console.log(result);\r\n        })\r\n        .catch(error => {\r\n            console.log('error', error)\r\n        });\r\n    }\r\n\r\n    if (has_token) return <Redirect to=\"/\" />\r\n\r\n    return (\r\n        <div className=\"bg-dark size_full_screen\">\r\n            <div className=\"signinFormContainer\">\r\n                <h4>Please sign in</h4>\r\n                <form onSubmit={handleSubmit(onSubmit)}>\r\n                    <div>\r\n                        <label>Username</label>\r\n                        <input name=\"email\" type=\"text\" {...register('email')} className={`form-control ${errors.email ? 'is-invalid' : ''}`} />\r\n                        <div className=\"invalid-feedback\">{errors.email?.message}</div>\r\n                    </div>\r\n                    <div>\r\n                        <label>Password</label>\r\n                        <input name=\"password\" type=\"password\" {...register('password')} className={`form-control ${errors.password ? 'is-invalid' : ''}`} />\r\n                        <div className=\"invalid-feedback\">{errors.password?.message}</div>\r\n                    </div>\r\n                    <div className=\"goBtn\">\r\n                        <button type=\"submit\" className=\"btn\">Go!</button>\r\n                    </div>\r\n                </form>\r\n                <div className=\"signinLogo\">\r\n                    <p>EveryShift</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default SignIn;","import React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Main from './Main';\r\nimport SignIn from './users/pages/SignIn';\r\n\r\nconst App = () => {\r\n  return (\r\n      <Router>\r\n          <Switch>\r\n            <Route path=\"/signin\" component={SignIn} />\r\n            <Route path=\"/\" component={() => <Main authorized={localStorage.getItem('logged_in_token') ? true : false} />} />\r\n          </Switch>\r\n      </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// import \"bootstrap/dist/css/bootstrap.css\";\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}